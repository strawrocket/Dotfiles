"use strict";(self.webpackChunkMALSync=self.webpackChunkMALSync||[]).push([[5827],{95827:(e,a,t)=>{t.r(a),t.d(a,{default:()=>j});var n=t(20641),l=t(50953),s=t(53751),i=t(90033),o=t(75220),r=t(82186),u=t(24298),p=t(86255),d=t(60773),c=t(3507),v=t(58848),f=t(35336),m=t(39813),g=t(18221),y=t(17304),k=t(11312),h=t(26017);const w={class:"progress-text"},b=(0,n.pM)({__name:"media-status-dropdown",props:{modelValue:{type:Number,require:!0,default:null},color:{type:String,default:"blue"},rewatching:{type:Boolean,default:!0},type:{type:String,default:"anime"}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,s=(0,n.EW)((()=>{const e=[7,1,2,3,4,6];return t.rewatching&&e.push(23),e.map((e=>({value:e,title:h.getStatusText(t.type,e)})))})),o=a,r=(0,l.KR)(t.modelValue);return(0,n.wB)(r,(e=>{o("update:modelValue",e)})),(0,n.wB)((()=>t.modelValue),(e=>{r.value=e})),(e,a)=>((0,n.uX)(),(0,n.Wv)(g.A,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=e),options:s.value,"align-items":"left"},{select:(0,n.k6)((e=>[(0,n.bF)(k.A,{tabindex:-1,animation:!1,padding:"pill"},{default:(0,n.k6)((()=>[(0,n.bF)(y.A,{status:e.value,"relative-height":!0},null,8,["status"]),(0,n.Lk)("span",w,(0,i.v_)(e.currentTitle),1)])),_:2},1024)])),option:(0,n.k6)((e=>[(0,n.bF)(y.A,{status:e.option.value},null,8,["status"]),(0,n.eW)(" "+(0,i.v_)(e.option.title),1)])),_:1},8,["modelValue","options"]))}});var _=t(66262);const x=(0,_.A)(b,[["styles",["/* stylelint-disable prettier/prettier */\n/* Aspect ratios */\n/* Transitions */\n/* Typography */\n/* Shadows */\n/* Fonts */\n@keyframes skeleton-loading-malsync-147ff95a {\nto {\n    transform: translateX(100%);\n}\n}\nbutton[data-v-147ff95a] {\n  border-radius: 15px;\n}\n@media screen and (max-width: 499px) {\n.progress-text[data-v-147ff95a] {\n    display: none;\n}\n}\n"]],["__scopeId","data-v-147ff95a"],["__file","media-status-dropdown.vue"]]);var A=t(72920),W=t(7783);const R={key:0},E=(0,n.pM)({__name:"error-bookmarks",props:{listRequest:{type:Object,default:()=>({})}},setup:e=>(a,t)=>{const l=(0,n.gN)("dompurify-html");return!e.listRequest.loading&&e.listRequest.error?((0,n.uX)(),(0,n.Wv)(W.A,{key:0},{default:(0,n.k6)((()=>[e.listRequest.error.html?(0,n.bo)(((0,n.uX)(),(0,n.CE)("span",R,null,512)),[[l,e.listRequest.error.html]]):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)((0,i.v_)(e.listRequest.error.message||e.listRequest.error),1)],64))])),_:1})):(0,n.Q3)("v-if",!0)}}),F=(0,_.A)(E,[["__file","error-bookmarks.vue"]]);var L=t(49257),V=t(97920),X=t(80737),C=t(97453),S=t(26017),M=t(13647),q=t(78584);const B=e=>((0,n.Qi)("data-v-affbaf0c"),e=e(),(0,n.jt)(),e),Q={class:"bookmarks"},U=B((()=>(0,n.Lk)("div",{class:"material-icons m-pill",title:"refresh"},"refresh",-1))),T=B((()=>(0,n.Lk)("div",{class:"material-icons m-pill",title:"random"},"shuffle",-1))),N=B((()=>(0,n.Lk)("div",{style:{"flex-grow":"1"}},null,-1))),K={class:"select-icon"},I={class:"material-icons"},$={key:2,class:"material-icons sortPlaceholder"},O={class:"material-icons select-icon"},P={class:"material-icons select-icon"},z=(0,n.pM)({__name:"bookmarks",props:{type:{type:String,default:"anime"},state:{type:String,default:"2"}},setup(e){const a=(0,n.WQ)("rootWindow"),t=(0,n.WQ)("rootDocument"),y=(0,o.rd)(),h=e,w=(0,l.KR)({state:Number(h.state),type:h.type}),b=(0,l.KR)([]);(0,n.wB)((()=>h.type),(e=>{w.value.type=e})),(0,n.wB)((()=>w.value.type),(e=>{y.push({name:"Bookmarks",params:{type:e}}),e&&(0,p.KB)(e)})),(0,n.wB)((()=>h.state),(e=>{w.value.state=Number(e),e&&(0,p.v4)(Number(e))})),(0,n.wB)((()=>w.value.state),(e=>{y.push({name:"Bookmarks",params:{state:Number(e)}})}));const _=e=>{const a=C.x.getItem(`sort/${w.value.type}/${w.value.state}`);return a&&e.find((e=>e.value===a.replace("_asc","")))?a:"default"},W=(0,c.W)(w,(async e=>{b.value=[];const a=await(0,v.vS)(e.value.state,e.value.type);return a.setSort(_(a.getSortingOptions())),a.modes.cached=!0,a.getCached().then((e=>{b.value=e})),a.modes.initProgress=!0,a.initFrontendMode(),await a.getNextPage().catch((e=>{throw{e,html:a.errorMessage(e)}})),a})),R=(0,n.EW)((()=>b.value.length&&W.loading?b.value:W.data&&!W.loading?W.data.getTemplist():null)),E=e=>{const a=e;if(e.options){const t=e.options.u,n=e.options.r,l=e.options.c;l&&l.ep===e.watchedEp+1?a.streamUrl=l.url:n&&n.ep===e.watchedEp?a.streamUrl=n.url:t&&(a.streamUrl=t),a.streamUrl&&(a.streamIcon=S.favicon(a.streamUrl.split("/")[2]))}return e.fn.progress&&e.fn.progress.isAiring()&&(a.progressText=e.fn.progress.getAuto(),a.progressEp=e.fn.progress.getCurrentEpisode(),a.progress=e.fn.progress),a},B=A.R.map((e=>({value:e.icon,title:e.name}))),z=(0,n.EW)({get:()=>M.settings.get("bookMarksList"),set(e){M.settings.set("bookMarksList",e)}}),j=(0,n.EW)((()=>A.R.find((e=>e.icon===z.value))||A.R[0])),D=()=>{a.pageYOffset+a.innerHeight>t.documentElement.scrollHeight-600&&async function(){W.data&&!W.data.isLoading()&&await W.data.getNextPage()}()};(0,n.wB)((()=>W.data),(()=>D())),(0,n.n)((()=>{a.addEventListener("scroll",D)})),(0,n.Y4)((()=>{a.removeEventListener("scroll",D)})),(0,n.sV)((()=>{a.addEventListener("scroll",D)})),(0,n.hi)((()=>{a.removeEventListener("scroll",D)}));const H=(0,n.EW)((()=>(W.data?W.data.getSortingOptions(!0):[]).map((e=>({value:e.value,title:e.title,meta:{icon:e.icon,asc:e.asc}}))))),Y=(0,n.EW)({get:()=>_(H.value),set(e){C.x.setItem(`sort/${w.value.type}/${w.value.state}`,e),W.execute()}}),G={anime:[],manga:[]};return(e,a)=>((0,n.uX)(),(0,n.CE)("div",Q,[(0,n.bF)(d.A,{class:"controls"},{default:(0,n.k6)((()=>[(0,n.bF)(u.A,{modelValue:w.value.type,"onUpdate:modelValue":a[0]||(a[0]=e=>w.value.type=e),options:[{value:"anime",title:e.lang("Anime")},{value:"manga",title:e.lang("Manga")}]},null,8,["modelValue","options"]),(0,n.bF)(x,{modelValue:w.value.state,"onUpdate:modelValue":a[1]||(a[1]=e=>w.value.state=e),type:w.value.type,rewatching:(0,l.R1)(W).data?(0,l.R1)(W).data?.seperateRewatching:23===w.value.state},null,8,["modelValue","type","rewatching"]),(0,n.bF)(k.A,{padding:"pill",onClick:a[2]||(a[2]=e=>{W.execute()})},{default:(0,n.k6)((()=>[U])),_:1}),6===w.value.state?((0,n.uX)(),(0,n.Wv)(k.A,{key:0,padding:"pill",onClick:a[3]||(a[3]=e=>async function(e,a){if(!G[a].length){S.flashm("Loading");const e=await(0,v.vS)(6,a);await e.getCompleteList().then((async e=>{G[a]=e})).catch((e=>{q.error(e)}))}if(G[a].length>1){const e=G[a][Math.floor(Math.random()*G[a].length)].url,t=(0,X.q)(e);y.push({name:"Overview",params:t.path})}else S.flashm("List is too small!")}(0,w.value.type))},{default:(0,n.k6)((()=>[T])),_:1})):(0,n.Q3)("v-if",!0),N,H.value&&H.value.length?((0,n.uX)(),(0,n.Wv)(g.A,{key:1,modelValue:Y.value,"onUpdate:modelValue":a[5]||(a[5]=e=>Y.value=e),options:H.value,"align-items":"left","compare-func":(e,a)=>e.toString()===a.toString().replace("_asc","")},{select:(0,n.k6)((e=>[(0,n.Lk)("div",K,[e.meta.asc?((0,n.uX)(),(0,n.CE)("span",{key:0,class:"material-icons",onClick:a[4]||(a[4]=(0,s.withModifiers)((e=>Y.value.endsWith("_asc")?Y.value=Y.value.replace("_asc",""):Y.value=Y.value+"_asc"),["stop"]))},(0,i.v_)(Y.value.endsWith("_asc")?"arrow_upward":"arrow_downward"),1)):(0,n.Q3)("v-if",!0),(0,n.Lk)("span",I,(0,i.v_)(e.meta.icon||"filter_list"),1)])])),option:(0,n.k6)((e=>[(0,n.bF)(V.A,{icon:e.option.meta.icon},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(e.option.title),1)])),_:2},1032,["icon"])])),_:1},8,["modelValue","options","compare-func"])):((0,n.uX)(),(0,n.CE)("span",$,"filter_list")),(0,n.bF)(g.A,{modelValue:z.value,"onUpdate:modelValue":a[6]||(a[6]=e=>z.value=e),options:(0,l.R1)(B),"align-items":"left",direction:"row",size:"small"},{select:(0,n.k6)((()=>[(0,n.Lk)("span",O,(0,i.v_)(j.value.icon),1)])),option:(0,n.k6)((e=>[(0,n.Lk)("span",P,(0,i.v_)(e.option.value),1)])),_:1},8,["modelValue","options"])])),_:1}),(0,l.R1)(W).error?(0,n.Q3)("v-if",!0):((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[R.value?((0,n.uX)(),(0,n.Wv)(d.A,{key:0,spacer:"double",class:(0,i.C4)(["grid",{cached:b.value.length&&(0,l.R1)(W).loading}])},{default:(0,n.k6)((()=>[((0,n.uX)(),(0,n.Wv)(f.A,{key:j.value.name,"min-width":j.value.width,"min-width-popup":j.value.popupWidth,class:(0,i.C4)(["grid-el",`type-${j.value.name.replace(" ","-").toLowerCase()}`])},{default:(0,n.k6)((()=>[(0,n.bF)(m.A,{"delay-duration":j.value.transition},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(R.value,(e=>((0,n.uX)(),(0,n.Wv)((0,n.$y)(j.value.component),{key:e.uid,item:E(e)},null,8,["item"])))),128))])),_:1},8,["delay-duration"])])),_:1},8,["min-width","min-width-popup","class"]))])),_:1},8,["class"])):(0,n.Q3)("v-if",!0),(0,l.R1)(W).loading||!R.value||R.value.length?(0,n.Q3)("v-if",!0):((0,n.uX)(),(0,n.Wv)(d.A,{key:1,class:"spinner-wrap"},{default:(0,n.k6)((()=>[(0,n.bF)(L.A)])),_:1})),(0,l.R1)(W).loading?((0,n.uX)(),(0,n.Wv)(d.A,{key:2,class:"spinner-wrap"},{default:(0,n.k6)((()=>[(0,n.bF)(r.A)])),_:1})):(0,n.Q3)("v-if",!0),(0,n.bF)(s.Transition,{duration:100},{default:(0,n.k6)((()=>[(0,l.R1)(W).loading||!(0,l.R1)(W).data||(0,l.R1)(W).data.isDone()?(0,n.Q3)("v-if",!0):((0,n.uX)(),(0,n.Wv)(d.A,{key:0,class:"spinner-wrap"},{default:(0,n.k6)((()=>[(0,n.bF)(r.A)])),_:1}))])),_:1})],64)),(0,n.bF)(F,{"list-request":(0,l.R1)(W)},null,8,["list-request"])]))}}),j=(0,_.A)(z,[["styles",["/* stylelint-disable prettier/prettier */\n/* Aspect ratios */\n/* Transitions */\n/* Typography */\n/* Shadows */\n/* Fonts */\n@keyframes skeleton-loading-malsync-affbaf0c {\nto {\n    transform: translateX(100%);\n}\n}\n.bookmarks[data-v-affbaf0c] {\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n}\n.spinner-wrap[data-v-affbaf0c] {\n  flex-grow: 1;\n  display: flex;\n  align-items: center;\n}\n.controls[data-v-affbaf0c] {\n  display: flex;\n  gap: var(--size-spacer-half);\n  flex-wrap: wrap;\n  min-height: 30px;\n}\n.grid[data-v-affbaf0c] {\n  transition: filter 0.4s, opacity 0.4s;\n}\n.grid.cached[data-v-affbaf0c] {\n  opacity: 0.4;\n  filter: grayscale(1);\n  transition: none;\n}\n.grid .grid-el.type-tiles[data-v-affbaf0c] {\n  gap: 20px;\n}\n@media screen and (max-width: 600px) {\n.grid .grid-el.type-tiles[data-v-affbaf0c] {\n    gap: var(--size-spacer);\n}\n}\n.sortPlaceholder[data-v-affbaf0c] {\n  padding-top: 3px;\n  pointer-events: not-allowed;\n}\n.select-icon[data-v-affbaf0c] {\n  display: flex;\n}\n@media screen and (max-width: 600px) {\n.m-pill[data-v-affbaf0c] {\n    font-size: 20px;\n}\n}\n"]],["__scopeId","data-v-affbaf0c"],["__file","bookmarks.vue"]])}}]);
//# sourceMappingURL=5827.js.map