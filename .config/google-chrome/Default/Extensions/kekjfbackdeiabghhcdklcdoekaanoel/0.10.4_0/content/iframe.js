/*! For license information please see iframe.js.LICENSE.txt */
(()=>{var e={50953:(e,t,n)=>{"use strict";n.d(t,{KR:()=>ye,Kh:()=>ie});var o=n(90033);let r;class i{constructor(e,t,n,o){this.fn=e,this.trigger=t,this.scheduler=n,this.active=!0,this.deps=[],this._dirtyLevel=5,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,function(e,t){t&&t.active&&t.effects.push(e)}(this,o)}get dirty(){if(2===this._dirtyLevel)return!1;if(3===this._dirtyLevel||4===this._dirtyLevel){this._dirtyLevel=1,f();for(let e=0;e<this._depsLength;e++){const t=this.deps[e];if(t.computed){if(2===t.computed.effect._dirtyLevel)return p(),!0;if(t.computed.value,this._dirtyLevel>=5)break}}1===this._dirtyLevel&&(this._dirtyLevel=0),p()}return this._dirtyLevel>=5}set dirty(e){this._dirtyLevel=e?5:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=c,t=r;try{return c=!0,r=this,this._runnings++,a(this),this.fn()}finally{s(this),this._runnings--,r=t,c=e}}stop(){this.active&&(a(this),s(this),this.onStop&&this.onStop(),this.active=!1)}}function a(e){e._trackId++,e._depsLength=0}function s(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)l(e.deps[t],e);e.deps.length=e._depsLength}}function l(e,t){const n=e.get(t);void 0!==n&&t._trackId!==n&&(e.delete(t),0===e.size&&e.cleanup())}let c=!0,u=0;const d=[];function f(){d.push(c),c=!1}function p(){const e=d.pop();c=void 0===e||e}function m(){u++}function h(){for(u--;!u&&y.length;)y.shift()()}function g(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const n=e.deps[e._depsLength];n!==t?(n&&l(n,e),e.deps[e._depsLength++]=t):e._depsLength++}}const y=[];function v(e,t,n){m();for(const n of e.keys()){let o;!e.computed&&n.computed&&n._runnings>0&&(null!=o?o:o=e.get(n)===n._trackId)?n._dirtyLevel=2:(n._dirtyLevel<t&&(null!=o?o:o=e.get(n)===n._trackId)&&(n._shouldSchedule||(n._shouldSchedule=0===n._dirtyLevel),n.computed&&2===n._dirtyLevel&&(n._shouldSchedule=!0),n._dirtyLevel=t),n._shouldSchedule&&(null!=o?o:o=e.get(n)===n._trackId)&&(n.trigger(),n._runnings&&!n.allowRecurse||3===n._dirtyLevel||(n._shouldSchedule=!1,n.scheduler&&y.push(n.scheduler))))}h()}const _=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},b=new WeakMap,w=Symbol(""),x=Symbol("");function S(e,t,n){if(c&&r){let t=b.get(e);t||b.set(e,t=new Map);let o=t.get(n);o||t.set(n,o=_((()=>t.delete(n)))),g(r,o)}}function T(e,t,n,r,i,a){const s=b.get(e);if(!s)return;let l=[];if("clear"===t)l=[...s.values()];else if("length"===n&&(0,o.cy)(e)){const e=Number(r);s.forEach(((t,n)=>{("length"===n||!(0,o.Bm)(n)&&n>=e)&&l.push(t)}))}else switch(void 0!==n&&l.push(s.get(n)),t){case"add":(0,o.cy)(e)?(0,o.yI)(n)&&l.push(s.get("length")):(l.push(s.get(w)),(0,o.CE)(e)&&l.push(s.get(x)));break;case"delete":(0,o.cy)(e)||(l.push(s.get(w)),(0,o.CE)(e)&&l.push(s.get(x)));break;case"set":(0,o.CE)(e)&&l.push(s.get(w))}m();for(const e of l)e&&v(e,5);h()}const E=(0,o.pD)("__proto__,__v_isRef,__isVue"),k=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(o.Bm)),A=R();function R(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=ue(this);for(let e=0,t=this.length;e<t;e++)S(n,0,e+"");const o=n[t](...e);return-1===o||!1===o?n[t](...e.map(ue)):o}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){f(),m();const n=ue(this)[t].apply(this,e);return h(),p(),n}})),e}function L(e){(0,o.Bm)(e)||(e=String(e));const t=ue(this);return S(t,0,e),t.hasOwnProperty(e)}class C{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){const r=this._isReadonly,i=this._isShallow;if("__v_isReactive"===t)return!r;if("__v_isReadonly"===t)return r;if("__v_isShallow"===t)return i;if("__v_raw"===t)return n===(r?i?re:oe:i?ne:te).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const a=(0,o.cy)(e);if(!r){if(a&&(0,o.$3)(A,t))return Reflect.get(A,t,n);if("hasOwnProperty"===t)return L}const s=Reflect.get(e,t,n);return((0,o.Bm)(t)?k.has(t):E(t))?s:(r||S(e,0,t),i?s:ge(s)?a&&(0,o.yI)(t)?s:s.value:(0,o.Gv)(s)?r?ae(s):ie(s):s)}}class N extends C{constructor(e=!1){super(!1,e)}set(e,t,n,r){let i=e[t];if(!this._isShallow){const t=le(i);if(ce(n)||le(n)||(i=ue(i),n=ue(n)),!(0,o.cy)(e)&&ge(i)&&!ge(n))return!t&&(i.value=n,!0)}const a=(0,o.cy)(e)&&(0,o.yI)(t)?Number(t)<e.length:(0,o.$3)(e,t),s=Reflect.set(e,t,n,r);return e===ue(r)&&(a?(0,o.$H)(n,i)&&T(e,"set",t,n):T(e,"add",t,n)),s}deleteProperty(e,t){const n=(0,o.$3)(e,t),r=(e[t],Reflect.deleteProperty(e,t));return r&&n&&T(e,"delete",t,void 0),r}has(e,t){const n=Reflect.has(e,t);return(0,o.Bm)(t)&&k.has(t)||S(e,0,t),n}ownKeys(e){return S(e,0,(0,o.cy)(e)?"length":w),Reflect.ownKeys(e)}}class $ extends C{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const M=new N,I=new $,O=e=>e,D=e=>Reflect.getPrototypeOf(e);function U(e,t,n=!1,r=!1){const i=ue(e=e.__v_raw),a=ue(t);n||((0,o.$H)(t,a)&&S(i,0,t),S(i,0,a));const{has:s}=D(i),l=r?O:n?fe:de;return s.call(i,t)?l(e.get(t)):s.call(i,a)?l(e.get(a)):void(e!==i&&e.get(t))}function P(e,t=!1){const n=this.__v_raw,r=ue(n),i=ue(e);return t||((0,o.$H)(e,i)&&S(r,0,e),S(r,0,i)),e===i?n.has(e):n.has(e)||n.has(i)}function F(e,t=!1){return e=e.__v_raw,!t&&S(ue(e),0,w),Reflect.get(e,"size",e)}function H(e){e=ue(e);const t=ue(this);return D(t).has.call(t,e)||(t.add(e),T(t,"add",e,e)),this}function z(e,t){t=ue(t);const n=ue(this),{has:r,get:i}=D(n);let a=r.call(n,e);a||(e=ue(e),a=r.call(n,e));const s=i.call(n,e);return n.set(e,t),a?(0,o.$H)(t,s)&&T(n,"set",e,t):T(n,"add",e,t),this}function B(e){const t=ue(this),{has:n,get:o}=D(t);let r=n.call(t,e);r||(e=ue(e),r=n.call(t,e)),o&&o.call(t,e);const i=t.delete(e);return r&&T(t,"delete",e,void 0),i}function W(){const e=ue(this),t=0!==e.size,n=e.clear();return t&&T(e,"clear",void 0,void 0),n}function j(e,t){return function(n,o){const r=this,i=r.__v_raw,a=ue(i),s=t?O:e?fe:de;return!e&&S(a,0,w),i.forEach(((e,t)=>n.call(o,s(e),s(t),r)))}}function G(e,t,n){return function(...r){const i=this.__v_raw,a=ue(i),s=(0,o.CE)(a),l="entries"===e||e===Symbol.iterator&&s,c="keys"===e&&s,u=i[e](...r),d=n?O:t?fe:de;return!t&&S(a,0,c?x:w),{next(){const{value:e,done:t}=u.next();return t?{value:e,done:t}:{value:l?[d(e[0]),d(e[1])]:d(e),done:t}},[Symbol.iterator](){return this}}}}function Y(e){return function(...t){return"delete"!==e&&("clear"===e?void 0:this)}}function q(){const e={get(e){return U(this,e)},get size(){return F(this)},has:P,add:H,set:z,delete:B,clear:W,forEach:j(!1,!1)},t={get(e){return U(this,e,!1,!0)},get size(){return F(this)},has:P,add:H,set:z,delete:B,clear:W,forEach:j(!1,!0)},n={get(e){return U(this,e,!0)},get size(){return F(this,!0)},has(e){return P.call(this,e,!0)},add:Y("add"),set:Y("set"),delete:Y("delete"),clear:Y("clear"),forEach:j(!0,!1)},o={get(e){return U(this,e,!0,!0)},get size(){return F(this,!0)},has(e){return P.call(this,e,!0)},add:Y("add"),set:Y("set"),delete:Y("delete"),clear:Y("clear"),forEach:j(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((r=>{e[r]=G(r,!1,!1),n[r]=G(r,!0,!1),t[r]=G(r,!1,!0),o[r]=G(r,!0,!0)})),[e,n,t,o]}const[V,K,X,J]=q();function Z(e,t){const n=t?e?J:X:e?K:V;return(t,r,i)=>"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get((0,o.$3)(n,r)&&r in t?n:t,r,i)}const Q={get:Z(!1,!1)},ee={get:Z(!0,!1)},te=new WeakMap,ne=new WeakMap,oe=new WeakMap,re=new WeakMap;function ie(e){return le(e)?e:se(e,!1,M,Q,te)}function ae(e){return se(e,!0,I,ee,oe)}function se(e,t,n,r,i){if(!(0,o.Gv)(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const a=i.get(e);if(a)return a;const s=(l=e).__v_skip||!Object.isExtensible(l)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((0,o.Zf)(l));var l;if(0===s)return e;const c=new Proxy(e,2===s?r:n);return i.set(e,c),c}function le(e){return!(!e||!e.__v_isReadonly)}function ce(e){return!(!e||!e.__v_isShallow)}function ue(e){const t=e&&e.__v_raw;return t?ue(t):e}const de=e=>(0,o.Gv)(e)?ie(e):e,fe=e=>(0,o.Gv)(e)?ae(e):e;class pe{constructor(e,t,n,o){this.getter=e,this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new i((()=>e(this._value)),(()=>he(this,3===this.effect._dirtyLevel?3:4))),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=n}get value(){const e=ue(this),t=e.effect._dirtyLevel;return e._cacheable&&!e.effect.dirty||!(0,o.$H)(e._value,e._value=e.effect.run())||3!==t&&he(e,5),me(e),e.effect._dirtyLevel>=2&&he(e,3),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function me(e){var t;c&&r&&(e=ue(e),g(r,null!=(t=e.dep)?t:e.dep=_((()=>e.dep=void 0),e instanceof pe?e:void 0)))}function he(e,t=5,n,o){const r=(e=ue(e)).dep;r&&v(r,t)}function ge(e){return!(!e||!0!==e.__v_isRef)}function ye(e){return n=!1,ge(t=e)?t:new ve(t,n);var t,n}class ve{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:ue(e),this._value=t?e:de(e)}get value(){return me(this),this._value}set value(e){const t=this.__v_isShallow||ce(e)||le(e);e=t?e:ue(e),(0,o.$H)(e,this._rawValue)&&(this._rawValue,this._rawValue=e,this._value=t?e:de(e),he(this,5))}}},90033:(e,t,n)=>{"use strict";function o(e,t){const n=new Set(e.split(","));return t?e=>n.has(e.toLowerCase()):e=>n.has(e)}n.d(t,{$3:()=>i,$H:()=>v,Bm:()=>l,CE:()=>s,Gv:()=>c,Zf:()=>f,cy:()=>a,pD:()=>o,yI:()=>p}),Object.assign;const r=Object.prototype.hasOwnProperty,i=(e,t)=>r.call(e,t),a=Array.isArray,s=e=>"[object Map]"===d(e),l=e=>"symbol"==typeof e,c=e=>null!==e&&"object"==typeof e,u=Object.prototype.toString,d=e=>u.call(e),f=e=>d(e).slice(8,-1),p=e=>"string"==typeof e&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,m=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},h=/-(\w)/g,g=(m((e=>e.replace(h,((e,t)=>t?t.toUpperCase():"")))),/\B([A-Z])/g),y=(m((e=>e.replace(g,"-$1").toLowerCase())),m((e=>e.charAt(0).toUpperCase()+e.slice(1)))),v=(m((e=>e?`on${y(e)}`:"")),(e,t)=>!Object.is(e,t))},42838:function(e){e.exports=function(){"use strict";const{entries:e,setPrototypeOf:t,isFrozen:n,getPrototypeOf:o,getOwnPropertyDescriptor:r}=Object;let{freeze:i,seal:a,create:s}=Object,{apply:l,construct:c}="undefined"!=typeof Reflect&&Reflect;i||(i=function(e){return e}),a||(a=function(e){return e}),l||(l=function(e,t,n){return e.apply(t,n)}),c||(c=function(e,t){return new e(...t)});const u=S(Array.prototype.forEach),d=S(Array.prototype.pop),f=S(Array.prototype.push),p=S(String.prototype.toLowerCase),m=S(String.prototype.toString),h=S(String.prototype.match),g=S(String.prototype.replace),y=S(String.prototype.indexOf),v=S(String.prototype.trim),_=S(Object.prototype.hasOwnProperty),b=S(RegExp.prototype.test),w=(x=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c(x,t)});var x;function S(e){return function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return l(e,t,o)}}function T(e,o){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;t&&t(e,null);let i=o.length;for(;i--;){let t=o[i];if("string"==typeof t){const e=r(t);e!==t&&(n(o)||(o[i]=e),t=e)}e[t]=!0}return e}function E(e){for(let t=0;t<e.length;t++)_(e,t)||(e[t]=null);return e}function k(t){const n=s(null);for(const[o,r]of e(t))_(t,o)&&(Array.isArray(r)?n[o]=E(r):r&&"object"==typeof r&&r.constructor===Object?n[o]=k(r):n[o]=r);return n}function A(e,t){for(;null!==e;){const n=r(e,t);if(n){if(n.get)return S(n.get);if("function"==typeof n.value)return S(n.value)}e=o(e)}return function(){return null}}const R=i(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),L=i(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),C=i(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),N=i(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),$=i(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),M=i(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),I=i(["#text"]),O=i(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),D=i(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),U=i(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),P=i(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),F=a(/\{\{[\w\W]*|[\w\W]*\}\}/gm),H=a(/<%[\w\W]*|[\w\W]*%>/gm),z=a(/\${[\w\W]*}/gm),B=a(/^data-[\-\w.\u00B7-\uFFFF]/),W=a(/^aria-[\-\w]+$/),j=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),G=a(/^(?:\w+script|data):/i),Y=a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),q=a(/^html$/i),V=a(/^[a-z][.\w]*(-[.\w]+)+$/i);var K=Object.freeze({__proto__:null,MUSTACHE_EXPR:F,ERB_EXPR:H,TMPLIT_EXPR:z,DATA_ATTR:B,ARIA_ATTR:W,IS_ALLOWED_URI:j,IS_SCRIPT_OR_DATA:G,ATTR_WHITESPACE:Y,DOCTYPE_NAME:q,CUSTOM_ELEMENT:V});const X=1,J=3,Z=7,Q=8,ee=9,te=function(){return"undefined"==typeof window?null:window};return function t(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te();const o=e=>t(e);if(o.version="3.1.6",o.removed=[],!n||!n.document||n.document.nodeType!==ee)return o.isSupported=!1,o;let{document:r}=n;const a=r,l=a.currentScript,{DocumentFragment:c,HTMLTemplateElement:x,Node:S,Element:E,NodeFilter:F,NamedNodeMap:H=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:z,DOMParser:B,trustedTypes:W}=n,G=E.prototype,Y=A(G,"cloneNode"),V=A(G,"remove"),ne=A(G,"nextSibling"),oe=A(G,"childNodes"),re=A(G,"parentNode");if("function"==typeof x){const e=r.createElement("template");e.content&&e.content.ownerDocument&&(r=e.content.ownerDocument)}let ie,ae="";const{implementation:se,createNodeIterator:le,createDocumentFragment:ce,getElementsByTagName:ue}=r,{importNode:de}=a;let fe={};o.isSupported="function"==typeof e&&"function"==typeof re&&se&&void 0!==se.createHTMLDocument;const{MUSTACHE_EXPR:pe,ERB_EXPR:me,TMPLIT_EXPR:he,DATA_ATTR:ge,ARIA_ATTR:ye,IS_SCRIPT_OR_DATA:ve,ATTR_WHITESPACE:_e,CUSTOM_ELEMENT:be}=K;let{IS_ALLOWED_URI:we}=K,xe=null;const Se=T({},[...R,...L,...C,...$,...I]);let Te=null;const Ee=T({},[...O,...D,...U,...P]);let ke=Object.seal(s(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ae=null,Re=null,Le=!0,Ce=!0,Ne=!1,$e=!0,Me=!1,Ie=!0,Oe=!1,De=!1,Ue=!1,Pe=!1,Fe=!1,He=!1,ze=!0,Be=!1,We=!0,je=!1,Ge={},Ye=null;const qe=T({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ve=null;const Ke=T({},["audio","video","img","source","image","track"]);let Xe=null;const Je=T({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ze="http://www.w3.org/1998/Math/MathML",Qe="http://www.w3.org/2000/svg",et="http://www.w3.org/1999/xhtml";let tt=et,nt=!1,ot=null;const rt=T({},[Ze,Qe,et],m);let it=null;const at=["application/xhtml+xml","text/html"];let st=null,lt=null;const ct=r.createElement("form"),ut=function(e){return e instanceof RegExp||e instanceof Function},dt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!lt||lt!==e){if(e&&"object"==typeof e||(e={}),e=k(e),it=-1===at.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,st="application/xhtml+xml"===it?m:p,xe=_(e,"ALLOWED_TAGS")?T({},e.ALLOWED_TAGS,st):Se,Te=_(e,"ALLOWED_ATTR")?T({},e.ALLOWED_ATTR,st):Ee,ot=_(e,"ALLOWED_NAMESPACES")?T({},e.ALLOWED_NAMESPACES,m):rt,Xe=_(e,"ADD_URI_SAFE_ATTR")?T(k(Je),e.ADD_URI_SAFE_ATTR,st):Je,Ve=_(e,"ADD_DATA_URI_TAGS")?T(k(Ke),e.ADD_DATA_URI_TAGS,st):Ke,Ye=_(e,"FORBID_CONTENTS")?T({},e.FORBID_CONTENTS,st):qe,Ae=_(e,"FORBID_TAGS")?T({},e.FORBID_TAGS,st):{},Re=_(e,"FORBID_ATTR")?T({},e.FORBID_ATTR,st):{},Ge=!!_(e,"USE_PROFILES")&&e.USE_PROFILES,Le=!1!==e.ALLOW_ARIA_ATTR,Ce=!1!==e.ALLOW_DATA_ATTR,Ne=e.ALLOW_UNKNOWN_PROTOCOLS||!1,$e=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Me=e.SAFE_FOR_TEMPLATES||!1,Ie=!1!==e.SAFE_FOR_XML,Oe=e.WHOLE_DOCUMENT||!1,Pe=e.RETURN_DOM||!1,Fe=e.RETURN_DOM_FRAGMENT||!1,He=e.RETURN_TRUSTED_TYPE||!1,Ue=e.FORCE_BODY||!1,ze=!1!==e.SANITIZE_DOM,Be=e.SANITIZE_NAMED_PROPS||!1,We=!1!==e.KEEP_CONTENT,je=e.IN_PLACE||!1,we=e.ALLOWED_URI_REGEXP||j,tt=e.NAMESPACE||et,ke=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&ut(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ke.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&ut(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ke.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(ke.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Me&&(Ce=!1),Fe&&(Pe=!0),Ge&&(xe=T({},I),Te=[],!0===Ge.html&&(T(xe,R),T(Te,O)),!0===Ge.svg&&(T(xe,L),T(Te,D),T(Te,P)),!0===Ge.svgFilters&&(T(xe,C),T(Te,D),T(Te,P)),!0===Ge.mathMl&&(T(xe,$),T(Te,U),T(Te,P))),e.ADD_TAGS&&(xe===Se&&(xe=k(xe)),T(xe,e.ADD_TAGS,st)),e.ADD_ATTR&&(Te===Ee&&(Te=k(Te)),T(Te,e.ADD_ATTR,st)),e.ADD_URI_SAFE_ATTR&&T(Xe,e.ADD_URI_SAFE_ATTR,st),e.FORBID_CONTENTS&&(Ye===qe&&(Ye=k(Ye)),T(Ye,e.FORBID_CONTENTS,st)),We&&(xe["#text"]=!0),Oe&&T(xe,["html","head","body"]),xe.table&&(T(xe,["tbody"]),delete Ae.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw w('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw w('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ie=e.TRUSTED_TYPES_POLICY,ae=ie.createHTML("")}else void 0===ie&&(ie=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const o="data-tt-policy-suffix";t&&t.hasAttribute(o)&&(n=t.getAttribute(o));const r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}}(W,l)),null!==ie&&"string"==typeof ae&&(ae=ie.createHTML(""));i&&i(e),lt=e}},ft=T({},["mi","mo","mn","ms","mtext"]),pt=T({},["foreignobject","annotation-xml"]),mt=T({},["title","style","font","a","script"]),ht=T({},[...L,...C,...N]),gt=T({},[...$,...M]),yt=function(e){f(o.removed,{element:e});try{re(e).removeChild(e)}catch(t){V(e)}},vt=function(e,t){try{f(o.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){f(o.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!Te[e])if(Pe||Fe)try{yt(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},_t=function(e){let t=null,n=null;if(Ue)e="<remove></remove>"+e;else{const t=h(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===it&&tt===et&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const o=ie?ie.createHTML(e):e;if(tt===et)try{t=(new B).parseFromString(o,it)}catch(e){}if(!t||!t.documentElement){t=se.createDocument(tt,"template",null);try{t.documentElement.innerHTML=nt?ae:o}catch(e){}}const i=t.body||t.documentElement;return e&&n&&i.insertBefore(r.createTextNode(n),i.childNodes[0]||null),tt===et?ue.call(t,Oe?"html":"body")[0]:Oe?t.documentElement:i},bt=function(e){return le.call(e.ownerDocument||e,e,F.SHOW_ELEMENT|F.SHOW_COMMENT|F.SHOW_TEXT|F.SHOW_PROCESSING_INSTRUCTION|F.SHOW_CDATA_SECTION,null)},wt=function(e){return e instanceof z&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof H)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},xt=function(e){return"function"==typeof S&&e instanceof S},St=function(e,t,n){fe[e]&&u(fe[e],(e=>{e.call(o,t,n,lt)}))},Tt=function(e){let t=null;if(St("beforeSanitizeElements",e,null),wt(e))return yt(e),!0;const n=st(e.nodeName);if(St("uponSanitizeElement",e,{tagName:n,allowedTags:xe}),e.hasChildNodes()&&!xt(e.firstElementChild)&&b(/<[/\w]/g,e.innerHTML)&&b(/<[/\w]/g,e.textContent))return yt(e),!0;if(e.nodeType===Z)return yt(e),!0;if(Ie&&e.nodeType===Q&&b(/<[/\w]/g,e.data))return yt(e),!0;if(!xe[n]||Ae[n]){if(!Ae[n]&&kt(n)){if(ke.tagNameCheck instanceof RegExp&&b(ke.tagNameCheck,n))return!1;if(ke.tagNameCheck instanceof Function&&ke.tagNameCheck(n))return!1}if(We&&!Ye[n]){const t=re(e)||e.parentNode,n=oe(e)||e.childNodes;if(n&&t)for(let o=n.length-1;o>=0;--o){const r=Y(n[o],!0);r.__removalCount=(e.__removalCount||0)+1,t.insertBefore(r,ne(e))}}return yt(e),!0}return e instanceof E&&!function(e){let t=re(e);t&&t.tagName||(t={namespaceURI:tt,tagName:"template"});const n=p(e.tagName),o=p(t.tagName);return!!ot[e.namespaceURI]&&(e.namespaceURI===Qe?t.namespaceURI===et?"svg"===n:t.namespaceURI===Ze?"svg"===n&&("annotation-xml"===o||ft[o]):Boolean(ht[n]):e.namespaceURI===Ze?t.namespaceURI===et?"math"===n:t.namespaceURI===Qe?"math"===n&&pt[o]:Boolean(gt[n]):e.namespaceURI===et?!(t.namespaceURI===Qe&&!pt[o])&&!(t.namespaceURI===Ze&&!ft[o])&&!gt[n]&&(mt[n]||!ht[n]):!("application/xhtml+xml"!==it||!ot[e.namespaceURI]))}(e)?(yt(e),!0):"noscript"!==n&&"noembed"!==n&&"noframes"!==n||!b(/<\/no(script|embed|frames)/i,e.innerHTML)?(Me&&e.nodeType===J&&(t=e.textContent,u([pe,me,he],(e=>{t=g(t,e," ")})),e.textContent!==t&&(f(o.removed,{element:e.cloneNode()}),e.textContent=t)),St("afterSanitizeElements",e,null),!1):(yt(e),!0)},Et=function(e,t,n){if(ze&&("id"===t||"name"===t)&&(n in r||n in ct))return!1;if(Ce&&!Re[t]&&b(ge,t));else if(Le&&b(ye,t));else if(!Te[t]||Re[t]){if(!(kt(e)&&(ke.tagNameCheck instanceof RegExp&&b(ke.tagNameCheck,e)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(e))&&(ke.attributeNameCheck instanceof RegExp&&b(ke.attributeNameCheck,t)||ke.attributeNameCheck instanceof Function&&ke.attributeNameCheck(t))||"is"===t&&ke.allowCustomizedBuiltInElements&&(ke.tagNameCheck instanceof RegExp&&b(ke.tagNameCheck,n)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(n))))return!1}else if(Xe[t]);else if(b(we,g(n,_e,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==y(n,"data:")||!Ve[e])if(Ne&&!b(ve,g(n,_e,"")));else if(n)return!1;return!0},kt=function(e){return"annotation-xml"!==e&&h(e,be)},At=function(e){St("beforeSanitizeAttributes",e,null);const{attributes:t}=e;if(!t)return;const n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Te};let r=t.length;for(;r--;){const i=t[r],{name:a,namespaceURI:s,value:l}=i,c=st(a);let f="value"===a?l:v(l);if(n.attrName=c,n.attrValue=f,n.keepAttr=!0,n.forceKeepAttr=void 0,St("uponSanitizeAttribute",e,n),f=n.attrValue,Ie&&b(/((--!?|])>)|<\/(style|title)/i,f)){vt(a,e);continue}if(n.forceKeepAttr)continue;if(vt(a,e),!n.keepAttr)continue;if(!$e&&b(/\/>/i,f)){vt(a,e);continue}Me&&u([pe,me,he],(e=>{f=g(f,e," ")}));const p=st(e.nodeName);if(Et(p,c,f)){if(!Be||"id"!==c&&"name"!==c||(vt(a,e),f="user-content-"+f),ie&&"object"==typeof W&&"function"==typeof W.getAttributeType)if(s);else switch(W.getAttributeType(p,c)){case"TrustedHTML":f=ie.createHTML(f);break;case"TrustedScriptURL":f=ie.createScriptURL(f)}try{s?e.setAttributeNS(s,a,f):e.setAttribute(a,f),wt(e)?yt(e):d(o.removed)}catch(e){}}}St("afterSanitizeAttributes",e,null)},Rt=function e(t){let n=null;const o=bt(t);for(St("beforeSanitizeShadowDOM",t,null);n=o.nextNode();)St("uponSanitizeShadowNode",n,null),Tt(n)||(n.content instanceof c&&e(n.content),At(n));St("afterSanitizeShadowDOM",t,null)};return o.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null,i=null,s=null;if(nt=!e,nt&&(e="\x3c!--\x3e"),"string"!=typeof e&&!xt(e)){if("function"!=typeof e.toString)throw w("toString is not a function");if("string"!=typeof(e=e.toString()))throw w("dirty is not a string, aborting")}if(!o.isSupported)return e;if(De||dt(t),o.removed=[],"string"==typeof e&&(je=!1),je){if(e.nodeName){const t=st(e.nodeName);if(!xe[t]||Ae[t])throw w("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof S)n=_t("\x3c!----\x3e"),r=n.ownerDocument.importNode(e,!0),r.nodeType===X&&"BODY"===r.nodeName||"HTML"===r.nodeName?n=r:n.appendChild(r);else{if(!Pe&&!Me&&!Oe&&-1===e.indexOf("<"))return ie&&He?ie.createHTML(e):e;if(n=_t(e),!n)return Pe?null:He?ae:""}n&&Ue&&yt(n.firstChild);const l=bt(je?e:n);for(;i=l.nextNode();)Tt(i)||(i.content instanceof c&&Rt(i.content),At(i));if(je)return e;if(Pe){if(Fe)for(s=ce.call(n.ownerDocument);n.firstChild;)s.appendChild(n.firstChild);else s=n;return(Te.shadowroot||Te.shadowrootmode)&&(s=de.call(a,s,!0)),s}let d=Oe?n.outerHTML:n.innerHTML;return Oe&&xe["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&b(q,n.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+d),Me&&u([pe,me,he],(e=>{d=g(d,e," ")})),ie&&He?ie.createHTML(d):d},o.setConfig=function(){dt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),De=!0},o.clearConfig=function(){lt=null,De=!1},o.isValidAttribute=function(e,t,n){lt||dt({});const o=st(e),r=st(t);return Et(o,r,n)},o.addHook=function(e,t){"function"==typeof t&&(fe[e]=fe[e]||[],f(fe[e],t))},o.removeHook=function(e){if(fe[e])return d(fe[e])},o.removeHooks=function(e){fe[e]&&(fe[e]=[])},o.removeAllHooks=function(){fe={}},o}()}()},13647:(e,t,n)=>{"use strict";n.r(t),n.d(t,{request:()=>h,settings:()=>g,storage:()=>m,type:()=>y});var o=n(13647),r=n(78584),i=n(26017);const a={async set(e,t){const n={};return n[e]=t,new Promise(((t,o)=>{s(e).set(n,(function(){chrome.runtime.lastError?o(chrome.runtime.lastError):t()}))}))},get:async e=>new Promise(((t,n)=>{s(e).get(e,(function(o){chrome.runtime.lastError?n(chrome.runtime.lastError):t(o[e])}))})),remove:async e=>new Promise(((t,n)=>{s(e).remove(e,(function(){chrome.runtime.lastError?n(chrome.runtime.lastError):t()}))})),list:async(e="local")=>new Promise(((t,n)=>{"local"===e?chrome.storage.local.get(null,(function(e){t(e)})):chrome.storage.sync.get(null,(function(e){t(e)}))})),async addStyle(e){try{const t=document.createElement("style");t.textContent=e,(document.head||document.body||document.documentElement||document).appendChild(t)}catch(e){console.log(`Could not add css:${e}`)}},version:()=>chrome.runtime.getManifest().version,lang(e,t){if(o.settings.get("forceEn")&&"undefined"!=typeof i18n){let n=i18n[e];if(void 0!==t)for(let e=0;e<t.length;e++)n=n.replace(`$${e+1}`,t[e]);return n}return chrome.i18n.getMessage(e,t)},langDirection(){try{const e=chrome.i18n.getUILanguage();if(/^(ar)(-|$)/i.test(e)&&!o.settings.get("forceEn"))return"rtl"}catch(e){r.error(e)}return"ltr"},assetUrl:e=>chrome.runtime.getURL(`assets/${e}`),injectCssResource(e,t){alert("injectCssResource not supported in webextension")},injectjsResource(e,t){const n=document.createElement("script");n.src=chrome.runtime.getURL(`vendor/${e}`),n.onload=function(){this.remove()},t.get(0).appendChild(n)},addProxyScriptToTag:(e,t)=>(e.src=chrome.runtime.getURL(`/content/proxy/proxy_${t}.js`),e),updateDom(e){const t=document.createElement("script");t.text="\n        document.getElementsByTagName('head')[0].onclick = function(e){\n          try{\n            componentHandler.upgradeDom();\n          }catch(e){\n            console.log(e);\n            setTimeout(function(){\n              componentHandler.upgradeDom();\n            },500);\n          }\n        }",t.onload=function(){this.remove()},e.get(0).appendChild(t)},storageOnChanged(e){chrome.storage.onChanged.addListener(e)}};function s(e){return i.syncRegex.test(e)?chrome.storage.sync:chrome.storage.local}const l={async xhr(e,t){if(void 0!==l.sendMessage)return l.sendMessage({name:"xhr",method:e,url:t}).then((e=>{if(429===e.status)throw"Rate limit Timeout";if(0===e.status)throw e.responseText;return e}));throw"Could not send xhr"},sendMessage:async e=>new Promise(((t,n)=>{chrome.runtime.sendMessage(e,(function(e){t(e)}))})),notification(e){this.sendMessage({name:"notification",options:e})},database(e,t){return this.sendMessage({name:"database",options:{call:e,param:t}})}};var c=n(50953),u=n(13647),d=n(78584),f=n(26017);const p={options:(0,c.Kh)({autoTrackingModeanime:"video",readerTracking:!0,askBefore:!0,autoTrackingModemanga:"instant",enablePages:{},forceEn:!1,rpc:!0,presenceLargeImage:"cover",presenceShowButtons:!0,presenceShowMalsync:!1,userscriptModeButton:!1,syncMode:"MAL",syncModeSimkl:"MAL",localSync:!0,delay:0,videoDuration:85,malTags:!1,malContinue:!0,malResume:!0,usedPage:!0,epPredictions:!0,theme:"auto",themeSidebars:!0,themeColor:"#000000",themeOpacity:100,themeImage:"",minimalWindow:!1,posLeft:"left",miniMALonMal:!1,floatButtonStealth:!1,minimizeBigPopup:!1,floatButtonCorrection:!0,floatButtonHide:!1,autoCloseMinimal:!1,outWay:!0,miniMalWidth:"550px",miniMalHeight:"90%",malThumbnail:100,friendScore:!0,loadPTWForProgress:!1,quicklinks:["Aniwave","Crunchyroll","Gogoanime","Mangadex","MangaNato","MangaFox","MangaSee","MangaFire","YugenAnime","HiAnime","Hulu","Netflix","Hidive","VIZ","MangaPlus","MangaReader","ComicK"],quicklinksPosition:"default",autofull:!1,autoresume:!1,autoNextEp:!1,highlightAllEp:!1,checkForFiller:!0,crashReport:!0,introSkip:85,introSkipFwd:[17,39],introSkipBwd:[17,37],nextEpShort:[],correctionShort:[67],syncShort:[],progressInterval:120,progressIntervalDefaultAnime:"en/sub",progressIntervalDefaultManga:"en/sub",progressNotificationsAnime:!0,progressNotificationsManga:!0,notificationsSticky:!0,bookMarksList:!1,customDomains:[],anilistUpdateUi:!0,anilistToken:"",anilistOptions:{displayAdultContent:!0,scoreFormat:"POINT_10"},kitsuToken:"",kitsuOptions:{titleLanguagePreference:"canonical",sfwFilter:!1,ratingSystem:"regular"},simklToken:"",malToken:"",malRefresh:"",shikiToken:"",shikiOptions:{locale:"ru"}}),debounceArray:{},isInit:(0,c.KR)(!1),async init(){const e=[];for(const t in this.options){const n=await u.storage.get(`settings/${t}`);void 0!==n&&(this.options[t]=n,e[t]=/(token|refresh)/i.test(t)&&n?"********":n)}let t;return d.log("Settings",e),u.storage.storageOnChanged(((e,n)=>{if("sync"===n)for(const t in e){const n=e[t];/^settings\//i.test(t)&&(this.options[t.replace("settings/","")]=n.newValue,d.info(`Update ${t} option to ${JSON.stringify(n.newValue,null,2)}`))}if("local"===n&&e.rateLimit)try{clearTimeout(t),e.rateLimit.newValue?(d.log("Rate limited"),$(".type-rate").length||f.flashm("Rate limited. Retrying in a moment",{error:!0,type:"rate",permanent:!0})):t=setTimeout((()=>{d.log("No Rate limited"),$(".type-rate").remove()}),5e3)}catch(e){d.error(e)}})),this.isInit.value=!0,this},get(e){if(!this.isInit.value)throw"Settings not initialized";return this.options[e]},set(e,t){if(!Object.prototype.hasOwnProperty.call(this.options,e)){const t=Error(`${e} is not a defined option`);throw d.error(t),t}return this.options[e]=t,u.storage.set(`settings/${e}`,t)},setDebounce(e,t){this.options[e]=t,clearTimeout(this.debounceArray[e]),this.debounceArray[e]=setTimeout((()=>{this.set(e,t),delete this.debounceArray[e]}),1e3)},async getAsync(e){const t=await u.storage.get(`settings/${e}`);return void 0===t&&void 0!==this.options[e]?this.options[e]:t}},m=a,h=l,g=p,y="webextension"},78584:(e,t,n)=>{"use strict";n.r(t),n.d(t,{debug:()=>a,error:()=>r,info:()=>i,log:()=>o,m:()=>s});const o=Function.prototype.bind.call(console.log,console,"%cMAL-Sync","background-color: #2e51a2; color: white; padding: 2px 10px; border-radius: 3px;"),r=Function.prototype.bind.call(console.error,console,"%cMAL-Sync","background-color: #8f0000; color: white; padding: 2px 10px; border-radius: 3px;"),i=Function.prototype.bind.call(console.info,console,"%cMAL-Sync","background-color: wheat; color: black; padding: 2px 10px; border-radius: 3px;"),a=Function.prototype.bind.call(console.debug,console,"%cMAL-Sync","background-color: steelblue; color: black; padding: 2px 10px; border-radius: 3px;"),s=(e,t="",n=[])=>{let o="white";t||(t=function(e){if(!e)return"#ffffff";e=String(e);let t=0;for(let n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);let n="#";for(let e=0;e<3;e++)n+=`00${(t>>8*e&255).toString(16)}`.substr(-2);return n}(e)),"#"===t[0]&&(o=parseInt(t.replace("#",""),16)>8388607.5?"#000":"#fff");const r=`background-color: ${t}; color: ${o}; padding: 2px 10px; border-radius: 3px; margin-left: -5px; border-left: 1px solid white;`;n.push({name:e,style:r});const i={m:(e,t="")=>s(e,t,[...n])},a=n.reduce(((e,t)=>`${e}%c${t.name}`),""),l=n.map((e=>e.style));return i.log=Function.prototype.bind.call(console.log,console,`%cM ${a}`,"background-color: #2e51a2; color: white; padding: 2px 10px; border-radius: 3px;",...l),i.error=Function.prototype.bind.call(console.error,console,`%cM ${a}`,"background-color: #8f0000; color: white; padding: 2px 10px; border-radius: 3px;",...l),i.info=Function.prototype.bind.call(console.info,console,`%cM ${a}`,"background-color: wheat; color: black; padding: 2px 10px; border-radius: 3px;",...l),i.debug=Function.prototype.bind.call(console.debug,console,`%cM ${a}`,"background-color: steelblue; color: black; padding: 2px 10px; border-radius: 3px;",...l),i}},26017:(e,t,n)=>{"use strict";n.r(t),n.d(t,{absoluteLink:()=>_,canHideTabs:()=>H,changeDetect:()=>S,checkDoubleExecution:()=>A,clearCache:()=>oe,elementInViewport:()=>X,episode:()=>m,favicon:()=>d,flashConfirm:()=>Y,flashm:()=>G,fullUrlChangeDetect:()=>x,getAsyncWaitUntilTrue:()=>E,getBaseText:()=>u,getContinueWaching:()=>I,getEntrySettings:()=>D,getResumeWaching:()=>N,getStatusText:()=>B,getTooltip:()=>P,getUrlFromTags:()=>R,getselect:()=>v,handleMalImages:()=>U,htmlDecode:()=>ee,isDomainMatching:()=>ie,isFirefox:()=>te,lazyload:()=>K,notifications:()=>W,pageUrl:()=>Z,parseHtml:()=>b,planTo:()=>p,rateLimitExclude:()=>g,returnYYYYMMDD:()=>Q,setContinueWaching:()=>M,setEntrySettings:()=>O,setResumeWaching:()=>C,setUrlInTags:()=>L,sortAlphabetically:()=>re,status:()=>y,statusTag:()=>z,syncRegex:()=>h,timeCache:()=>j,timeDiffToText:()=>F,upperCaseFirstLetter:()=>ae,urlChangeDetect:()=>w,urlParam:()=>c,urlPart:()=>s,urlStrip:()=>l,wait:()=>J,waitForPageToBeVisible:()=>ne,waitUntilTrue:()=>T,watching:()=>f});var o=n(7263),r=n(13647),i=n(78584),a=n(26017);function s(e,t){if(!e)return"";const n=e.split("/");return n[t]?n[t].replace(/[#?].*/,""):""}function l(e){return e.replace(/[#?].*/,"")}function c(e,t){const n=new RegExp(`[?&]${t}=([^&#]*)`).exec(e);return null===n?null:decodeURI(n[1])||0}function u(e){let t=e.text();return e.children().each((function(){t=t.replace(o.$(this).text(),"")})),t}function d(e){if(!e)return"";const t=e.match(/^(https?:\/\/)?[^/]+/);return t&&(e=t[0]),`https://favicon.malsync.moe/?domain=${e}`}function f(e){return"manga"===e?"Reading":"Watching"}function p(e){return"manga"===e?"Plan to Read":"Plan to Watch"}function m(e){return"manga"===e?r.storage.lang("UI_Chapter"):r.storage.lang("UI_Episode")}const h=/(^settings\/.*|^updateCheckTime$|^tempVersion$|^local:\/\/|^list-tagSettings$)/,g=/^https:\/\/api.malsync.moe\/(shark|mal\/|nc\/mal\/.*\/progress$)/i;var y;function v(e,t){let n=e.split(`name="${t}"`)[1].split("</select>")[0];if(n.indexOf('selected="selected"')>-1){n=n.split("<option");for(let e=0;e<n.length;++e)if(n[e].indexOf('selected="selected"')>-1)return n[e].split('value="')[1].split('"')[0]}return""}function _(e,t){return void 0===e||e.startsWith("http")||("/"!==e.charAt(0)&&(e=`/${e}`),e=t+e),e}function b(e){return(new DOMParser).parseFromString(`<!doctype html><body>${e}`,"text/html").body.textContent}function w(e){let t=window.location.href;return setInterval((function(){t!==window.location.href&&(t=window.location.href,e())}),100)}function x(e,t=!1){let n="";const o=setInterval((function(){const o=t?l(window.location.href):window.location.href;n!==o&&(n=o,e())}),100);return Number(o)}function S(e,t,n=!1){let o=t();const r=setInterval((function(){const n=t();void 0!==n&&o!==n&&(o=t(),e())}),500);return n&&e(),Number(r)}function T(e,t,n=100){const o=setInterval((function(){e()&&(clearInterval(o),t())}),n);return o}function E(e,t=100){let n,o;const r=()=>{clearTimeout(n),o&&o("AsyncWait stopped")};return{asyncWaitUntilTrue:()=>(r(),new Promise(((r,i)=>{o=i,n=T(e,(()=>r()),t)}))),reset:r}}!function(e){e[e.watching=1]="watching",e[e.completed=2]="completed",e[e.onhold=3]="onhold",e[e.dropped=4]="dropped",e[e.planToWatch=6]="planToWatch"}(y||(y={}));const k=Math.random();function A(){$(".mal-sync-double-detect").length&&$(".mal-sync-double-detect").each((function(e){$(this).text()!==k.toString()&&alert("Double execution detected! Please run MAL-Sync once only.")})),$("body").after(o.html(`<div class="mal-sync-double-detect" style="display: none;">${k.toString()}</div>`))}function R(e){return/malSync::[\d\D]+::/.test(e)?t(e.split("malSync::")[1].split("::")[0]):/last::[\d\D]+::/.test(e)?t(e.split("last::")[1].split("::")[0]):void 0;function t(e){try{return atob(e)}catch(t){return e}}}function L(e,t){if(""===e)return t.replace(/,?(malSync|last)::[^ \n]+?::/,"");if(!r.settings.get("malTags"))return t;const n=`malSync::${btoa(e)}::`;return/(last|malSync)::[\d\D]+::/.test(t)?t.replace(/(last|malSync)::[^^]*?::/,n):`${t},${n}`}async function C(e,t,n,o){return r.storage.set(`resume/${n}/${o}`,{url:e,ep:t})}async function N(e,t){if(r.settings.get("malResume"))return r.storage.get(`resume/${e}/${t}`)}async function M(e,t,n,o){return r.storage.set(`continue/${n}/${o}`,{url:e,ep:t})}async function I(e,t){if(r.settings.get("malContinue"))return r.storage.get(`continue/${e}/${t}`)}async function O(e,t,n,o=""){const i={};if(n){for(const e in n)switch(e){case"u":case"p":i[e]=n[e]}r.settings.get("malTags")?o=L(JSON.stringify(i),o):await r.storage.set(`tagSettings/${e}/${t}`,JSON.stringify(i))}return Object.values(i).find((e=>Boolean(e)))||(o=L("",o),r.settings.get("malTags")||await r.storage.remove(`tagSettings/${e}/${t}`)),o}async function D(e,t,n=""){const o={u:null,c:null,r:null,p:""};if(r.settings.get("malTags")){const e=R(n);if(e)if("{"===e[0])try{const t=JSON.parse(e);for(const e in o)t[e]&&(o[e]=t[e])}catch(e){i.error(e)}else o.u=e}else{let n=await r.storage.get(`tagSettings/${e}/${t}`);if(n){n=JSON.parse(n);for(const e in o)n[e]&&(o[e]=n[e])}}const a=await I(e,t);a&&(o.c=a);const s=await N(e,t);return s&&(o.r=s),r.settings.get("usedPage")||(o.u=null),o}function U(e){return-1!==e.indexOf("questionmark")?r.storage.assetUrl("questionmark.gif"):e}function P(e,t="",n="top"){const o=Math.floor(1e3*Math.random()+1);return`<div id="tt${o}" class="icon material-icons" style="font-size:16px; line-height: 0; color: #7f7f7f; padding-bottom: 20px; padding-left: 3px; ${t}">contact_support</div>  <div class="mdl-tooltip mdl-tooltip--${n} mdl-tooltip--large" for="tt${o}">${e}</div>`}function F(e){let t="";e/=1e3;const n=Math.floor(e/31536e3);e-=31536e3*n,n&&(t+=`${n}y `);const o=Math.floor(e/86400);e-=86400*o,o&&(t+=`${o}d `);const r=Math.floor(e/3600)%24;e-=3600*r,r&&o<2&&(t+=`${r}h `);const i=Math.floor(e/60)%60;return e-=60*i,i&&!o&&r<3&&(t+=`${i}min `),t}function H(){return"undefined"!=typeof browser&&void 0!==browser.tabs.hide}function z(e,t,n){const o={anime:{1:{class:"watching",text:"CW",title:r.storage.lang(`UI_Status_watching_${t}`)},2:{class:"completed",text:"CMPL",title:r.storage.lang("UI_Status_Completed")},3:{class:"on-hold",text:"HOLD",title:r.storage.lang("UI_Status_OnHold")},4:{class:"dropped",text:"DROP",title:r.storage.lang("UI_Status_Dropped")},6:{class:"plantowatch",text:"PTW",title:r.storage.lang(`UI_Status_planTo_${t}`)},23:{class:"rewatching",text:"RE",title:r.storage.lang(`UI_Status_Rewatching_${t}`)}},manga:{1:{class:"reading",text:"CR",title:r.storage.lang(`UI_Status_watching_${t}`)},2:{class:"completed",text:"CMPL",title:r.storage.lang("UI_Status_Completed")},3:{class:"on-hold",text:"HOLD",title:r.storage.lang("UI_Status_OnHold")},4:{class:"dropped",text:"DROP",title:r.storage.lang("UI_Status_Dropped")},6:{class:"plantoread",text:"PTR",title:r.storage.lang(`UI_Status_planTo_${t}`)},23:{class:"rewatching",text:"RE",title:r.storage.lang(`UI_Status_Rewatching_${t}`)}}};if($.each([1,2,3,4,6,23],(function(e,t){o.anime[o.anime[t].title]=o.anime[t],o.manga[o.manga[t].title]=o.manga[t]})),e&&o[t][e]){const r=o[t][e];return` <a href="https://myanimelist.net/ownlist/${t}/${n}/edit?hideLayout=1" title="${r.title}" class="Lightbox_AddEdit button_edit ${r.class}">${r.text}</a>`}return!1}function B(e,t){switch(t){case 1:return r.storage.lang(`UI_Status_watching_${e}`);case 2:return r.storage.lang("UI_Status_Completed");case 3:return r.storage.lang("UI_Status_OnHold");case 4:return r.storage.lang("UI_Status_Dropped");case 6:return r.storage.lang(`UI_Status_planTo_${e}`);case 7:return r.storage.lang("UI_Status_All");case 23:return r.storage.lang(`UI_Status_Rewatching_${e}`);default:return""}}function W(e,t,n,o=""){const a={type:"basic",title:t,message:n,iconUrl:o};i.log("Notification",e,a),r.storage.get("notificationHistory").then((t=>{void 0===t&&(t=[]),"object"==typeof t&&(t.length>=10&&t.shift(),t.push({url:e,title:a.title,message:a.message,iconUrl:a.iconUrl,timestamp:Date.now()}),r.storage.set("notificationHistory",t))}));try{return chrome.notifications.create(e,a)}catch(e){i.error(e)}}async function j(e,t,n){const o=await r.storage.get(e);if("object"==typeof o&&(new Date).getTime()<o.timestamp)return o.data;const i=await t();return r.storage.set(e,{data:i,timestamp:(new Date).getTime()+n}).then((()=>i))}function G(e,t){o.$("#flash-div-top").length||function(){r.storage.addStyle('.flashinfo{\n                    transition: max-height 2s, opacity 2s 2s;\n                 }\n                 .mini-stealth .flashinfo{\n                    opacity: 0;\n                 }\n                  #flashinfo-div.hover.mini-stealth .flashinfo.type-update{\n                    opacity: 0.7;\n                 }\n                 #flashinfo-div.hover .flashinfo{\n                    opacity: 1;\n                 }\n                 .flashinfo:hover{\n                    max-height:5000px !important;\n                    z-index: 2147483647;\n                    opacity: 1;\n                    transition: max-height 2s;\n                 }\n                 .flashinfo .synopsis{\n                    transition: max-height 2s, max-width 2s ease 2s;\n                 }\n                 .flashinfo:hover .synopsis{\n                    max-height:9999px !important;\n                    max-width: 500px !important;\n                    transition: max-height 2s;\n                 }\n                 #flashinfo-div{\n                  z-index: 2;\n                  transition: 2s;\n                 }\n                 #flashinfo-div:hover, #flashinfo-div.hover{\n                  z-index: 2147483647;\n                 }\n                 #flashinfo-div.player-error {\n                   z-index: 2147483647;\n                 }\n                 #flashinfo-div.player-error .type-update{\n                  overflow: visible !important;\n                  opacity: 1 !important;\n                 }\n                 #flashinfo-div.player-error .player-error{\n                  display: block !important\n                 }\n                 #flashinfo-div.player-error-missing-permissions .player-error-missing-permissions{\n                  display: block !important\n                 }\n                 #flashinfo-div.player-error-missing-permissions .player-error-default{\n                  display: none !important\n                 }\n\n                 #flash-div-top, #flash-div-bottom, #flashinfo-div{\n                    font-family: "Helvetica","Arial",sans-serif;\n                    color: white;\n                    font-size: 14px;\n                    font-weight: 400;\n                    line-height: 17px;\n                 }\n                 #flash-div-top h2, #flash-div-bottom h2, #flashinfo-div h2{\n                    font-family: "Helvetica","Arial",sans-serif;\n                    color: white;\n                    font-size: 14px;\n                    font-weight: 700;\n                    line-height: 17px;\n                    padding: 0;\n                    margin: 0;\n                 }\n                 #flash-div-top a, #flash-div-bottom a, #flashinfo-div a{\n                    color: #DF6300;\n                 }');let e="";r.settings.get("floatButtonStealth")&&(e="mini-stealth"),o.$("body").after(o.html(`<div id="flash-div-top" dir="${r.storage.langDirection()}" style="text-align: center;pointer-events: none;position: fixed;top:-5px;width:100%;z-index: 2147483647;left: 0;"></div>        <div id="flash-div-bottom" dir="${r.storage.langDirection()}" style="text-align: center;pointer-events: none;position: fixed;bottom:0px;width:100%;z-index: 2147483647;left: 0;"><div id="flash" style="display:none;  background-color: red;padding: 20px; margin: 0 auto;max-width: 60%;          -webkit-border-radius: 20px;-moz-border-radius: 20px;border-radius: 20px;background:rgba(227,0,0,0.6);"></div></div>        <div id="flashinfo-div" dir="${r.storage.langDirection()}" class="${e}" style="text-align: center;pointer-events: none;position: fixed;bottom:0px;width:100%;left: 0;">`))}(),i.log("[Flash] Message:",e);let n="#323232";void 0!==t&&void 0!==t.error&&t.error&&(n="#3e0808");let a="#flash-div-bottom";void 0!==t&&void 0!==t.position&&t.position&&(a=`#flash-div-${t.position}`);let s="flash";if(void 0!==t&&void 0!==t.type&&t.type){const e=`type-${t.type}`;o.$(`${a} .${e}, #flashinfo-div .${e}`).removeClass(e).fadeOut({duration:1e3,queue:!1,complete(){o.$(this).remove()}}),s+=` ${e}`}let l,c=`<div class="${s}" style="display:none;">        <div style="display:table; pointer-events: all; padding: 14px 24px 14px 24px; margin: 0 auto; margin-top: 5px; max-width: 60%; -webkit-border-radius: 20px;-moz-border-radius: 20px;border-radius: 2px;color: white;background:${n}; ">          ${e}        </div>      </div>`;return void 0!==t&&void 0!==t.hoverInfo&&t.hoverInfo?(s+=" flashinfo",c=`<div class="${s}" style="display:none; max-height: 5000px; overflow: hidden;"><div style="display:table; pointer-events: all; margin: 0 auto; margin-top: -2px; max-width: 60%; -webkit-border-radius: 20px;-moz-border-radius: 20px;border-radius: 2px;color: white;background:${n}; position: relative;"><div style="max-height: 60vh; overflow-y: auto; padding: 14px 24px 14px 24px;">${e}</div></div></div>`,o.$("#flashinfo-div").addClass("hover"),l=o.$(o.html(c)).appendTo("#flashinfo-div"),void 0!==t&&void 0!==t.minimized&&t.minimized&&l.css("max-height","8px")):l=o.$(o.html(c)).appendTo(a),void 0!==t&&void 0!==t.permanent&&t.permanent?l.slideDown(800):void 0!==t&&void 0!==t.hoverInfo&&t.hoverInfo?l.slideDown(800).delay(4e3).queue((function(){o.$("#flashinfo-div").removeClass("hover"),l.css("max-height","8px")})):l.slideDown(800).delay(4e3).slideUp(800,(()=>{o.$(this).remove()})),l}async function Y(e,t,n=(()=>{}),i=(()=>{}),a=!1){return new Promise((function(s,l){let c=r.storage.lang("Ok"),u=r.storage.lang("Cancel");a&&(c=r.storage.lang("Yes"),u=r.storage.lang("No"));const d=G(e=`<div style="text-align: center;">${e}</div><div style="display: flex; justify-content: space-around;"><button class="Yes" style="background-color: transparent; border: none; color: rgb(255,64,129);margin-top: 10px; cursor:pointer;">${c}</button><button class="Cancel" style="background-color: transparent; border: none; color: rgb(255,64,129);margin-top: 10px; cursor:pointer;">${u}</button></div>`,{permanent:!0,position:"top",type:t});d.find(".Yes").click((function(e){s(!0),o.$(e.target).parentsUntil(".flash").fadeOut(300,(function(){o.$(this).remove()})),n()})),d.find(".Cancel").click((function(e){s(!1),o.$(e.target).parentsUntil(".flash").fadeOut(300,(function(){o.$(this).remove()})),i()}))}))}let q=!1,V=[];function K(e,t=".mdl-layout__content"){function n(e,t){if(!o.$(e).is(":visible"))return!1;if(o.$(e).hasClass("lazyBack"))o.$(e).css("background-image",`url(${e.getAttribute("data-src")})`).removeClass("lazyBack");else{const n=new Image,o=e.getAttribute("data-src");n.onload=function(){e.parent?e.parent.replaceChild(n,e):e.src=o,t&&t()},n.src=o}}for(let e=0;e<V.length;e++)$(V[e]).addClass("init");V=[];const r=e.find("img.lazy.init, .lazyBack.init"),i=function(){for(let e=0;e<V.length;e++)a.elementInViewport(V[e],600)&&n(V[e],(function(){V.splice(e,e)})),$(V[e]).length||V.splice(e,e)};for(let e=0;e<r.length;e++)V.push(r[e]),$(r[e]).removeClass("init");i(),q||(q=!0,e.find(t).scroll((function(){i()})))}function X(e,t=0){const n=e.getBoundingClientRect();return n.top>=0&&n.left>=0&&n.top-t<=(window.innerHeight||document.documentElement.clientHeight)}function J(e){return new Promise((t=>{setTimeout(t,e)}))}function Z(e,t,n){switch(e){case"mal":return`https://myanimelist.net/${t}/${n}`;case"anilist":return`https://anilist.co/${t}/${n}`;case"kitsu":return`https://kitsu.app/${t}/${n}`;case"simkl":return`https://simkl.com/${t}/${n}`;default:throw`${e} not a valid page`}}function Q(e=0){const t=new Date;t.setDate(t.getDate()+e);const n=t.getMonth()<9?`0${t.getMonth()+1}`:t.getMonth()+1,o=t.getDate()<10?`0${t.getDate()}`:t.getDate();return`${t.getFullYear()}-${n}-${o}`}function ee(e){return $("<textarea/>").html(o.html(e)).text()}function te(){return Boolean("undefined"!=typeof browser&&"undefined"!=typeof chrome)}function ne(){const e=()=>Boolean(!document.visibilityState||"visible"===document.visibilityState);if(e())return Promise.resolve();i.log("Page in background");const{asyncWaitUntilTrue:t}=E((()=>e()));return t().then((()=>{i.log("Page is visible")}))}async function oe(){const e=await r.storage.list();let t=0;o.$.each(e,(function(e,n){a.syncRegex.test(String(e))||/(^tagSettings\/.*)/.test(String(e))||(r.storage.remove(String(e)),t++)})),a.flashm(`Cache Cleared [${t}]`)}function re(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}function ie(e,t){const n=new URL(e),{host:o}=n;return o===t||o.endsWith(`.${t}`)}function ae(e){return!e||e.length<2?e:e.charAt(0).toUpperCase()+e.slice(1)}},7263:(e,t,n)=>{"use strict";n.r(t),n.d(t,{$:()=>r,html:()=>i});var o=n(42838);const r=jQuery;function i(e){return o.sanitize(e,{SAFE_FOR_JQUERY:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ADD_ATTR:["target"]})}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=n(78584),t=n(13647),o=n(7263);let r;const i=e.m("Player");let a="";function s(n,o){const r=o.currentSrc;n.current>1&&a!==r&&(a=r,i.log("New player detected",o.currentSrc),async function(n){if(await t.settings.getAsync("autofull"))if(window.fullScreen||window.innerWidth===window.screen.width&&window.innerHeight===window.screen.height)e.info("Browser already in fullscreen");else{let o=n;const r=["player","vstr","vplayer","mgvideo","myVideo","b-video-wrapper","vilos"],i=["AT-player","plyr","AkiraPlayer","video-js"];let a=!1;for(const s in r){const l=document.getElementById(r[s]);if(null!==l){a=!0,o=l;break}}for(const c in i){const u=document.getElementsByClassName(i[c]).item(0);if(null!==u){a=!0,o=u;break}}if(!a){const d=o.offsetHeight,f=o.offsetWidth;for(;o.parentElement&&d===o.parentElement.offsetHeight&&f===o.parentElement.offsetWidth;)o=o.parentElement,a=!0}if(!a&&!n.getAttribute("controls")){function p(){(document.webkitIsFullScreen||document.mozFullScreen||null!==document.msFullscreenElement)&&n.removeAttribute("controls","controls")}document.addEventListener&&(document.addEventListener("fullscreenchange",p,!1),document.addEventListener("mozfullscreenchange",p,!1),document.addEventListener("MSFullscreenChange",p,!1),document.addEventListener("webkitfullscreenchange",p,!1)),n.setAttribute("controls","controls")}o.requestFullscreen?o.requestFullscreen():o.msRequestFullscreen?o.msRequestFullscreen():o.mozRequestFullScreen?o.mozRequestFullScreen():o.webkitRequestFullscreen&&o.webkitRequestFullscreen()}}(o))}let l,c=!1;const u=["introSkipFwd","introSkipBwd","nextEpShort","correctionShort","syncShort"];var d=n(78584),f=n(13647);let p;var m;async function h(e){if(void 0===p)return void d.error("[Iframe] No player Found");let t=parseInt(await f.settings.getAsync("introSkip"));e||(t=0-t);const n=p.currentTime+t;p.duration&&p.duration>15&&n>p.duration-3?p.currentTime=p.duration-3:p.currentTime=n}m=function(e,t){chrome.runtime.sendMessage({name:"videoTime",item:e}),p=t},clearInterval(r),r=setInterval((function(){const e=document.getElementsByTagName("video");for(let t=0;t<e.length;t++){const n=e[t],{duration:o}=n,r=n.currentTime,{paused:a}=n;if(o&&o>60){const e={current:r,duration:o,paused:a};i.debug(window.location.href,e),m(e,n),s(e,n);break}}}),1e3),chrome.runtime.onMessage.addListener((function(e,n,r){if("videoTimeSet"===e.action){if(d.log("[Iframe] Set Time",e),void 0===p)return void d.error("[Iframe] No player Found");if(void 0!==e.time)return p.play(),void(p.currentTime=e.time);void 0!==e.timeAdd&&(p.play(),h(e.timeAdd))}else"content"===e.action&&"fullscreenNotification"===e.item.action&&function(e){if(t.settings.get("floatButtonStealth"))return;const n=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;if(n){const t=o.$(o.html(`\n        <div style="\n          all: initial;\n          position: absolute;\n          bottom: 0;\n          left: 0;\n          right: 0;\n          color: white;\n          display: none;\n          z-index: 20000;\n        ">\n          <div style="\n            background: rgba(50, 50, 50, 0.6);\n            color: white;\n            padding: 10px 15px 10px;\n            margin-left: auto;\n            margin-right: auto;\n            max-width: 60%;\n            display: table;\n            font-family: Helvetica,Arial,sans-serif;\n            text-align: center;\n          ">${e}</div>\n        </div>\n        `)).appendTo(o.$(n));t.slideDown(400).delay(2e3).slideUp(400,(()=>{t.remove()}))}}(e.item.text)})),f.settings.init().then((()=>{!function(n){l=n,c||function(){c=!0;let o={};function r(t){const r=(t=t||event).which||t.keyCode;o[r]="keydown"===t.type;for(let n=0;n<u.length;n++){const o=u[n];i(o)&&(t.target instanceof Node&&(/textarea|input|select/i.test(t.target.nodeName)||t.target instanceof Element&&t.target.shadowRoot)?e.info("Input field. Shortcut suppressed."):a(o))}function a(e){return o={},n({shortcut:e}),!1}}function i(e){const n=t.settings.get(e);if(!n.length)return!1;let r=!0;return n.forEach((function(e){o[e]||(r=!1)})),r&&Object.values(o).filter((e=>e)).length!==n.length&&(r=!1),r}document.addEventListener("keydown",r),document.addEventListener("keyup",r),window.addEventListener("focus",(function(){o={}}),!1)}()}((e=>{switch(d.log("[iframe] Shortcut",e),e.shortcut){case"introSkipFwd":h(!0);break;case"introSkipBwd":h(!1);break;case"nextEpShort":chrome.runtime.sendMessage({name:"content",item:{action:"nextEpShort"}});break;case"correctionShort":chrome.runtime.sendMessage({name:"content",item:{action:"correctionShort"}});break;case"syncShort":chrome.runtime.sendMessage({name:"content",item:{action:"syncShort"}})}}))})),console.log("%cIframe","font-size: 20px; padding-bottom: 3px; color: white; text-shadow: -1px -1px #2e51a2, 1px -1px #2e51a2, -1px 1px #2e51a2, 1px 1px #2e51a2, 2px 2px #2e51a2, 3px 3px #2e51a2;",window.location.host)})()})();
//# sourceMappingURL=iframe.js.map