{"version":3,"file":"content/kitsu-script.js","mappings":"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","sources":["webpack://MALSync/./node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js","webpack://MALSync/./node_modules/@vue/shared/dist/shared.esm-bundler.js","webpack://MALSync/./src/kitsu/style.less","webpack://MALSync/./node_modules/css-loader/dist/runtime/api.js","webpack://MALSync/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://MALSync/./node_modules/dompurify/dist/purify.js","webpack://MALSync/./node_modules/eventemitter2/lib/eventemitter2.js","webpack://MALSync/./src/kitsu/style.less?e72b","webpack://MALSync/./src/api/storage/webextension.ts","webpack://MALSync/./src/api/request/requestWebextension.ts","webpack://MALSync/./src/api/settings.ts","webpack://MALSync/./src/api/webextension.ts","webpack://MALSync/./src/utils/console.ts","webpack://MALSync/./src/utils/general.ts","webpack://MALSync/./src/utils/j.ts","webpack://MALSync/webpack/bootstrap","webpack://MALSync/webpack/runtime/compat get default export","webpack://MALSync/webpack/runtime/define property getters","webpack://MALSync/webpack/runtime/global","webpack://MALSync/webpack/runtime/hasOwnProperty shorthand","webpack://MALSync/webpack/runtime/make namespace object","webpack://MALSync/./src/_provider/definitions.ts","webpack://MALSync/./src/utils/localStore.ts","webpack://MALSync/./src/utils/Cache.ts","webpack://MALSync/./src/background/releaseProgressUtils.ts","webpack://MALSync/./src/utils/time.ts","webpack://MALSync/./src/utils/progress.ts","webpack://MALSync/./src/utils/emitter.ts","webpack://MALSync/./src/utils/errors.ts","webpack://MALSync/./src/_provider/Errors.ts","webpack://MALSync/./src/_provider/ScoreMode/point10.ts","webpack://MALSync/./src/_provider/singleAbstract.ts","webpack://MALSync/./src/_provider/Kitsu/helper.ts","webpack://MALSync/./src/_provider/ScoreMode/point20decimal.ts","webpack://MALSync/./src/_provider/ScoreMode/smiley4.ts","webpack://MALSync/./src/_provider/ScoreMode/point10decimal.ts","webpack://MALSync/./src/_provider/Kitsu/single.ts","webpack://MALSync/./src/_provider/listAbstract.ts","webpack://MALSync/./src/_provider/Kitsu/list.ts","webpack://MALSync/./src/utils/quicklinksBuilder.ts","webpack://MALSync/./src/kitsu/kitsuClass.ts","webpack://MALSync/./src/utils/firebaseNotification.ts","webpack://MALSync/./src/index-webextension/kitsu.ts"],"sourcesContent":["/**\n* @vue/reactivity v3.4.30\n* (c) 2018-present Yuxi (Evan) You and Vue contributors\n* @license MIT\n**/\nimport { NOOP, extend, isArray, isSymbol, isMap, isIntegerKey, hasOwn, hasChanged, isObject, makeMap, capitalize, toRawType, def, isFunction } from '@vue/shared';\n\nfunction warn(msg, ...args) {\n  console.warn(`[Vue warn] ${msg}`, ...args);\n}\n\nlet activeEffectScope;\nclass EffectScope {\n  constructor(detached = false) {\n    this.detached = detached;\n    /**\n     * @internal\n     */\n    this._active = true;\n    /**\n     * @internal\n     */\n    this.effects = [];\n    /**\n     * @internal\n     */\n    this.cleanups = [];\n    this.parent = activeEffectScope;\n    if (!detached && activeEffectScope) {\n      this.index = (activeEffectScope.scopes || (activeEffectScope.scopes = [])).push(\n        this\n      ) - 1;\n    }\n  }\n  get active() {\n    return this._active;\n  }\n  run(fn) {\n    if (this._active) {\n      const currentEffectScope = activeEffectScope;\n      try {\n        activeEffectScope = this;\n        return fn();\n      } finally {\n        activeEffectScope = currentEffectScope;\n      }\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(`cannot run an inactive effect scope.`);\n    }\n  }\n  /**\n   * This should only be called on non-detached scopes\n   * @internal\n   */\n  on() {\n    activeEffectScope = this;\n  }\n  /**\n   * This should only be called on non-detached scopes\n   * @internal\n   */\n  off() {\n    activeEffectScope = this.parent;\n  }\n  stop(fromParent) {\n    if (this._active) {\n      let i, l;\n      for (i = 0, l = this.effects.length; i < l; i++) {\n        this.effects[i].stop();\n      }\n      for (i = 0, l = this.cleanups.length; i < l; i++) {\n        this.cleanups[i]();\n      }\n      if (this.scopes) {\n        for (i = 0, l = this.scopes.length; i < l; i++) {\n          this.scopes[i].stop(true);\n        }\n      }\n      if (!this.detached && this.parent && !fromParent) {\n        const last = this.parent.scopes.pop();\n        if (last && last !== this) {\n          this.parent.scopes[this.index] = last;\n          last.index = this.index;\n        }\n      }\n      this.parent = void 0;\n      this._active = false;\n    }\n  }\n}\nfunction effectScope(detached) {\n  return new EffectScope(detached);\n}\nfunction recordEffectScope(effect, scope = activeEffectScope) {\n  if (scope && scope.active) {\n    scope.effects.push(effect);\n  }\n}\nfunction getCurrentScope() {\n  return activeEffectScope;\n}\nfunction onScopeDispose(fn) {\n  if (activeEffectScope) {\n    activeEffectScope.cleanups.push(fn);\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    warn(\n      `onScopeDispose() is called when there is no active effect scope to be associated with.`\n    );\n  }\n}\n\nlet activeEffect;\nclass ReactiveEffect {\n  constructor(fn, trigger, scheduler, scope) {\n    this.fn = fn;\n    this.trigger = trigger;\n    this.scheduler = scheduler;\n    this.active = true;\n    this.deps = [];\n    /**\n     * @internal\n     */\n    this._dirtyLevel = 5;\n    /**\n     * @internal\n     */\n    this._trackId = 0;\n    /**\n     * @internal\n     */\n    this._runnings = 0;\n    /**\n     * @internal\n     */\n    this._shouldSchedule = false;\n    /**\n     * @internal\n     */\n    this._depsLength = 0;\n    recordEffectScope(this, scope);\n  }\n  get dirty() {\n    if (this._dirtyLevel === 2)\n      return false;\n    if (this._dirtyLevel === 3 || this._dirtyLevel === 4) {\n      this._dirtyLevel = 1;\n      pauseTracking();\n      for (let i = 0; i < this._depsLength; i++) {\n        const dep = this.deps[i];\n        if (dep.computed) {\n          if (dep.computed.effect._dirtyLevel === 2) {\n            resetTracking();\n            return true;\n          }\n          triggerComputed(dep.computed);\n          if (this._dirtyLevel >= 5) {\n            break;\n          }\n        }\n      }\n      if (this._dirtyLevel === 1) {\n        this._dirtyLevel = 0;\n      }\n      resetTracking();\n    }\n    return this._dirtyLevel >= 5;\n  }\n  set dirty(v) {\n    this._dirtyLevel = v ? 5 : 0;\n  }\n  run() {\n    this._dirtyLevel = 0;\n    if (!this.active) {\n      return this.fn();\n    }\n    let lastShouldTrack = shouldTrack;\n    let lastEffect = activeEffect;\n    try {\n      shouldTrack = true;\n      activeEffect = this;\n      this._runnings++;\n      preCleanupEffect(this);\n      return this.fn();\n    } finally {\n      postCleanupEffect(this);\n      this._runnings--;\n      activeEffect = lastEffect;\n      shouldTrack = lastShouldTrack;\n    }\n  }\n  stop() {\n    if (this.active) {\n      preCleanupEffect(this);\n      postCleanupEffect(this);\n      this.onStop && this.onStop();\n      this.active = false;\n    }\n  }\n}\nfunction triggerComputed(computed) {\n  return computed.value;\n}\nfunction preCleanupEffect(effect2) {\n  effect2._trackId++;\n  effect2._depsLength = 0;\n}\nfunction postCleanupEffect(effect2) {\n  if (effect2.deps.length > effect2._depsLength) {\n    for (let i = effect2._depsLength; i < effect2.deps.length; i++) {\n      cleanupDepEffect(effect2.deps[i], effect2);\n    }\n    effect2.deps.length = effect2._depsLength;\n  }\n}\nfunction cleanupDepEffect(dep, effect2) {\n  const trackId = dep.get(effect2);\n  if (trackId !== void 0 && effect2._trackId !== trackId) {\n    dep.delete(effect2);\n    if (dep.size === 0) {\n      dep.cleanup();\n    }\n  }\n}\nfunction effect(fn, options) {\n  if (fn.effect instanceof ReactiveEffect) {\n    fn = fn.effect.fn;\n  }\n  const _effect = new ReactiveEffect(fn, NOOP, () => {\n    if (_effect.dirty) {\n      _effect.run();\n    }\n  });\n  if (options) {\n    extend(_effect, options);\n    if (options.scope) recordEffectScope(_effect, options.scope);\n  }\n  if (!options || !options.lazy) {\n    _effect.run();\n  }\n  const runner = _effect.run.bind(_effect);\n  runner.effect = _effect;\n  return runner;\n}\nfunction stop(runner) {\n  runner.effect.stop();\n}\nlet shouldTrack = true;\nlet pauseScheduleStack = 0;\nconst trackStack = [];\nfunction pauseTracking() {\n  trackStack.push(shouldTrack);\n  shouldTrack = false;\n}\nfunction enableTracking() {\n  trackStack.push(shouldTrack);\n  shouldTrack = true;\n}\nfunction resetTracking() {\n  const last = trackStack.pop();\n  shouldTrack = last === void 0 ? true : last;\n}\nfunction pauseScheduling() {\n  pauseScheduleStack++;\n}\nfunction resetScheduling() {\n  pauseScheduleStack--;\n  while (!pauseScheduleStack && queueEffectSchedulers.length) {\n    queueEffectSchedulers.shift()();\n  }\n}\nfunction trackEffect(effect2, dep, debuggerEventExtraInfo) {\n  var _a;\n  if (dep.get(effect2) !== effect2._trackId) {\n    dep.set(effect2, effect2._trackId);\n    const oldDep = effect2.deps[effect2._depsLength];\n    if (oldDep !== dep) {\n      if (oldDep) {\n        cleanupDepEffect(oldDep, effect2);\n      }\n      effect2.deps[effect2._depsLength++] = dep;\n    } else {\n      effect2._depsLength++;\n    }\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      (_a = effect2.onTrack) == null ? void 0 : _a.call(effect2, extend({ effect: effect2 }, debuggerEventExtraInfo));\n    }\n  }\n}\nconst queueEffectSchedulers = [];\nfunction triggerEffects(dep, dirtyLevel, debuggerEventExtraInfo) {\n  var _a;\n  pauseScheduling();\n  for (const effect2 of dep.keys()) {\n    let tracking;\n    if (!dep.computed && effect2.computed) {\n      if (effect2._runnings > 0 && (tracking != null ? tracking : tracking = dep.get(effect2) === effect2._trackId)) {\n        effect2._dirtyLevel = 2;\n        continue;\n      }\n    }\n    if (effect2._dirtyLevel < dirtyLevel && (tracking != null ? tracking : tracking = dep.get(effect2) === effect2._trackId)) {\n      effect2._shouldSchedule || (effect2._shouldSchedule = effect2._dirtyLevel === 0);\n      if (effect2.computed && effect2._dirtyLevel === 2) {\n        effect2._shouldSchedule = true;\n      }\n      effect2._dirtyLevel = dirtyLevel;\n    }\n    if (effect2._shouldSchedule && (tracking != null ? tracking : tracking = dep.get(effect2) === effect2._trackId)) {\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        (_a = effect2.onTrigger) == null ? void 0 : _a.call(effect2, extend({ effect: effect2 }, debuggerEventExtraInfo));\n      }\n      effect2.trigger();\n      if ((!effect2._runnings || effect2.allowRecurse) && effect2._dirtyLevel !== 3) {\n        effect2._shouldSchedule = false;\n        if (effect2.scheduler) {\n          queueEffectSchedulers.push(effect2.scheduler);\n        }\n      }\n    }\n  }\n  resetScheduling();\n}\n\nconst createDep = (cleanup, computed) => {\n  const dep = /* @__PURE__ */ new Map();\n  dep.cleanup = cleanup;\n  dep.computed = computed;\n  return dep;\n};\n\nconst targetMap = /* @__PURE__ */ new WeakMap();\nconst ITERATE_KEY = Symbol(!!(process.env.NODE_ENV !== \"production\") ? \"iterate\" : \"\");\nconst MAP_KEY_ITERATE_KEY = Symbol(!!(process.env.NODE_ENV !== \"production\") ? \"Map key iterate\" : \"\");\nfunction track(target, type, key) {\n  if (shouldTrack && activeEffect) {\n    let depsMap = targetMap.get(target);\n    if (!depsMap) {\n      targetMap.set(target, depsMap = /* @__PURE__ */ new Map());\n    }\n    let dep = depsMap.get(key);\n    if (!dep) {\n      depsMap.set(key, dep = createDep(() => depsMap.delete(key)));\n    }\n    trackEffect(\n      activeEffect,\n      dep,\n      !!(process.env.NODE_ENV !== \"production\") ? {\n        target,\n        type,\n        key\n      } : void 0\n    );\n  }\n}\nfunction trigger(target, type, key, newValue, oldValue, oldTarget) {\n  const depsMap = targetMap.get(target);\n  if (!depsMap) {\n    return;\n  }\n  let deps = [];\n  if (type === \"clear\") {\n    deps = [...depsMap.values()];\n  } else if (key === \"length\" && isArray(target)) {\n    const newLength = Number(newValue);\n    depsMap.forEach((dep, key2) => {\n      if (key2 === \"length\" || !isSymbol(key2) && key2 >= newLength) {\n        deps.push(dep);\n      }\n    });\n  } else {\n    if (key !== void 0) {\n      deps.push(depsMap.get(key));\n    }\n    switch (type) {\n      case \"add\":\n        if (!isArray(target)) {\n          deps.push(depsMap.get(ITERATE_KEY));\n          if (isMap(target)) {\n            deps.push(depsMap.get(MAP_KEY_ITERATE_KEY));\n          }\n        } else if (isIntegerKey(key)) {\n          deps.push(depsMap.get(\"length\"));\n        }\n        break;\n      case \"delete\":\n        if (!isArray(target)) {\n          deps.push(depsMap.get(ITERATE_KEY));\n          if (isMap(target)) {\n            deps.push(depsMap.get(MAP_KEY_ITERATE_KEY));\n          }\n        }\n        break;\n      case \"set\":\n        if (isMap(target)) {\n          deps.push(depsMap.get(ITERATE_KEY));\n        }\n        break;\n    }\n  }\n  pauseScheduling();\n  for (const dep of deps) {\n    if (dep) {\n      triggerEffects(\n        dep,\n        5,\n        !!(process.env.NODE_ENV !== \"production\") ? {\n          target,\n          type,\n          key,\n          newValue,\n          oldValue,\n          oldTarget\n        } : void 0\n      );\n    }\n  }\n  resetScheduling();\n}\nfunction getDepFromReactive(object, key) {\n  const depsMap = targetMap.get(object);\n  return depsMap && depsMap.get(key);\n}\n\nconst isNonTrackableKeys = /* @__PURE__ */ makeMap(`__proto__,__v_isRef,__isVue`);\nconst builtInSymbols = new Set(\n  /* @__PURE__ */ Object.getOwnPropertyNames(Symbol).filter((key) => key !== \"arguments\" && key !== \"caller\").map((key) => Symbol[key]).filter(isSymbol)\n);\nconst arrayInstrumentations = /* @__PURE__ */ createArrayInstrumentations();\nfunction createArrayInstrumentations() {\n  const instrumentations = {};\n  [\"includes\", \"indexOf\", \"lastIndexOf\"].forEach((key) => {\n    instrumentations[key] = function(...args) {\n      const arr = toRaw(this);\n      for (let i = 0, l = this.length; i < l; i++) {\n        track(arr, \"get\", i + \"\");\n      }\n      const res = arr[key](...args);\n      if (res === -1 || res === false) {\n        return arr[key](...args.map(toRaw));\n      } else {\n        return res;\n      }\n    };\n  });\n  [\"push\", \"pop\", \"shift\", \"unshift\", \"splice\"].forEach((key) => {\n    instrumentations[key] = function(...args) {\n      pauseTracking();\n      pauseScheduling();\n      const res = toRaw(this)[key].apply(this, args);\n      resetScheduling();\n      resetTracking();\n      return res;\n    };\n  });\n  return instrumentations;\n}\nfunction hasOwnProperty(key) {\n  if (!isSymbol(key)) key = String(key);\n  const obj = toRaw(this);\n  track(obj, \"has\", key);\n  return obj.hasOwnProperty(key);\n}\nclass BaseReactiveHandler {\n  constructor(_isReadonly = false, _isShallow = false) {\n    this._isReadonly = _isReadonly;\n    this._isShallow = _isShallow;\n  }\n  get(target, key, receiver) {\n    const isReadonly2 = this._isReadonly, isShallow2 = this._isShallow;\n    if (key === \"__v_isReactive\") {\n      return !isReadonly2;\n    } else if (key === \"__v_isReadonly\") {\n      return isReadonly2;\n    } else if (key === \"__v_isShallow\") {\n      return isShallow2;\n    } else if (key === \"__v_raw\") {\n      if (receiver === (isReadonly2 ? isShallow2 ? shallowReadonlyMap : readonlyMap : isShallow2 ? shallowReactiveMap : reactiveMap).get(target) || // receiver is not the reactive proxy, but has the same prototype\n      // this means the reciever is a user proxy of the reactive proxy\n      Object.getPrototypeOf(target) === Object.getPrototypeOf(receiver)) {\n        return target;\n      }\n      return;\n    }\n    const targetIsArray = isArray(target);\n    if (!isReadonly2) {\n      if (targetIsArray && hasOwn(arrayInstrumentations, key)) {\n        return Reflect.get(arrayInstrumentations, key, receiver);\n      }\n      if (key === \"hasOwnProperty\") {\n        return hasOwnProperty;\n      }\n    }\n    const res = Reflect.get(target, key, receiver);\n    if (isSymbol(key) ? builtInSymbols.has(key) : isNonTrackableKeys(key)) {\n      return res;\n    }\n    if (!isReadonly2) {\n      track(target, \"get\", key);\n    }\n    if (isShallow2) {\n      return res;\n    }\n    if (isRef(res)) {\n      return targetIsArray && isIntegerKey(key) ? res : res.value;\n    }\n    if (isObject(res)) {\n      return isReadonly2 ? readonly(res) : reactive(res);\n    }\n    return res;\n  }\n}\nclass MutableReactiveHandler extends BaseReactiveHandler {\n  constructor(isShallow2 = false) {\n    super(false, isShallow2);\n  }\n  set(target, key, value, receiver) {\n    let oldValue = target[key];\n    if (!this._isShallow) {\n      const isOldValueReadonly = isReadonly(oldValue);\n      if (!isShallow(value) && !isReadonly(value)) {\n        oldValue = toRaw(oldValue);\n        value = toRaw(value);\n      }\n      if (!isArray(target) && isRef(oldValue) && !isRef(value)) {\n        if (isOldValueReadonly) {\n          return false;\n        } else {\n          oldValue.value = value;\n          return true;\n        }\n      }\n    }\n    const hadKey = isArray(target) && isIntegerKey(key) ? Number(key) < target.length : hasOwn(target, key);\n    const result = Reflect.set(target, key, value, receiver);\n    if (target === toRaw(receiver)) {\n      if (!hadKey) {\n        trigger(target, \"add\", key, value);\n      } else if (hasChanged(value, oldValue)) {\n        trigger(target, \"set\", key, value, oldValue);\n      }\n    }\n    return result;\n  }\n  deleteProperty(target, key) {\n    const hadKey = hasOwn(target, key);\n    const oldValue = target[key];\n    const result = Reflect.deleteProperty(target, key);\n    if (result && hadKey) {\n      trigger(target, \"delete\", key, void 0, oldValue);\n    }\n    return result;\n  }\n  has(target, key) {\n    const result = Reflect.has(target, key);\n    if (!isSymbol(key) || !builtInSymbols.has(key)) {\n      track(target, \"has\", key);\n    }\n    return result;\n  }\n  ownKeys(target) {\n    track(\n      target,\n      \"iterate\",\n      isArray(target) ? \"length\" : ITERATE_KEY\n    );\n    return Reflect.ownKeys(target);\n  }\n}\nclass ReadonlyReactiveHandler extends BaseReactiveHandler {\n  constructor(isShallow2 = false) {\n    super(true, isShallow2);\n  }\n  set(target, key) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\n        `Set operation on key \"${String(key)}\" failed: target is readonly.`,\n        target\n      );\n    }\n    return true;\n  }\n  deleteProperty(target, key) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\n        `Delete operation on key \"${String(key)}\" failed: target is readonly.`,\n        target\n      );\n    }\n    return true;\n  }\n}\nconst mutableHandlers = /* @__PURE__ */ new MutableReactiveHandler();\nconst readonlyHandlers = /* @__PURE__ */ new ReadonlyReactiveHandler();\nconst shallowReactiveHandlers = /* @__PURE__ */ new MutableReactiveHandler(\n  true\n);\nconst shallowReadonlyHandlers = /* @__PURE__ */ new ReadonlyReactiveHandler(true);\n\nconst toShallow = (value) => value;\nconst getProto = (v) => Reflect.getPrototypeOf(v);\nfunction get(target, key, isReadonly = false, isShallow = false) {\n  target = target[\"__v_raw\"];\n  const rawTarget = toRaw(target);\n  const rawKey = toRaw(key);\n  if (!isReadonly) {\n    if (hasChanged(key, rawKey)) {\n      track(rawTarget, \"get\", key);\n    }\n    track(rawTarget, \"get\", rawKey);\n  }\n  const { has: has2 } = getProto(rawTarget);\n  const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;\n  if (has2.call(rawTarget, key)) {\n    return wrap(target.get(key));\n  } else if (has2.call(rawTarget, rawKey)) {\n    return wrap(target.get(rawKey));\n  } else if (target !== rawTarget) {\n    target.get(key);\n  }\n}\nfunction has(key, isReadonly = false) {\n  const target = this[\"__v_raw\"];\n  const rawTarget = toRaw(target);\n  const rawKey = toRaw(key);\n  if (!isReadonly) {\n    if (hasChanged(key, rawKey)) {\n      track(rawTarget, \"has\", key);\n    }\n    track(rawTarget, \"has\", rawKey);\n  }\n  return key === rawKey ? target.has(key) : target.has(key) || target.has(rawKey);\n}\nfunction size(target, isReadonly = false) {\n  target = target[\"__v_raw\"];\n  !isReadonly && track(toRaw(target), \"iterate\", ITERATE_KEY);\n  return Reflect.get(target, \"size\", target);\n}\nfunction add(value) {\n  value = toRaw(value);\n  const target = toRaw(this);\n  const proto = getProto(target);\n  const hadKey = proto.has.call(target, value);\n  if (!hadKey) {\n    target.add(value);\n    trigger(target, \"add\", value, value);\n  }\n  return this;\n}\nfunction set(key, value) {\n  value = toRaw(value);\n  const target = toRaw(this);\n  const { has: has2, get: get2 } = getProto(target);\n  let hadKey = has2.call(target, key);\n  if (!hadKey) {\n    key = toRaw(key);\n    hadKey = has2.call(target, key);\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    checkIdentityKeys(target, has2, key);\n  }\n  const oldValue = get2.call(target, key);\n  target.set(key, value);\n  if (!hadKey) {\n    trigger(target, \"add\", key, value);\n  } else if (hasChanged(value, oldValue)) {\n    trigger(target, \"set\", key, value, oldValue);\n  }\n  return this;\n}\nfunction deleteEntry(key) {\n  const target = toRaw(this);\n  const { has: has2, get: get2 } = getProto(target);\n  let hadKey = has2.call(target, key);\n  if (!hadKey) {\n    key = toRaw(key);\n    hadKey = has2.call(target, key);\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    checkIdentityKeys(target, has2, key);\n  }\n  const oldValue = get2 ? get2.call(target, key) : void 0;\n  const result = target.delete(key);\n  if (hadKey) {\n    trigger(target, \"delete\", key, void 0, oldValue);\n  }\n  return result;\n}\nfunction clear() {\n  const target = toRaw(this);\n  const hadItems = target.size !== 0;\n  const oldTarget = !!(process.env.NODE_ENV !== \"production\") ? isMap(target) ? new Map(target) : new Set(target) : void 0;\n  const result = target.clear();\n  if (hadItems) {\n    trigger(target, \"clear\", void 0, void 0, oldTarget);\n  }\n  return result;\n}\nfunction createForEach(isReadonly, isShallow) {\n  return function forEach(callback, thisArg) {\n    const observed = this;\n    const target = observed[\"__v_raw\"];\n    const rawTarget = toRaw(target);\n    const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;\n    !isReadonly && track(rawTarget, \"iterate\", ITERATE_KEY);\n    return target.forEach((value, key) => {\n      return callback.call(thisArg, wrap(value), wrap(key), observed);\n    });\n  };\n}\nfunction createIterableMethod(method, isReadonly, isShallow) {\n  return function(...args) {\n    const target = this[\"__v_raw\"];\n    const rawTarget = toRaw(target);\n    const targetIsMap = isMap(rawTarget);\n    const isPair = method === \"entries\" || method === Symbol.iterator && targetIsMap;\n    const isKeyOnly = method === \"keys\" && targetIsMap;\n    const innerIterator = target[method](...args);\n    const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;\n    !isReadonly && track(\n      rawTarget,\n      \"iterate\",\n      isKeyOnly ? MAP_KEY_ITERATE_KEY : ITERATE_KEY\n    );\n    return {\n      // iterator protocol\n      next() {\n        const { value, done } = innerIterator.next();\n        return done ? { value, done } : {\n          value: isPair ? [wrap(value[0]), wrap(value[1])] : wrap(value),\n          done\n        };\n      },\n      // iterable protocol\n      [Symbol.iterator]() {\n        return this;\n      }\n    };\n  };\n}\nfunction createReadonlyMethod(type) {\n  return function(...args) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      const key = args[0] ? `on key \"${args[0]}\" ` : ``;\n      warn(\n        `${capitalize(type)} operation ${key}failed: target is readonly.`,\n        toRaw(this)\n      );\n    }\n    return type === \"delete\" ? false : type === \"clear\" ? void 0 : this;\n  };\n}\nfunction createInstrumentations() {\n  const mutableInstrumentations2 = {\n    get(key) {\n      return get(this, key);\n    },\n    get size() {\n      return size(this);\n    },\n    has,\n    add,\n    set,\n    delete: deleteEntry,\n    clear,\n    forEach: createForEach(false, false)\n  };\n  const shallowInstrumentations2 = {\n    get(key) {\n      return get(this, key, false, true);\n    },\n    get size() {\n      return size(this);\n    },\n    has,\n    add,\n    set,\n    delete: deleteEntry,\n    clear,\n    forEach: createForEach(false, true)\n  };\n  const readonlyInstrumentations2 = {\n    get(key) {\n      return get(this, key, true);\n    },\n    get size() {\n      return size(this, true);\n    },\n    has(key) {\n      return has.call(this, key, true);\n    },\n    add: createReadonlyMethod(\"add\"),\n    set: createReadonlyMethod(\"set\"),\n    delete: createReadonlyMethod(\"delete\"),\n    clear: createReadonlyMethod(\"clear\"),\n    forEach: createForEach(true, false)\n  };\n  const shallowReadonlyInstrumentations2 = {\n    get(key) {\n      return get(this, key, true, true);\n    },\n    get size() {\n      return size(this, true);\n    },\n    has(key) {\n      return has.call(this, key, true);\n    },\n    add: createReadonlyMethod(\"add\"),\n    set: createReadonlyMethod(\"set\"),\n    delete: createReadonlyMethod(\"delete\"),\n    clear: createReadonlyMethod(\"clear\"),\n    forEach: createForEach(true, true)\n  };\n  const iteratorMethods = [\n    \"keys\",\n    \"values\",\n    \"entries\",\n    Symbol.iterator\n  ];\n  iteratorMethods.forEach((method) => {\n    mutableInstrumentations2[method] = createIterableMethod(method, false, false);\n    readonlyInstrumentations2[method] = createIterableMethod(method, true, false);\n    shallowInstrumentations2[method] = createIterableMethod(method, false, true);\n    shallowReadonlyInstrumentations2[method] = createIterableMethod(\n      method,\n      true,\n      true\n    );\n  });\n  return [\n    mutableInstrumentations2,\n    readonlyInstrumentations2,\n    shallowInstrumentations2,\n    shallowReadonlyInstrumentations2\n  ];\n}\nconst [\n  mutableInstrumentations,\n  readonlyInstrumentations,\n  shallowInstrumentations,\n  shallowReadonlyInstrumentations\n] = /* @__PURE__ */ createInstrumentations();\nfunction createInstrumentationGetter(isReadonly, shallow) {\n  const instrumentations = shallow ? isReadonly ? shallowReadonlyInstrumentations : shallowInstrumentations : isReadonly ? readonlyInstrumentations : mutableInstrumentations;\n  return (target, key, receiver) => {\n    if (key === \"__v_isReactive\") {\n      return !isReadonly;\n    } else if (key === \"__v_isReadonly\") {\n      return isReadonly;\n    } else if (key === \"__v_raw\") {\n      return target;\n    }\n    return Reflect.get(\n      hasOwn(instrumentations, key) && key in target ? instrumentations : target,\n      key,\n      receiver\n    );\n  };\n}\nconst mutableCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(false, false)\n};\nconst shallowCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(false, true)\n};\nconst readonlyCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(true, false)\n};\nconst shallowReadonlyCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(true, true)\n};\nfunction checkIdentityKeys(target, has2, key) {\n  const rawKey = toRaw(key);\n  if (rawKey !== key && has2.call(target, rawKey)) {\n    const type = toRawType(target);\n    warn(\n      `Reactive ${type} contains both the raw and reactive versions of the same object${type === `Map` ? ` as keys` : ``}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`\n    );\n  }\n}\n\nconst reactiveMap = /* @__PURE__ */ new WeakMap();\nconst shallowReactiveMap = /* @__PURE__ */ new WeakMap();\nconst readonlyMap = /* @__PURE__ */ new WeakMap();\nconst shallowReadonlyMap = /* @__PURE__ */ new WeakMap();\nfunction targetTypeMap(rawType) {\n  switch (rawType) {\n    case \"Object\":\n    case \"Array\":\n      return 1 /* COMMON */;\n    case \"Map\":\n    case \"Set\":\n    case \"WeakMap\":\n    case \"WeakSet\":\n      return 2 /* COLLECTION */;\n    default:\n      return 0 /* INVALID */;\n  }\n}\nfunction getTargetType(value) {\n  return value[\"__v_skip\"] || !Object.isExtensible(value) ? 0 /* INVALID */ : targetTypeMap(toRawType(value));\n}\nfunction reactive(target) {\n  if (isReadonly(target)) {\n    return target;\n  }\n  return createReactiveObject(\n    target,\n    false,\n    mutableHandlers,\n    mutableCollectionHandlers,\n    reactiveMap\n  );\n}\nfunction shallowReactive(target) {\n  return createReactiveObject(\n    target,\n    false,\n    shallowReactiveHandlers,\n    shallowCollectionHandlers,\n    shallowReactiveMap\n  );\n}\nfunction readonly(target) {\n  return createReactiveObject(\n    target,\n    true,\n    readonlyHandlers,\n    readonlyCollectionHandlers,\n    readonlyMap\n  );\n}\nfunction shallowReadonly(target) {\n  return createReactiveObject(\n    target,\n    true,\n    shallowReadonlyHandlers,\n    shallowReadonlyCollectionHandlers,\n    shallowReadonlyMap\n  );\n}\nfunction createReactiveObject(target, isReadonly2, baseHandlers, collectionHandlers, proxyMap) {\n  if (!isObject(target)) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\n        `value cannot be made ${isReadonly2 ? \"readonly\" : \"reactive\"}: ${String(\n          target\n        )}`\n      );\n    }\n    return target;\n  }\n  if (target[\"__v_raw\"] && !(isReadonly2 && target[\"__v_isReactive\"])) {\n    return target;\n  }\n  const existingProxy = proxyMap.get(target);\n  if (existingProxy) {\n    return existingProxy;\n  }\n  const targetType = getTargetType(target);\n  if (targetType === 0 /* INVALID */) {\n    return target;\n  }\n  const proxy = new Proxy(\n    target,\n    targetType === 2 /* COLLECTION */ ? collectionHandlers : baseHandlers\n  );\n  proxyMap.set(target, proxy);\n  return proxy;\n}\nfunction isReactive(value) {\n  if (isReadonly(value)) {\n    return isReactive(value[\"__v_raw\"]);\n  }\n  return !!(value && value[\"__v_isReactive\"]);\n}\nfunction isReadonly(value) {\n  return !!(value && value[\"__v_isReadonly\"]);\n}\nfunction isShallow(value) {\n  return !!(value && value[\"__v_isShallow\"]);\n}\nfunction isProxy(value) {\n  return value ? !!value[\"__v_raw\"] : false;\n}\nfunction toRaw(observed) {\n  const raw = observed && observed[\"__v_raw\"];\n  return raw ? toRaw(raw) : observed;\n}\nfunction markRaw(value) {\n  if (Object.isExtensible(value)) {\n    def(value, \"__v_skip\", true);\n  }\n  return value;\n}\nconst toReactive = (value) => isObject(value) ? reactive(value) : value;\nconst toReadonly = (value) => isObject(value) ? readonly(value) : value;\n\nconst COMPUTED_SIDE_EFFECT_WARN = `Computed is still dirty after getter evaluation, likely because a computed is mutating its own dependency in its getter. State mutations in computed getters should be avoided.  Check the docs for more details: https://vuejs.org/guide/essentials/computed.html#getters-should-be-side-effect-free`;\nclass ComputedRefImpl {\n  constructor(getter, _setter, isReadonly, isSSR) {\n    this.getter = getter;\n    this._setter = _setter;\n    this.dep = void 0;\n    this.__v_isRef = true;\n    this[\"__v_isReadonly\"] = false;\n    this.effect = new ReactiveEffect(\n      () => getter(this._value),\n      () => triggerRefValue(\n        this,\n        this.effect._dirtyLevel === 3 ? 3 : 4\n      )\n    );\n    this.effect.computed = this;\n    this.effect.active = this._cacheable = !isSSR;\n    this[\"__v_isReadonly\"] = isReadonly;\n  }\n  get value() {\n    const self = toRaw(this);\n    const lastDirtyLevel = self.effect._dirtyLevel;\n    if ((!self._cacheable || self.effect.dirty) && hasChanged(self._value, self._value = self.effect.run())) {\n      if (lastDirtyLevel !== 3) {\n        triggerRefValue(self, 5);\n      }\n    }\n    trackRefValue(self);\n    if (self.effect._dirtyLevel >= 2) {\n      if (!!(process.env.NODE_ENV !== \"production\") && this._warnRecursive) {\n        warn(COMPUTED_SIDE_EFFECT_WARN, `\n\ngetter: `, this.getter);\n      }\n      triggerRefValue(self, 3);\n    }\n    return self._value;\n  }\n  set value(newValue) {\n    this._setter(newValue);\n  }\n  // #region polyfill _dirty for backward compatibility third party code for Vue <= 3.3.x\n  get _dirty() {\n    return this.effect.dirty;\n  }\n  set _dirty(v) {\n    this.effect.dirty = v;\n  }\n  // #endregion\n}\nfunction computed(getterOrOptions, debugOptions, isSSR = false) {\n  let getter;\n  let setter;\n  const onlyGetter = isFunction(getterOrOptions);\n  if (onlyGetter) {\n    getter = getterOrOptions;\n    setter = !!(process.env.NODE_ENV !== \"production\") ? () => {\n      warn(\"Write operation failed: computed value is readonly\");\n    } : NOOP;\n  } else {\n    getter = getterOrOptions.get;\n    setter = getterOrOptions.set;\n  }\n  const cRef = new ComputedRefImpl(getter, setter, onlyGetter || !setter, isSSR);\n  if (!!(process.env.NODE_ENV !== \"production\") && debugOptions && !isSSR) {\n    cRef.effect.onTrack = debugOptions.onTrack;\n    cRef.effect.onTrigger = debugOptions.onTrigger;\n  }\n  return cRef;\n}\n\nfunction trackRefValue(ref2) {\n  var _a;\n  if (shouldTrack && activeEffect) {\n    ref2 = toRaw(ref2);\n    trackEffect(\n      activeEffect,\n      (_a = ref2.dep) != null ? _a : ref2.dep = createDep(\n        () => ref2.dep = void 0,\n        ref2 instanceof ComputedRefImpl ? ref2 : void 0\n      ),\n      !!(process.env.NODE_ENV !== \"production\") ? {\n        target: ref2,\n        type: \"get\",\n        key: \"value\"\n      } : void 0\n    );\n  }\n}\nfunction triggerRefValue(ref2, dirtyLevel = 5, newVal, oldVal) {\n  ref2 = toRaw(ref2);\n  const dep = ref2.dep;\n  if (dep) {\n    triggerEffects(\n      dep,\n      dirtyLevel,\n      !!(process.env.NODE_ENV !== \"production\") ? {\n        target: ref2,\n        type: \"set\",\n        key: \"value\",\n        newValue: newVal,\n        oldValue: oldVal\n      } : void 0\n    );\n  }\n}\nfunction isRef(r) {\n  return !!(r && r.__v_isRef === true);\n}\nfunction ref(value) {\n  return createRef(value, false);\n}\nfunction shallowRef(value) {\n  return createRef(value, true);\n}\nfunction createRef(rawValue, shallow) {\n  if (isRef(rawValue)) {\n    return rawValue;\n  }\n  return new RefImpl(rawValue, shallow);\n}\nclass RefImpl {\n  constructor(value, __v_isShallow) {\n    this.__v_isShallow = __v_isShallow;\n    this.dep = void 0;\n    this.__v_isRef = true;\n    this._rawValue = __v_isShallow ? value : toRaw(value);\n    this._value = __v_isShallow ? value : toReactive(value);\n  }\n  get value() {\n    trackRefValue(this);\n    return this._value;\n  }\n  set value(newVal) {\n    const useDirectValue = this.__v_isShallow || isShallow(newVal) || isReadonly(newVal);\n    newVal = useDirectValue ? newVal : toRaw(newVal);\n    if (hasChanged(newVal, this._rawValue)) {\n      const oldVal = this._rawValue;\n      this._rawValue = newVal;\n      this._value = useDirectValue ? newVal : toReactive(newVal);\n      triggerRefValue(this, 5, newVal, oldVal);\n    }\n  }\n}\nfunction triggerRef(ref2) {\n  triggerRefValue(ref2, 5, !!(process.env.NODE_ENV !== \"production\") ? ref2.value : void 0);\n}\nfunction unref(ref2) {\n  return isRef(ref2) ? ref2.value : ref2;\n}\nfunction toValue(source) {\n  return isFunction(source) ? source() : unref(source);\n}\nconst shallowUnwrapHandlers = {\n  get: (target, key, receiver) => unref(Reflect.get(target, key, receiver)),\n  set: (target, key, value, receiver) => {\n    const oldValue = target[key];\n    if (isRef(oldValue) && !isRef(value)) {\n      oldValue.value = value;\n      return true;\n    } else {\n      return Reflect.set(target, key, value, receiver);\n    }\n  }\n};\nfunction proxyRefs(objectWithRefs) {\n  return isReactive(objectWithRefs) ? objectWithRefs : new Proxy(objectWithRefs, shallowUnwrapHandlers);\n}\nclass CustomRefImpl {\n  constructor(factory) {\n    this.dep = void 0;\n    this.__v_isRef = true;\n    const { get, set } = factory(\n      () => trackRefValue(this),\n      () => triggerRefValue(this)\n    );\n    this._get = get;\n    this._set = set;\n  }\n  get value() {\n    return this._get();\n  }\n  set value(newVal) {\n    this._set(newVal);\n  }\n}\nfunction customRef(factory) {\n  return new CustomRefImpl(factory);\n}\nfunction toRefs(object) {\n  if (!!(process.env.NODE_ENV !== \"production\") && !isProxy(object)) {\n    warn(`toRefs() expects a reactive object but received a plain one.`);\n  }\n  const ret = isArray(object) ? new Array(object.length) : {};\n  for (const key in object) {\n    ret[key] = propertyToRef(object, key);\n  }\n  return ret;\n}\nclass ObjectRefImpl {\n  constructor(_object, _key, _defaultValue) {\n    this._object = _object;\n    this._key = _key;\n    this._defaultValue = _defaultValue;\n    this.__v_isRef = true;\n  }\n  get value() {\n    const val = this._object[this._key];\n    return val === void 0 ? this._defaultValue : val;\n  }\n  set value(newVal) {\n    this._object[this._key] = newVal;\n  }\n  get dep() {\n    return getDepFromReactive(toRaw(this._object), this._key);\n  }\n}\nclass GetterRefImpl {\n  constructor(_getter) {\n    this._getter = _getter;\n    this.__v_isRef = true;\n    this.__v_isReadonly = true;\n  }\n  get value() {\n    return this._getter();\n  }\n}\nfunction toRef(source, key, defaultValue) {\n  if (isRef(source)) {\n    return source;\n  } else if (isFunction(source)) {\n    return new GetterRefImpl(source);\n  } else if (isObject(source) && arguments.length > 1) {\n    return propertyToRef(source, key, defaultValue);\n  } else {\n    return ref(source);\n  }\n}\nfunction propertyToRef(source, key, defaultValue) {\n  const val = source[key];\n  return isRef(val) ? val : new ObjectRefImpl(source, key, defaultValue);\n}\n\nconst deferredComputed = computed;\n\nconst TrackOpTypes = {\n  \"GET\": \"get\",\n  \"HAS\": \"has\",\n  \"ITERATE\": \"iterate\"\n};\nconst TriggerOpTypes = {\n  \"SET\": \"set\",\n  \"ADD\": \"add\",\n  \"DELETE\": \"delete\",\n  \"CLEAR\": \"clear\"\n};\nconst ReactiveFlags = {\n  \"SKIP\": \"__v_skip\",\n  \"IS_REACTIVE\": \"__v_isReactive\",\n  \"IS_READONLY\": \"__v_isReadonly\",\n  \"IS_SHALLOW\": \"__v_isShallow\",\n  \"RAW\": \"__v_raw\"\n};\n\nexport { EffectScope, ITERATE_KEY, ReactiveEffect, ReactiveFlags, TrackOpTypes, TriggerOpTypes, computed, customRef, deferredComputed, effect, effectScope, enableTracking, getCurrentScope, isProxy, isReactive, isReadonly, isRef, isShallow, markRaw, onScopeDispose, pauseScheduling, pauseTracking, proxyRefs, reactive, readonly, ref, resetScheduling, resetTracking, shallowReactive, shallowReadonly, shallowRef, stop, toRaw, toRef, toRefs, toValue, track, trigger, triggerRef, unref };\n","/**\n* @vue/shared v3.4.30\n* (c) 2018-present Yuxi (Evan) You and Vue contributors\n* @license MIT\n**/\n/*! #__NO_SIDE_EFFECTS__ */\n// @__NO_SIDE_EFFECTS__\nfunction makeMap(str, expectsLowerCase) {\n  const set = new Set(str.split(\",\"));\n  return expectsLowerCase ? (val) => set.has(val.toLowerCase()) : (val) => set.has(val);\n}\n\nconst EMPTY_OBJ = !!(process.env.NODE_ENV !== \"production\") ? Object.freeze({}) : {};\nconst EMPTY_ARR = !!(process.env.NODE_ENV !== \"production\") ? Object.freeze([]) : [];\nconst NOOP = () => {\n};\nconst NO = () => false;\nconst isOn = (key) => key.charCodeAt(0) === 111 && key.charCodeAt(1) === 110 && // uppercase letter\n(key.charCodeAt(2) > 122 || key.charCodeAt(2) < 97);\nconst isModelListener = (key) => key.startsWith(\"onUpdate:\");\nconst extend = Object.assign;\nconst remove = (arr, el) => {\n  const i = arr.indexOf(el);\n  if (i > -1) {\n    arr.splice(i, 1);\n  }\n};\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nconst hasOwn = (val, key) => hasOwnProperty.call(val, key);\nconst isArray = Array.isArray;\nconst isMap = (val) => toTypeString(val) === \"[object Map]\";\nconst isSet = (val) => toTypeString(val) === \"[object Set]\";\nconst isDate = (val) => toTypeString(val) === \"[object Date]\";\nconst isRegExp = (val) => toTypeString(val) === \"[object RegExp]\";\nconst isFunction = (val) => typeof val === \"function\";\nconst isString = (val) => typeof val === \"string\";\nconst isSymbol = (val) => typeof val === \"symbol\";\nconst isObject = (val) => val !== null && typeof val === \"object\";\nconst isPromise = (val) => {\n  return (isObject(val) || isFunction(val)) && isFunction(val.then) && isFunction(val.catch);\n};\nconst objectToString = Object.prototype.toString;\nconst toTypeString = (value) => objectToString.call(value);\nconst toRawType = (value) => {\n  return toTypeString(value).slice(8, -1);\n};\nconst isPlainObject = (val) => toTypeString(val) === \"[object Object]\";\nconst isIntegerKey = (key) => isString(key) && key !== \"NaN\" && key[0] !== \"-\" && \"\" + parseInt(key, 10) === key;\nconst isReservedProp = /* @__PURE__ */ makeMap(\n  // the leading comma is intentional so empty string \"\" is also included\n  \",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted\"\n);\nconst isBuiltInDirective = /* @__PURE__ */ makeMap(\n  \"bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo\"\n);\nconst cacheStringFunction = (fn) => {\n  const cache = /* @__PURE__ */ Object.create(null);\n  return (str) => {\n    const hit = cache[str];\n    return hit || (cache[str] = fn(str));\n  };\n};\nconst camelizeRE = /-(\\w)/g;\nconst camelize = cacheStringFunction((str) => {\n  return str.replace(camelizeRE, (_, c) => c ? c.toUpperCase() : \"\");\n});\nconst hyphenateRE = /\\B([A-Z])/g;\nconst hyphenate = cacheStringFunction(\n  (str) => str.replace(hyphenateRE, \"-$1\").toLowerCase()\n);\nconst capitalize = cacheStringFunction((str) => {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n});\nconst toHandlerKey = cacheStringFunction((str) => {\n  const s = str ? `on${capitalize(str)}` : ``;\n  return s;\n});\nconst hasChanged = (value, oldValue) => !Object.is(value, oldValue);\nconst invokeArrayFns = (fns, ...arg) => {\n  for (let i = 0; i < fns.length; i++) {\n    fns[i](...arg);\n  }\n};\nconst def = (obj, key, value, writable = false) => {\n  Object.defineProperty(obj, key, {\n    configurable: true,\n    enumerable: false,\n    writable,\n    value\n  });\n};\nconst looseToNumber = (val) => {\n  const n = parseFloat(val);\n  return isNaN(n) ? val : n;\n};\nconst toNumber = (val) => {\n  const n = isString(val) ? Number(val) : NaN;\n  return isNaN(n) ? val : n;\n};\nlet _globalThis;\nconst getGlobalThis = () => {\n  return _globalThis || (_globalThis = typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {});\n};\nconst identRE = /^[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/;\nfunction genPropsAccessExp(name) {\n  return identRE.test(name) ? `__props.${name}` : `__props[${JSON.stringify(name)}]`;\n}\n\nconst PatchFlags = {\n  \"TEXT\": 1,\n  \"1\": \"TEXT\",\n  \"CLASS\": 2,\n  \"2\": \"CLASS\",\n  \"STYLE\": 4,\n  \"4\": \"STYLE\",\n  \"PROPS\": 8,\n  \"8\": \"PROPS\",\n  \"FULL_PROPS\": 16,\n  \"16\": \"FULL_PROPS\",\n  \"NEED_HYDRATION\": 32,\n  \"32\": \"NEED_HYDRATION\",\n  \"STABLE_FRAGMENT\": 64,\n  \"64\": \"STABLE_FRAGMENT\",\n  \"KEYED_FRAGMENT\": 128,\n  \"128\": \"KEYED_FRAGMENT\",\n  \"UNKEYED_FRAGMENT\": 256,\n  \"256\": \"UNKEYED_FRAGMENT\",\n  \"NEED_PATCH\": 512,\n  \"512\": \"NEED_PATCH\",\n  \"DYNAMIC_SLOTS\": 1024,\n  \"1024\": \"DYNAMIC_SLOTS\",\n  \"DEV_ROOT_FRAGMENT\": 2048,\n  \"2048\": \"DEV_ROOT_FRAGMENT\",\n  \"HOISTED\": -1,\n  \"-1\": \"HOISTED\",\n  \"BAIL\": -2,\n  \"-2\": \"BAIL\"\n};\nconst PatchFlagNames = {\n  [1]: `TEXT`,\n  [2]: `CLASS`,\n  [4]: `STYLE`,\n  [8]: `PROPS`,\n  [16]: `FULL_PROPS`,\n  [32]: `NEED_HYDRATION`,\n  [64]: `STABLE_FRAGMENT`,\n  [128]: `KEYED_FRAGMENT`,\n  [256]: `UNKEYED_FRAGMENT`,\n  [512]: `NEED_PATCH`,\n  [1024]: `DYNAMIC_SLOTS`,\n  [2048]: `DEV_ROOT_FRAGMENT`,\n  [-1]: `HOISTED`,\n  [-2]: `BAIL`\n};\n\nconst ShapeFlags = {\n  \"ELEMENT\": 1,\n  \"1\": \"ELEMENT\",\n  \"FUNCTIONAL_COMPONENT\": 2,\n  \"2\": \"FUNCTIONAL_COMPONENT\",\n  \"STATEFUL_COMPONENT\": 4,\n  \"4\": \"STATEFUL_COMPONENT\",\n  \"TEXT_CHILDREN\": 8,\n  \"8\": \"TEXT_CHILDREN\",\n  \"ARRAY_CHILDREN\": 16,\n  \"16\": \"ARRAY_CHILDREN\",\n  \"SLOTS_CHILDREN\": 32,\n  \"32\": \"SLOTS_CHILDREN\",\n  \"TELEPORT\": 64,\n  \"64\": \"TELEPORT\",\n  \"SUSPENSE\": 128,\n  \"128\": \"SUSPENSE\",\n  \"COMPONENT_SHOULD_KEEP_ALIVE\": 256,\n  \"256\": \"COMPONENT_SHOULD_KEEP_ALIVE\",\n  \"COMPONENT_KEPT_ALIVE\": 512,\n  \"512\": \"COMPONENT_KEPT_ALIVE\",\n  \"COMPONENT\": 6,\n  \"6\": \"COMPONENT\"\n};\n\nconst SlotFlags = {\n  \"STABLE\": 1,\n  \"1\": \"STABLE\",\n  \"DYNAMIC\": 2,\n  \"2\": \"DYNAMIC\",\n  \"FORWARDED\": 3,\n  \"3\": \"FORWARDED\"\n};\nconst slotFlagsText = {\n  [1]: \"STABLE\",\n  [2]: \"DYNAMIC\",\n  [3]: \"FORWARDED\"\n};\n\nconst GLOBALS_ALLOWED = \"Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error\";\nconst isGloballyAllowed = /* @__PURE__ */ makeMap(GLOBALS_ALLOWED);\nconst isGloballyWhitelisted = isGloballyAllowed;\n\nconst range = 2;\nfunction generateCodeFrame(source, start = 0, end = source.length) {\n  start = Math.max(0, Math.min(start, source.length));\n  end = Math.max(0, Math.min(end, source.length));\n  if (start > end) return \"\";\n  let lines = source.split(/(\\r?\\n)/);\n  const newlineSequences = lines.filter((_, idx) => idx % 2 === 1);\n  lines = lines.filter((_, idx) => idx % 2 === 0);\n  let count = 0;\n  const res = [];\n  for (let i = 0; i < lines.length; i++) {\n    count += lines[i].length + (newlineSequences[i] && newlineSequences[i].length || 0);\n    if (count >= start) {\n      for (let j = i - range; j <= i + range || end > count; j++) {\n        if (j < 0 || j >= lines.length) continue;\n        const line = j + 1;\n        res.push(\n          `${line}${\" \".repeat(Math.max(3 - String(line).length, 0))}|  ${lines[j]}`\n        );\n        const lineLength = lines[j].length;\n        const newLineSeqLength = newlineSequences[j] && newlineSequences[j].length || 0;\n        if (j === i) {\n          const pad = start - (count - (lineLength + newLineSeqLength));\n          const length = Math.max(\n            1,\n            end > count ? lineLength - pad : end - start\n          );\n          res.push(`   |  ` + \" \".repeat(pad) + \"^\".repeat(length));\n        } else if (j > i) {\n          if (end > count) {\n            const length = Math.max(Math.min(end - count, lineLength), 1);\n            res.push(`   |  ` + \"^\".repeat(length));\n          }\n          count += lineLength + newLineSeqLength;\n        }\n      }\n      break;\n    }\n  }\n  return res.join(\"\\n\");\n}\n\nfunction normalizeStyle(value) {\n  if (isArray(value)) {\n    const res = {};\n    for (let i = 0; i < value.length; i++) {\n      const item = value[i];\n      const normalized = isString(item) ? parseStringStyle(item) : normalizeStyle(item);\n      if (normalized) {\n        for (const key in normalized) {\n          res[key] = normalized[key];\n        }\n      }\n    }\n    return res;\n  } else if (isString(value) || isObject(value)) {\n    return value;\n  }\n}\nconst listDelimiterRE = /;(?![^(]*\\))/g;\nconst propertyDelimiterRE = /:([^]+)/;\nconst styleCommentRE = /\\/\\*[^]*?\\*\\//g;\nfunction parseStringStyle(cssText) {\n  const ret = {};\n  cssText.replace(styleCommentRE, \"\").split(listDelimiterRE).forEach((item) => {\n    if (item) {\n      const tmp = item.split(propertyDelimiterRE);\n      tmp.length > 1 && (ret[tmp[0].trim()] = tmp[1].trim());\n    }\n  });\n  return ret;\n}\nfunction stringifyStyle(styles) {\n  let ret = \"\";\n  if (!styles || isString(styles)) {\n    return ret;\n  }\n  for (const key in styles) {\n    const value = styles[key];\n    if (isString(value) || typeof value === \"number\") {\n      const normalizedKey = key.startsWith(`--`) ? key : hyphenate(key);\n      ret += `${normalizedKey}:${value};`;\n    }\n  }\n  return ret;\n}\nfunction normalizeClass(value) {\n  let res = \"\";\n  if (isString(value)) {\n    res = value;\n  } else if (isArray(value)) {\n    for (let i = 0; i < value.length; i++) {\n      const normalized = normalizeClass(value[i]);\n      if (normalized) {\n        res += normalized + \" \";\n      }\n    }\n  } else if (isObject(value)) {\n    for (const name in value) {\n      if (value[name]) {\n        res += name + \" \";\n      }\n    }\n  }\n  return res.trim();\n}\nfunction normalizeProps(props) {\n  if (!props) return null;\n  let { class: klass, style } = props;\n  if (klass && !isString(klass)) {\n    props.class = normalizeClass(klass);\n  }\n  if (style) {\n    props.style = normalizeStyle(style);\n  }\n  return props;\n}\n\nconst HTML_TAGS = \"html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot\";\nconst SVG_TAGS = \"svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view\";\nconst MATH_TAGS = \"annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics\";\nconst VOID_TAGS = \"area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr\";\nconst isHTMLTag = /* @__PURE__ */ makeMap(HTML_TAGS);\nconst isSVGTag = /* @__PURE__ */ makeMap(SVG_TAGS);\nconst isMathMLTag = /* @__PURE__ */ makeMap(MATH_TAGS);\nconst isVoidTag = /* @__PURE__ */ makeMap(VOID_TAGS);\n\nconst specialBooleanAttrs = `itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`;\nconst isSpecialBooleanAttr = /* @__PURE__ */ makeMap(specialBooleanAttrs);\nconst isBooleanAttr = /* @__PURE__ */ makeMap(\n  specialBooleanAttrs + `,async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected`\n);\nfunction includeBooleanAttr(value) {\n  return !!value || value === \"\";\n}\nconst unsafeAttrCharRE = /[>/=\"'\\u0009\\u000a\\u000c\\u0020]/;\nconst attrValidationCache = {};\nfunction isSSRSafeAttrName(name) {\n  if (attrValidationCache.hasOwnProperty(name)) {\n    return attrValidationCache[name];\n  }\n  const isUnsafe = unsafeAttrCharRE.test(name);\n  if (isUnsafe) {\n    console.error(`unsafe attribute name: ${name}`);\n  }\n  return attrValidationCache[name] = !isUnsafe;\n}\nconst propsToAttrMap = {\n  acceptCharset: \"accept-charset\",\n  className: \"class\",\n  htmlFor: \"for\",\n  httpEquiv: \"http-equiv\"\n};\nconst isKnownHtmlAttr = /* @__PURE__ */ makeMap(\n  `accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,inert,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap`\n);\nconst isKnownSvgAttr = /* @__PURE__ */ makeMap(\n  `xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,overflow,overline-position,overline-thickness,panose-1,paint-order,path,pathLength,patternContentUnits,patternTransform,patternUnits,ping,pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,specularConstant,specularExponent,speed,spreadMethod,startOffset,stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,string,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,text-decoration,text-rendering,textLength,to,transform,transform-origin,type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xmlns:xlink,xml:base,xml:lang,xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan`\n);\nfunction isRenderableAttrValue(value) {\n  if (value == null) {\n    return false;\n  }\n  const type = typeof value;\n  return type === \"string\" || type === \"number\" || type === \"boolean\";\n}\n\nconst escapeRE = /[\"'&<>]/;\nfunction escapeHtml(string) {\n  const str = \"\" + string;\n  const match = escapeRE.exec(str);\n  if (!match) {\n    return str;\n  }\n  let html = \"\";\n  let escaped;\n  let index;\n  let lastIndex = 0;\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34:\n        escaped = \"&quot;\";\n        break;\n      case 38:\n        escaped = \"&amp;\";\n        break;\n      case 39:\n        escaped = \"&#39;\";\n        break;\n      case 60:\n        escaped = \"&lt;\";\n        break;\n      case 62:\n        escaped = \"&gt;\";\n        break;\n      default:\n        continue;\n    }\n    if (lastIndex !== index) {\n      html += str.slice(lastIndex, index);\n    }\n    lastIndex = index + 1;\n    html += escaped;\n  }\n  return lastIndex !== index ? html + str.slice(lastIndex, index) : html;\n}\nconst commentStripRE = /^-?>|<!--|-->|--!>|<!-$/g;\nfunction escapeHtmlComment(src) {\n  return src.replace(commentStripRE, \"\");\n}\n\nfunction looseCompareArrays(a, b) {\n  if (a.length !== b.length) return false;\n  let equal = true;\n  for (let i = 0; equal && i < a.length; i++) {\n    equal = looseEqual(a[i], b[i]);\n  }\n  return equal;\n}\nfunction looseEqual(a, b) {\n  if (a === b) return true;\n  let aValidType = isDate(a);\n  let bValidType = isDate(b);\n  if (aValidType || bValidType) {\n    return aValidType && bValidType ? a.getTime() === b.getTime() : false;\n  }\n  aValidType = isSymbol(a);\n  bValidType = isSymbol(b);\n  if (aValidType || bValidType) {\n    return a === b;\n  }\n  aValidType = isArray(a);\n  bValidType = isArray(b);\n  if (aValidType || bValidType) {\n    return aValidType && bValidType ? looseCompareArrays(a, b) : false;\n  }\n  aValidType = isObject(a);\n  bValidType = isObject(b);\n  if (aValidType || bValidType) {\n    if (!aValidType || !bValidType) {\n      return false;\n    }\n    const aKeysCount = Object.keys(a).length;\n    const bKeysCount = Object.keys(b).length;\n    if (aKeysCount !== bKeysCount) {\n      return false;\n    }\n    for (const key in a) {\n      const aHasKey = a.hasOwnProperty(key);\n      const bHasKey = b.hasOwnProperty(key);\n      if (aHasKey && !bHasKey || !aHasKey && bHasKey || !looseEqual(a[key], b[key])) {\n        return false;\n      }\n    }\n  }\n  return String(a) === String(b);\n}\nfunction looseIndexOf(arr, val) {\n  return arr.findIndex((item) => looseEqual(item, val));\n}\n\nconst toDisplayString = (val) => {\n  return isString(val) ? val : val == null ? \"\" : isArray(val) || isObject(val) && (val.toString === objectToString || !isFunction(val.toString)) ? JSON.stringify(val, replacer, 2) : String(val);\n};\nconst replacer = (_key, val) => {\n  if (val && val.__v_isRef) {\n    return replacer(_key, val.value);\n  } else if (isMap(val)) {\n    return {\n      [`Map(${val.size})`]: [...val.entries()].reduce(\n        (entries, [key, val2], i) => {\n          entries[stringifySymbol(key, i) + \" =>\"] = val2;\n          return entries;\n        },\n        {}\n      )\n    };\n  } else if (isSet(val)) {\n    return {\n      [`Set(${val.size})`]: [...val.values()].map((v) => stringifySymbol(v))\n    };\n  } else if (isSymbol(val)) {\n    return stringifySymbol(val);\n  } else if (isObject(val) && !isArray(val) && !isPlainObject(val)) {\n    return String(val);\n  }\n  return val;\n};\nconst stringifySymbol = (v, i = \"\") => {\n  var _a;\n  return (\n    // Symbol.description in es2019+ so we need to cast here to pass\n    // the lib: es2016 check\n    isSymbol(v) ? `Symbol(${(_a = v.description) != null ? _a : i})` : v\n  );\n};\n\nexport { EMPTY_ARR, EMPTY_OBJ, NO, NOOP, PatchFlagNames, PatchFlags, ShapeFlags, SlotFlags, camelize, capitalize, def, escapeHtml, escapeHtmlComment, extend, genPropsAccessExp, generateCodeFrame, getGlobalThis, hasChanged, hasOwn, hyphenate, includeBooleanAttr, invokeArrayFns, isArray, isBooleanAttr, isBuiltInDirective, isDate, isFunction, isGloballyAllowed, isGloballyWhitelisted, isHTMLTag, isIntegerKey, isKnownHtmlAttr, isKnownSvgAttr, isMap, isMathMLTag, isModelListener, isObject, isOn, isPlainObject, isPromise, isRegExp, isRenderableAttrValue, isReservedProp, isSSRSafeAttrName, isSVGTag, isSet, isSpecialBooleanAttr, isString, isSymbol, isVoidTag, looseEqual, looseIndexOf, looseToNumber, makeMap, normalizeClass, normalizeProps, normalizeStyle, objectToString, parseStringStyle, propsToAttrMap, remove, slotFlagsText, stringifyStyle, toDisplayString, toHandlerKey, toNumber, toRawType, toTypeString };\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","/*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.DOMPurify = factory());\n})(this, (function () { 'use strict';\n\n  const {\n    entries,\n    setPrototypeOf,\n    isFrozen,\n    getPrototypeOf,\n    getOwnPropertyDescriptor\n  } = Object;\n  let {\n    freeze,\n    seal,\n    create\n  } = Object; // eslint-disable-line import/no-mutable-exports\n  let {\n    apply,\n    construct\n  } = typeof Reflect !== 'undefined' && Reflect;\n  if (!freeze) {\n    freeze = function freeze(x) {\n      return x;\n    };\n  }\n  if (!seal) {\n    seal = function seal(x) {\n      return x;\n    };\n  }\n  if (!apply) {\n    apply = function apply(fun, thisValue, args) {\n      return fun.apply(thisValue, args);\n    };\n  }\n  if (!construct) {\n    construct = function construct(Func, args) {\n      return new Func(...args);\n    };\n  }\n  const arrayForEach = unapply(Array.prototype.forEach);\n  const arrayPop = unapply(Array.prototype.pop);\n  const arrayPush = unapply(Array.prototype.push);\n  const stringToLowerCase = unapply(String.prototype.toLowerCase);\n  const stringToString = unapply(String.prototype.toString);\n  const stringMatch = unapply(String.prototype.match);\n  const stringReplace = unapply(String.prototype.replace);\n  const stringIndexOf = unapply(String.prototype.indexOf);\n  const stringTrim = unapply(String.prototype.trim);\n  const objectHasOwnProperty = unapply(Object.prototype.hasOwnProperty);\n  const regExpTest = unapply(RegExp.prototype.test);\n  const typeErrorCreate = unconstruct(TypeError);\n\n  /**\n   * Creates a new function that calls the given function with a specified thisArg and arguments.\n   *\n   * @param {Function} func - The function to be wrapped and called.\n   * @returns {Function} A new function that calls the given function with a specified thisArg and arguments.\n   */\n  function unapply(func) {\n    return function (thisArg) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n      return apply(func, thisArg, args);\n    };\n  }\n\n  /**\n   * Creates a new function that constructs an instance of the given constructor function with the provided arguments.\n   *\n   * @param {Function} func - The constructor function to be wrapped and called.\n   * @returns {Function} A new function that constructs an instance of the given constructor function with the provided arguments.\n   */\n  function unconstruct(func) {\n    return function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      return construct(func, args);\n    };\n  }\n\n  /**\n   * Add properties to a lookup table\n   *\n   * @param {Object} set - The set to which elements will be added.\n   * @param {Array} array - The array containing elements to be added to the set.\n   * @param {Function} transformCaseFunc - An optional function to transform the case of each element before adding to the set.\n   * @returns {Object} The modified set with added elements.\n   */\n  function addToSet(set, array) {\n    let transformCaseFunc = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : stringToLowerCase;\n    if (setPrototypeOf) {\n      // Make 'in' and truthy checks like Boolean(set.constructor)\n      // independent of any properties defined on Object.prototype.\n      // Prevent prototype setters from intercepting set as a this value.\n      setPrototypeOf(set, null);\n    }\n    let l = array.length;\n    while (l--) {\n      let element = array[l];\n      if (typeof element === 'string') {\n        const lcElement = transformCaseFunc(element);\n        if (lcElement !== element) {\n          // Config presets (e.g. tags.js, attrs.js) are immutable.\n          if (!isFrozen(array)) {\n            array[l] = lcElement;\n          }\n          element = lcElement;\n        }\n      }\n      set[element] = true;\n    }\n    return set;\n  }\n\n  /**\n   * Clean up an array to harden against CSPP\n   *\n   * @param {Array} array - The array to be cleaned.\n   * @returns {Array} The cleaned version of the array\n   */\n  function cleanArray(array) {\n    for (let index = 0; index < array.length; index++) {\n      const isPropertyExist = objectHasOwnProperty(array, index);\n      if (!isPropertyExist) {\n        array[index] = null;\n      }\n    }\n    return array;\n  }\n\n  /**\n   * Shallow clone an object\n   *\n   * @param {Object} object - The object to be cloned.\n   * @returns {Object} A new object that copies the original.\n   */\n  function clone(object) {\n    const newObject = create(null);\n    for (const [property, value] of entries(object)) {\n      const isPropertyExist = objectHasOwnProperty(object, property);\n      if (isPropertyExist) {\n        if (Array.isArray(value)) {\n          newObject[property] = cleanArray(value);\n        } else if (value && typeof value === 'object' && value.constructor === Object) {\n          newObject[property] = clone(value);\n        } else {\n          newObject[property] = value;\n        }\n      }\n    }\n    return newObject;\n  }\n\n  /**\n   * This method automatically checks if the prop is function or getter and behaves accordingly.\n   *\n   * @param {Object} object - The object to look up the getter function in its prototype chain.\n   * @param {String} prop - The property name for which to find the getter function.\n   * @returns {Function} The getter function found in the prototype chain or a fallback function.\n   */\n  function lookupGetter(object, prop) {\n    while (object !== null) {\n      const desc = getOwnPropertyDescriptor(object, prop);\n      if (desc) {\n        if (desc.get) {\n          return unapply(desc.get);\n        }\n        if (typeof desc.value === 'function') {\n          return unapply(desc.value);\n        }\n      }\n      object = getPrototypeOf(object);\n    }\n    function fallbackValue() {\n      return null;\n    }\n    return fallbackValue;\n  }\n\n  const html$1 = freeze(['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr']);\n\n  // SVG\n  const svg$1 = freeze(['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'view', 'vkern']);\n  const svgFilters = freeze(['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence']);\n\n  // List of SVG elements that are disallowed by default.\n  // We still need to know them so that we can do namespace\n  // checks properly in case one wants to add them to\n  // allow-list.\n  const svgDisallowed = freeze(['animate', 'color-profile', 'cursor', 'discard', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignobject', 'hatch', 'hatchpath', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'missing-glyph', 'script', 'set', 'solidcolor', 'unknown', 'use']);\n  const mathMl$1 = freeze(['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover', 'mprescripts']);\n\n  // Similarly to SVG, we want to know all MathML elements,\n  // even those that we disallow by default.\n  const mathMlDisallowed = freeze(['maction', 'maligngroup', 'malignmark', 'mlongdiv', 'mscarries', 'mscarry', 'msgroup', 'mstack', 'msline', 'msrow', 'semantics', 'annotation', 'annotation-xml', 'mprescripts', 'none']);\n  const text = freeze(['#text']);\n\n  const html = freeze(['accept', 'action', 'align', 'alt', 'autocapitalize', 'autocomplete', 'autopictureinpicture', 'autoplay', 'background', 'bgcolor', 'border', 'capture', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'controls', 'controlslist', 'coords', 'crossorigin', 'datetime', 'decoding', 'default', 'dir', 'disabled', 'disablepictureinpicture', 'disableremoteplayback', 'download', 'draggable', 'enctype', 'enterkeyhint', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'inputmode', 'integrity', 'ismap', 'kind', 'label', 'lang', 'list', 'loading', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'minlength', 'multiple', 'muted', 'name', 'nonce', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'pattern', 'placeholder', 'playsinline', 'popover', 'popovertarget', 'popovertargetaction', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'translate', 'type', 'usemap', 'valign', 'value', 'width', 'wrap', 'xmlns', 'slot']);\n  const svg = freeze(['accent-height', 'accumulate', 'additive', 'alignment-baseline', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clippathunits', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'filterunits', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'preserveaspectratio', 'primitiveunits', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'specularconstant', 'specularexponent', 'spreadmethod', 'startoffset', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'systemlanguage', 'tabindex', 'targetx', 'targety', 'transform', 'transform-origin', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'version', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan']);\n  const mathMl = freeze(['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'encoding', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns']);\n  const xml = freeze(['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink']);\n\n  // eslint-disable-next-line unicorn/better-regex\n  const MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\n  const ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\n  const TMPLIT_EXPR = seal(/\\${[\\w\\W]*}/gm);\n  const DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/); // eslint-disable-line no-useless-escape\n  const ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\n  const IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n  );\n  const IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\n  const ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n  );\n  const DOCTYPE_NAME = seal(/^html$/i);\n  const CUSTOM_ELEMENT = seal(/^[a-z][.\\w]*(-[.\\w]+)+$/i);\n\n  var EXPRESSIONS = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    MUSTACHE_EXPR: MUSTACHE_EXPR,\n    ERB_EXPR: ERB_EXPR,\n    TMPLIT_EXPR: TMPLIT_EXPR,\n    DATA_ATTR: DATA_ATTR,\n    ARIA_ATTR: ARIA_ATTR,\n    IS_ALLOWED_URI: IS_ALLOWED_URI,\n    IS_SCRIPT_OR_DATA: IS_SCRIPT_OR_DATA,\n    ATTR_WHITESPACE: ATTR_WHITESPACE,\n    DOCTYPE_NAME: DOCTYPE_NAME,\n    CUSTOM_ELEMENT: CUSTOM_ELEMENT\n  });\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\n  const NODE_TYPE = {\n    element: 1,\n    attribute: 2,\n    text: 3,\n    cdataSection: 4,\n    entityReference: 5,\n    // Deprecated\n    entityNode: 6,\n    // Deprecated\n    progressingInstruction: 7,\n    comment: 8,\n    document: 9,\n    documentType: 10,\n    documentFragment: 11,\n    notation: 12 // Deprecated\n  };\n  const getGlobal = function getGlobal() {\n    return typeof window === 'undefined' ? null : window;\n  };\n\n  /**\n   * Creates a no-op policy for internal use only.\n   * Don't export this function outside this module!\n   * @param {TrustedTypePolicyFactory} trustedTypes The policy factory.\n   * @param {HTMLScriptElement} purifyHostElement The Script element used to load DOMPurify (to determine policy name suffix).\n   * @return {TrustedTypePolicy} The policy created (or null, if Trusted Types\n   * are not supported or creating the policy failed).\n   */\n  const _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, purifyHostElement) {\n    if (typeof trustedTypes !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n      return null;\n    }\n\n    // Allow the callers to control the unique policy name\n    // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n    // Policy creation with duplicate names throws in Trusted Types.\n    let suffix = null;\n    const ATTR_NAME = 'data-tt-policy-suffix';\n    if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {\n      suffix = purifyHostElement.getAttribute(ATTR_NAME);\n    }\n    const policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n    try {\n      return trustedTypes.createPolicy(policyName, {\n        createHTML(html) {\n          return html;\n        },\n        createScriptURL(scriptUrl) {\n          return scriptUrl;\n        }\n      });\n    } catch (_) {\n      // Policy creation failed (most likely another DOMPurify script has\n      // already run). Skip creating the policy, as this will only cause errors\n      // if TT are enforced.\n      console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n      return null;\n    }\n  };\n  function createDOMPurify() {\n    let window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n    const DOMPurify = root => createDOMPurify(root);\n\n    /**\n     * Version label, exposed for easier checks\n     * if DOMPurify is up to date or not\n     */\n    DOMPurify.version = '3.1.6';\n\n    /**\n     * Array of elements that DOMPurify removed during sanitation.\n     * Empty if nothing was removed.\n     */\n    DOMPurify.removed = [];\n    if (!window || !window.document || window.document.nodeType !== NODE_TYPE.document) {\n      // Not running in a browser, provide a factory function\n      // so that you can pass your own Window\n      DOMPurify.isSupported = false;\n      return DOMPurify;\n    }\n    let {\n      document\n    } = window;\n    const originalDocument = document;\n    const currentScript = originalDocument.currentScript;\n    const {\n      DocumentFragment,\n      HTMLTemplateElement,\n      Node,\n      Element,\n      NodeFilter,\n      NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap,\n      HTMLFormElement,\n      DOMParser,\n      trustedTypes\n    } = window;\n    const ElementPrototype = Element.prototype;\n    const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n    const remove = lookupGetter(ElementPrototype, 'remove');\n    const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n    const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n    const getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n\n    // As per issue #47, the web-components registry is inherited by a\n    // new document created via createHTMLDocument. As per the spec\n    // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n    // a new empty registry is used when creating a template contents owner\n    // document, so we use that as our parent document to ensure nothing\n    // is inherited.\n    if (typeof HTMLTemplateElement === 'function') {\n      const template = document.createElement('template');\n      if (template.content && template.content.ownerDocument) {\n        document = template.content.ownerDocument;\n      }\n    }\n    let trustedTypesPolicy;\n    let emptyHTML = '';\n    const {\n      implementation,\n      createNodeIterator,\n      createDocumentFragment,\n      getElementsByTagName\n    } = document;\n    const {\n      importNode\n    } = originalDocument;\n    let hooks = {};\n\n    /**\n     * Expose whether this browser supports running the full DOMPurify.\n     */\n    DOMPurify.isSupported = typeof entries === 'function' && typeof getParentNode === 'function' && implementation && implementation.createHTMLDocument !== undefined;\n    const {\n      MUSTACHE_EXPR,\n      ERB_EXPR,\n      TMPLIT_EXPR,\n      DATA_ATTR,\n      ARIA_ATTR,\n      IS_SCRIPT_OR_DATA,\n      ATTR_WHITESPACE,\n      CUSTOM_ELEMENT\n    } = EXPRESSIONS;\n    let {\n      IS_ALLOWED_URI: IS_ALLOWED_URI$1\n    } = EXPRESSIONS;\n\n    /**\n     * We consider the elements and attributes below to be safe. Ideally\n     * don't add any new ones but feel free to remove unwanted ones.\n     */\n\n    /* allowed element names */\n    let ALLOWED_TAGS = null;\n    const DEFAULT_ALLOWED_TAGS = addToSet({}, [...html$1, ...svg$1, ...svgFilters, ...mathMl$1, ...text]);\n\n    /* Allowed attribute names */\n    let ALLOWED_ATTR = null;\n    const DEFAULT_ALLOWED_ATTR = addToSet({}, [...html, ...svg, ...mathMl, ...xml]);\n\n    /*\n     * Configure how DOMPUrify should handle custom elements and their attributes as well as customized built-in elements.\n     * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)\n     * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)\n     * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.\n     */\n    let CUSTOM_ELEMENT_HANDLING = Object.seal(create(null, {\n      tagNameCheck: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: null\n      },\n      attributeNameCheck: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: null\n      },\n      allowCustomizedBuiltInElements: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: false\n      }\n    }));\n\n    /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n    let FORBID_TAGS = null;\n\n    /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n    let FORBID_ATTR = null;\n\n    /* Decide if ARIA attributes are okay */\n    let ALLOW_ARIA_ATTR = true;\n\n    /* Decide if custom data attributes are okay */\n    let ALLOW_DATA_ATTR = true;\n\n    /* Decide if unknown protocols are okay */\n    let ALLOW_UNKNOWN_PROTOCOLS = false;\n\n    /* Decide if self-closing tags in attributes are allowed.\n     * Usually removed due to a mXSS issue in jQuery 3.0 */\n    let ALLOW_SELF_CLOSE_IN_ATTR = true;\n\n    /* Output should be safe for common template engines.\n     * This means, DOMPurify removes data attributes, mustaches and ERB\n     */\n    let SAFE_FOR_TEMPLATES = false;\n\n    /* Output should be safe even for XML used within HTML and alike.\n     * This means, DOMPurify removes comments when containing risky content.\n     */\n    let SAFE_FOR_XML = true;\n\n    /* Decide if document with <html>... should be returned */\n    let WHOLE_DOCUMENT = false;\n\n    /* Track whether config is already set on this instance of DOMPurify. */\n    let SET_CONFIG = false;\n\n    /* Decide if all elements (e.g. style, script) must be children of\n     * document.body. By default, browsers might move them to document.head */\n    let FORCE_BODY = false;\n\n    /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n     * string (or a TrustedHTML object if Trusted Types are supported).\n     * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n     */\n    let RETURN_DOM = false;\n\n    /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n     * string  (or a TrustedHTML object if Trusted Types are supported) */\n    let RETURN_DOM_FRAGMENT = false;\n\n    /* Try to return a Trusted Type object instead of a string, return a string in\n     * case Trusted Types are not supported  */\n    let RETURN_TRUSTED_TYPE = false;\n\n    /* Output should be free from DOM clobbering attacks?\n     * This sanitizes markups named with colliding, clobberable built-in DOM APIs.\n     */\n    let SANITIZE_DOM = true;\n\n    /* Achieve full DOM Clobbering protection by isolating the namespace of named\n     * properties and JS variables, mitigating attacks that abuse the HTML/DOM spec rules.\n     *\n     * HTML/DOM spec rules that enable DOM Clobbering:\n     *   - Named Access on Window (7.3.3)\n     *   - DOM Tree Accessors (3.1.5)\n     *   - Form Element Parent-Child Relations (4.10.3)\n     *   - Iframe srcdoc / Nested WindowProxies (4.8.5)\n     *   - HTMLCollection (4.2.10.2)\n     *\n     * Namespace isolation is implemented by prefixing `id` and `name` attributes\n     * with a constant string, i.e., `user-content-`\n     */\n    let SANITIZE_NAMED_PROPS = false;\n    const SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';\n\n    /* Keep element content when removing element? */\n    let KEEP_CONTENT = true;\n\n    /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n     * of importing it into a new Document and returning a sanitized copy */\n    let IN_PLACE = false;\n\n    /* Allow usage of profiles like html, svg and mathMl */\n    let USE_PROFILES = {};\n\n    /* Tags to ignore content of when KEEP_CONTENT is true */\n    let FORBID_CONTENTS = null;\n    const DEFAULT_FORBID_CONTENTS = addToSet({}, ['annotation-xml', 'audio', 'colgroup', 'desc', 'foreignobject', 'head', 'iframe', 'math', 'mi', 'mn', 'mo', 'ms', 'mtext', 'noembed', 'noframes', 'noscript', 'plaintext', 'script', 'style', 'svg', 'template', 'thead', 'title', 'video', 'xmp']);\n\n    /* Tags that are safe for data: URIs */\n    let DATA_URI_TAGS = null;\n    const DEFAULT_DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image', 'track']);\n\n    /* Attributes safe for values like \"javascript:\" */\n    let URI_SAFE_ATTRIBUTES = null;\n    const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'role', 'summary', 'title', 'value', 'style', 'xmlns']);\n    const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n    const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n    const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n    /* Document namespace */\n    let NAMESPACE = HTML_NAMESPACE;\n    let IS_EMPTY_INPUT = false;\n\n    /* Allowed XHTML+XML namespaces */\n    let ALLOWED_NAMESPACES = null;\n    const DEFAULT_ALLOWED_NAMESPACES = addToSet({}, [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE], stringToString);\n\n    /* Parsing of strict XHTML documents */\n    let PARSER_MEDIA_TYPE = null;\n    const SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];\n    const DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n    let transformCaseFunc = null;\n\n    /* Keep a reference to config to pass to hooks */\n    let CONFIG = null;\n\n    /* Ideally, do not touch anything below this line */\n    /* ______________________________________________ */\n\n    const formElement = document.createElement('form');\n    const isRegexOrFunction = function isRegexOrFunction(testValue) {\n      return testValue instanceof RegExp || testValue instanceof Function;\n    };\n\n    /**\n     * _parseConfig\n     *\n     * @param  {Object} cfg optional config literal\n     */\n    // eslint-disable-next-line complexity\n    const _parseConfig = function _parseConfig() {\n      let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (CONFIG && CONFIG === cfg) {\n        return;\n      }\n\n      /* Shield configuration object from tampering */\n      if (!cfg || typeof cfg !== 'object') {\n        cfg = {};\n      }\n\n      /* Shield configuration object from prototype pollution */\n      cfg = clone(cfg);\n      PARSER_MEDIA_TYPE =\n      // eslint-disable-next-line unicorn/prefer-includes\n      SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? DEFAULT_PARSER_MEDIA_TYPE : cfg.PARSER_MEDIA_TYPE;\n\n      // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.\n      transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? stringToString : stringToLowerCase;\n\n      /* Set configuration parameters */\n      ALLOWED_TAGS = objectHasOwnProperty(cfg, 'ALLOWED_TAGS') ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc) : DEFAULT_ALLOWED_TAGS;\n      ALLOWED_ATTR = objectHasOwnProperty(cfg, 'ALLOWED_ATTR') ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc) : DEFAULT_ALLOWED_ATTR;\n      ALLOWED_NAMESPACES = objectHasOwnProperty(cfg, 'ALLOWED_NAMESPACES') ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString) : DEFAULT_ALLOWED_NAMESPACES;\n      URI_SAFE_ATTRIBUTES = objectHasOwnProperty(cfg, 'ADD_URI_SAFE_ATTR') ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES),\n      // eslint-disable-line indent\n      cfg.ADD_URI_SAFE_ATTR,\n      // eslint-disable-line indent\n      transformCaseFunc // eslint-disable-line indent\n      ) // eslint-disable-line indent\n      : DEFAULT_URI_SAFE_ATTRIBUTES;\n      DATA_URI_TAGS = objectHasOwnProperty(cfg, 'ADD_DATA_URI_TAGS') ? addToSet(clone(DEFAULT_DATA_URI_TAGS),\n      // eslint-disable-line indent\n      cfg.ADD_DATA_URI_TAGS,\n      // eslint-disable-line indent\n      transformCaseFunc // eslint-disable-line indent\n      ) // eslint-disable-line indent\n      : DEFAULT_DATA_URI_TAGS;\n      FORBID_CONTENTS = objectHasOwnProperty(cfg, 'FORBID_CONTENTS') ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc) : DEFAULT_FORBID_CONTENTS;\n      FORBID_TAGS = objectHasOwnProperty(cfg, 'FORBID_TAGS') ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc) : {};\n      FORBID_ATTR = objectHasOwnProperty(cfg, 'FORBID_ATTR') ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc) : {};\n      USE_PROFILES = objectHasOwnProperty(cfg, 'USE_PROFILES') ? cfg.USE_PROFILES : false;\n      ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n      ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n      ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n      ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false; // Default true\n      SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n      SAFE_FOR_XML = cfg.SAFE_FOR_XML !== false; // Default true\n      WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n      RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n      RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n      RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n      FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n      SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n      SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false; // Default false\n      KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n      IN_PLACE = cfg.IN_PLACE || false; // Default false\n      IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI;\n      NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n      CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};\n      if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n        CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n      }\n      if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n        CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n      }\n      if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {\n        CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n      }\n      if (SAFE_FOR_TEMPLATES) {\n        ALLOW_DATA_ATTR = false;\n      }\n      if (RETURN_DOM_FRAGMENT) {\n        RETURN_DOM = true;\n      }\n\n      /* Parse profile info */\n      if (USE_PROFILES) {\n        ALLOWED_TAGS = addToSet({}, text);\n        ALLOWED_ATTR = [];\n        if (USE_PROFILES.html === true) {\n          addToSet(ALLOWED_TAGS, html$1);\n          addToSet(ALLOWED_ATTR, html);\n        }\n        if (USE_PROFILES.svg === true) {\n          addToSet(ALLOWED_TAGS, svg$1);\n          addToSet(ALLOWED_ATTR, svg);\n          addToSet(ALLOWED_ATTR, xml);\n        }\n        if (USE_PROFILES.svgFilters === true) {\n          addToSet(ALLOWED_TAGS, svgFilters);\n          addToSet(ALLOWED_ATTR, svg);\n          addToSet(ALLOWED_ATTR, xml);\n        }\n        if (USE_PROFILES.mathMl === true) {\n          addToSet(ALLOWED_TAGS, mathMl$1);\n          addToSet(ALLOWED_ATTR, mathMl);\n          addToSet(ALLOWED_ATTR, xml);\n        }\n      }\n\n      /* Merge configuration parameters */\n      if (cfg.ADD_TAGS) {\n        if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n          ALLOWED_TAGS = clone(ALLOWED_TAGS);\n        }\n        addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);\n      }\n      if (cfg.ADD_ATTR) {\n        if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n          ALLOWED_ATTR = clone(ALLOWED_ATTR);\n        }\n        addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);\n      }\n      if (cfg.ADD_URI_SAFE_ATTR) {\n        addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);\n      }\n      if (cfg.FORBID_CONTENTS) {\n        if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n          FORBID_CONTENTS = clone(FORBID_CONTENTS);\n        }\n        addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);\n      }\n\n      /* Add #text in case KEEP_CONTENT is set to true */\n      if (KEEP_CONTENT) {\n        ALLOWED_TAGS['#text'] = true;\n      }\n\n      /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n      if (WHOLE_DOCUMENT) {\n        addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n      }\n\n      /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n      if (ALLOWED_TAGS.table) {\n        addToSet(ALLOWED_TAGS, ['tbody']);\n        delete FORBID_TAGS.tbody;\n      }\n      if (cfg.TRUSTED_TYPES_POLICY) {\n        if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== 'function') {\n          throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.');\n        }\n        if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== 'function') {\n          throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.');\n        }\n\n        // Overwrite existing TrustedTypes policy.\n        trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY;\n\n        // Sign local variables required by `sanitize`.\n        emptyHTML = trustedTypesPolicy.createHTML('');\n      } else {\n        // Uninitialized policy, attempt to initialize the internal dompurify policy.\n        if (trustedTypesPolicy === undefined) {\n          trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, currentScript);\n        }\n\n        // If creating the internal policy succeeded sign internal variables.\n        if (trustedTypesPolicy !== null && typeof emptyHTML === 'string') {\n          emptyHTML = trustedTypesPolicy.createHTML('');\n        }\n      }\n\n      // Prevent further manipulation of configuration.\n      // Not available in IE8, Safari 5, etc.\n      if (freeze) {\n        freeze(cfg);\n      }\n      CONFIG = cfg;\n    };\n    const MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, ['mi', 'mo', 'mn', 'ms', 'mtext']);\n    const HTML_INTEGRATION_POINTS = addToSet({}, ['foreignobject', 'annotation-xml']);\n\n    // Certain elements are allowed in both SVG and HTML\n    // namespace. We need to specify them explicitly\n    // so that they don't get erroneously deleted from\n    // HTML namespace.\n    const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, ['title', 'style', 'font', 'a', 'script']);\n\n    /* Keep track of all possible SVG and MathML tags\n     * so that we can perform the namespace checks\n     * correctly. */\n    const ALL_SVG_TAGS = addToSet({}, [...svg$1, ...svgFilters, ...svgDisallowed]);\n    const ALL_MATHML_TAGS = addToSet({}, [...mathMl$1, ...mathMlDisallowed]);\n\n    /**\n     * @param  {Element} element a DOM element whose namespace is being checked\n     * @returns {boolean} Return false if the element has a\n     *  namespace that a spec-compliant parser would never\n     *  return. Return true otherwise.\n     */\n    const _checkValidNamespace = function _checkValidNamespace(element) {\n      let parent = getParentNode(element);\n\n      // In JSDOM, if we're inside shadow DOM, then parentNode\n      // can be null. We just simulate parent in this case.\n      if (!parent || !parent.tagName) {\n        parent = {\n          namespaceURI: NAMESPACE,\n          tagName: 'template'\n        };\n      }\n      const tagName = stringToLowerCase(element.tagName);\n      const parentTagName = stringToLowerCase(parent.tagName);\n      if (!ALLOWED_NAMESPACES[element.namespaceURI]) {\n        return false;\n      }\n      if (element.namespaceURI === SVG_NAMESPACE) {\n        // The only way to switch from HTML namespace to SVG\n        // is via <svg>. If it happens via any other tag, then\n        // it should be killed.\n        if (parent.namespaceURI === HTML_NAMESPACE) {\n          return tagName === 'svg';\n        }\n\n        // The only way to switch from MathML to SVG is via`\n        // svg if parent is either <annotation-xml> or MathML\n        // text integration points.\n        if (parent.namespaceURI === MATHML_NAMESPACE) {\n          return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n        }\n\n        // We only allow elements that are defined in SVG\n        // spec. All others are disallowed in SVG namespace.\n        return Boolean(ALL_SVG_TAGS[tagName]);\n      }\n      if (element.namespaceURI === MATHML_NAMESPACE) {\n        // The only way to switch from HTML namespace to MathML\n        // is via <math>. If it happens via any other tag, then\n        // it should be killed.\n        if (parent.namespaceURI === HTML_NAMESPACE) {\n          return tagName === 'math';\n        }\n\n        // The only way to switch from SVG to MathML is via\n        // <math> and HTML integration points\n        if (parent.namespaceURI === SVG_NAMESPACE) {\n          return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n        }\n\n        // We only allow elements that are defined in MathML\n        // spec. All others are disallowed in MathML namespace.\n        return Boolean(ALL_MATHML_TAGS[tagName]);\n      }\n      if (element.namespaceURI === HTML_NAMESPACE) {\n        // The only way to switch from SVG to HTML is via\n        // HTML integration points, and from MathML to HTML\n        // is via MathML text integration points\n        if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n          return false;\n        }\n        if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n          return false;\n        }\n\n        // We disallow tags that are specific for MathML\n        // or SVG and should never appear in HTML namespace\n        return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);\n      }\n\n      // For XHTML and XML documents that support custom namespaces\n      if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && ALLOWED_NAMESPACES[element.namespaceURI]) {\n        return true;\n      }\n\n      // The code should never reach this place (this means\n      // that the element somehow got namespace that is not\n      // HTML, SVG, MathML or allowed via ALLOWED_NAMESPACES).\n      // Return false just in case.\n      return false;\n    };\n\n    /**\n     * _forceRemove\n     *\n     * @param  {Node} node a DOM node\n     */\n    const _forceRemove = function _forceRemove(node) {\n      arrayPush(DOMPurify.removed, {\n        element: node\n      });\n      try {\n        // eslint-disable-next-line unicorn/prefer-dom-node-remove\n        getParentNode(node).removeChild(node);\n      } catch (_) {\n        remove(node);\n      }\n    };\n\n    /**\n     * _removeAttribute\n     *\n     * @param  {String} name an Attribute name\n     * @param  {Node} node a DOM node\n     */\n    const _removeAttribute = function _removeAttribute(name, node) {\n      try {\n        arrayPush(DOMPurify.removed, {\n          attribute: node.getAttributeNode(name),\n          from: node\n        });\n      } catch (_) {\n        arrayPush(DOMPurify.removed, {\n          attribute: null,\n          from: node\n        });\n      }\n      node.removeAttribute(name);\n\n      // We void attribute values for unremovable \"is\"\" attributes\n      if (name === 'is' && !ALLOWED_ATTR[name]) {\n        if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n          try {\n            _forceRemove(node);\n          } catch (_) {}\n        } else {\n          try {\n            node.setAttribute(name, '');\n          } catch (_) {}\n        }\n      }\n    };\n\n    /**\n     * _initDocument\n     *\n     * @param  {String} dirty a string of dirty markup\n     * @return {Document} a DOM, filled with the dirty markup\n     */\n    const _initDocument = function _initDocument(dirty) {\n      /* Create a HTML document */\n      let doc = null;\n      let leadingWhitespace = null;\n      if (FORCE_BODY) {\n        dirty = '<remove></remove>' + dirty;\n      } else {\n        /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n        const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n        leadingWhitespace = matches && matches[0];\n      }\n      if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && NAMESPACE === HTML_NAMESPACE) {\n        // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)\n        dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + '</body></html>';\n      }\n      const dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n      /*\n       * Use the DOMParser API by default, fallback later if needs be\n       * DOMParser not work for svg when has multiple root element.\n       */\n      if (NAMESPACE === HTML_NAMESPACE) {\n        try {\n          doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n        } catch (_) {}\n      }\n\n      /* Use createHTMLDocument in case DOMParser is not available */\n      if (!doc || !doc.documentElement) {\n        doc = implementation.createDocument(NAMESPACE, 'template', null);\n        try {\n          doc.documentElement.innerHTML = IS_EMPTY_INPUT ? emptyHTML : dirtyPayload;\n        } catch (_) {\n          // Syntax error if dirtyPayload is invalid xml\n        }\n      }\n      const body = doc.body || doc.documentElement;\n      if (dirty && leadingWhitespace) {\n        body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n      }\n\n      /* Work on whole document or just its body */\n      if (NAMESPACE === HTML_NAMESPACE) {\n        return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n      }\n      return WHOLE_DOCUMENT ? doc.documentElement : body;\n    };\n\n    /**\n     * Creates a NodeIterator object that you can use to traverse filtered lists of nodes or elements in a document.\n     *\n     * @param  {Node} root The root element or node to start traversing on.\n     * @return {NodeIterator} The created NodeIterator\n     */\n    const _createNodeIterator = function _createNodeIterator(root) {\n      return createNodeIterator.call(root.ownerDocument || root, root,\n      // eslint-disable-next-line no-bitwise\n      NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT | NodeFilter.SHOW_PROCESSING_INSTRUCTION | NodeFilter.SHOW_CDATA_SECTION, null);\n    };\n\n    /**\n     * _isClobbered\n     *\n     * @param  {Node} elm element to check for clobbering attacks\n     * @return {Boolean} true if clobbered, false if safe\n     */\n    const _isClobbered = function _isClobbered(elm) {\n      return elm instanceof HTMLFormElement && (typeof elm.nodeName !== 'string' || typeof elm.textContent !== 'string' || typeof elm.removeChild !== 'function' || !(elm.attributes instanceof NamedNodeMap) || typeof elm.removeAttribute !== 'function' || typeof elm.setAttribute !== 'function' || typeof elm.namespaceURI !== 'string' || typeof elm.insertBefore !== 'function' || typeof elm.hasChildNodes !== 'function');\n    };\n\n    /**\n     * Checks whether the given object is a DOM node.\n     *\n     * @param  {Node} object object to check whether it's a DOM node\n     * @return {Boolean} true is object is a DOM node\n     */\n    const _isNode = function _isNode(object) {\n      return typeof Node === 'function' && object instanceof Node;\n    };\n\n    /**\n     * _executeHook\n     * Execute user configurable hooks\n     *\n     * @param  {String} entryPoint  Name of the hook's entry point\n     * @param  {Node} currentNode node to work on with the hook\n     * @param  {Object} data additional hook parameters\n     */\n    const _executeHook = function _executeHook(entryPoint, currentNode, data) {\n      if (!hooks[entryPoint]) {\n        return;\n      }\n      arrayForEach(hooks[entryPoint], hook => {\n        hook.call(DOMPurify, currentNode, data, CONFIG);\n      });\n    };\n\n    /**\n     * _sanitizeElements\n     *\n     * @protect nodeName\n     * @protect textContent\n     * @protect removeChild\n     *\n     * @param   {Node} currentNode to check for permission to exist\n     * @return  {Boolean} true if node was killed, false if left alive\n     */\n    const _sanitizeElements = function _sanitizeElements(currentNode) {\n      let content = null;\n\n      /* Execute a hook if present */\n      _executeHook('beforeSanitizeElements', currentNode, null);\n\n      /* Check if element is clobbered or can clobber */\n      if (_isClobbered(currentNode)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      /* Now let's check the element's type and name */\n      const tagName = transformCaseFunc(currentNode.nodeName);\n\n      /* Execute a hook if present */\n      _executeHook('uponSanitizeElement', currentNode, {\n        tagName,\n        allowedTags: ALLOWED_TAGS\n      });\n\n      /* Detect mXSS attempts abusing namespace confusion */\n      if (currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && regExpTest(/<[/\\w]/g, currentNode.innerHTML) && regExpTest(/<[/\\w]/g, currentNode.textContent)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      /* Remove any occurrence of processing instructions */\n      if (currentNode.nodeType === NODE_TYPE.progressingInstruction) {\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      /* Remove any kind of possibly harmful comments */\n      if (SAFE_FOR_XML && currentNode.nodeType === NODE_TYPE.comment && regExpTest(/<[/\\w]/g, currentNode.data)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      /* Remove element if anything forbids its presence */\n      if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n        /* Check if we have a custom element to handle */\n        if (!FORBID_TAGS[tagName] && _isBasicCustomElement(tagName)) {\n          if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)) {\n            return false;\n          }\n          if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)) {\n            return false;\n          }\n        }\n\n        /* Keep content except for bad-listed elements */\n        if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n          const parentNode = getParentNode(currentNode) || currentNode.parentNode;\n          const childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n          if (childNodes && parentNode) {\n            const childCount = childNodes.length;\n            for (let i = childCount - 1; i >= 0; --i) {\n              const childClone = cloneNode(childNodes[i], true);\n              childClone.__removalCount = (currentNode.__removalCount || 0) + 1;\n              parentNode.insertBefore(childClone, getNextSibling(currentNode));\n            }\n          }\n        }\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      /* Check whether element has a valid namespace */\n      if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      /* Make sure that older browsers don't get fallback-tag mXSS */\n      if ((tagName === 'noscript' || tagName === 'noembed' || tagName === 'noframes') && regExpTest(/<\\/no(script|embed|frames)/i, currentNode.innerHTML)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      /* Sanitize element content to be template-safe */\n      if (SAFE_FOR_TEMPLATES && currentNode.nodeType === NODE_TYPE.text) {\n        /* Get the element's text content */\n        content = currentNode.textContent;\n        arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n          content = stringReplace(content, expr, ' ');\n        });\n        if (currentNode.textContent !== content) {\n          arrayPush(DOMPurify.removed, {\n            element: currentNode.cloneNode()\n          });\n          currentNode.textContent = content;\n        }\n      }\n\n      /* Execute a hook if present */\n      _executeHook('afterSanitizeElements', currentNode, null);\n      return false;\n    };\n\n    /**\n     * _isValidAttribute\n     *\n     * @param  {string} lcTag Lowercase tag name of containing element.\n     * @param  {string} lcName Lowercase attribute name.\n     * @param  {string} value Attribute value.\n     * @return {Boolean} Returns true if `value` is valid, otherwise false.\n     */\n    // eslint-disable-next-line complexity\n    const _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n      /* Make sure attribute cannot clobber */\n      if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n        return false;\n      }\n\n      /* Allow valid data-* attributes: At least one character after \"-\"\n          (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n          XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n          We don't need to check the value; it's always URI safe. */\n      if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR, lcName)) ; else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName)) ; else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n        if (\n        // First condition does a very basic check if a) it's basically a valid custom element tagname AND\n        // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n        // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck\n        _isBasicCustomElement(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)) ||\n        // Alternative, second condition checks if it's an `is`-attribute, AND\n        // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n        lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))) ; else {\n          return false;\n        }\n        /* Check value is safe. First, is attr inert? If so, is safe */\n      } else if (URI_SAFE_ATTRIBUTES[lcName]) ; else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]) ; else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if (value) {\n        return false;\n      } else ;\n      return true;\n    };\n\n    /**\n     * _isBasicCustomElement\n     * checks if at least one dash is included in tagName, and it's not the first char\n     * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name\n     *\n     * @param {string} tagName name of the tag of the node to sanitize\n     * @returns {boolean} Returns true if the tag name meets the basic criteria for a custom element, otherwise false.\n     */\n    const _isBasicCustomElement = function _isBasicCustomElement(tagName) {\n      return tagName !== 'annotation-xml' && stringMatch(tagName, CUSTOM_ELEMENT);\n    };\n\n    /**\n     * _sanitizeAttributes\n     *\n     * @protect attributes\n     * @protect nodeName\n     * @protect removeAttribute\n     * @protect setAttribute\n     *\n     * @param  {Node} currentNode to sanitize\n     */\n    const _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n      /* Execute a hook if present */\n      _executeHook('beforeSanitizeAttributes', currentNode, null);\n      const {\n        attributes\n      } = currentNode;\n\n      /* Check if we have attributes; if not we might have a text node */\n      if (!attributes) {\n        return;\n      }\n      const hookEvent = {\n        attrName: '',\n        attrValue: '',\n        keepAttr: true,\n        allowedAttributes: ALLOWED_ATTR\n      };\n      let l = attributes.length;\n\n      /* Go backwards over all attributes; safely remove bad ones */\n      while (l--) {\n        const attr = attributes[l];\n        const {\n          name,\n          namespaceURI,\n          value: attrValue\n        } = attr;\n        const lcName = transformCaseFunc(name);\n        let value = name === 'value' ? attrValue : stringTrim(attrValue);\n\n        /* Execute a hook if present */\n        hookEvent.attrName = lcName;\n        hookEvent.attrValue = value;\n        hookEvent.keepAttr = true;\n        hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n        _executeHook('uponSanitizeAttribute', currentNode, hookEvent);\n        value = hookEvent.attrValue;\n\n        /* Work around a security issue with comments inside attributes */\n        if (SAFE_FOR_XML && regExpTest(/((--!?|])>)|<\\/(style|title)/i, value)) {\n          _removeAttribute(name, currentNode);\n          continue;\n        }\n\n        /* Did the hooks approve of the attribute? */\n        if (hookEvent.forceKeepAttr) {\n          continue;\n        }\n\n        /* Remove attribute */\n        _removeAttribute(name, currentNode);\n\n        /* Did the hooks approve of the attribute? */\n        if (!hookEvent.keepAttr) {\n          continue;\n        }\n\n        /* Work around a security issue in jQuery 3.0 */\n        if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\\/>/i, value)) {\n          _removeAttribute(name, currentNode);\n          continue;\n        }\n\n        /* Sanitize attribute content to be template-safe */\n        if (SAFE_FOR_TEMPLATES) {\n          arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n            value = stringReplace(value, expr, ' ');\n          });\n        }\n\n        /* Is `value` valid for this attribute? */\n        const lcTag = transformCaseFunc(currentNode.nodeName);\n        if (!_isValidAttribute(lcTag, lcName, value)) {\n          continue;\n        }\n\n        /* Full DOM Clobbering protection via namespace isolation,\n         * Prefix id and name attributes with `user-content-`\n         */\n        if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {\n          // Remove the attribute with this value\n          _removeAttribute(name, currentNode);\n\n          // Prefix the value and later re-create the attribute with the sanitized value\n          value = SANITIZE_NAMED_PROPS_PREFIX + value;\n        }\n\n        /* Handle attributes that require Trusted Types */\n        if (trustedTypesPolicy && typeof trustedTypes === 'object' && typeof trustedTypes.getAttributeType === 'function') {\n          if (namespaceURI) ; else {\n            switch (trustedTypes.getAttributeType(lcTag, lcName)) {\n              case 'TrustedHTML':\n                {\n                  value = trustedTypesPolicy.createHTML(value);\n                  break;\n                }\n              case 'TrustedScriptURL':\n                {\n                  value = trustedTypesPolicy.createScriptURL(value);\n                  break;\n                }\n            }\n          }\n        }\n\n        /* Handle invalid data-* attribute set by try-catching it */\n        try {\n          if (namespaceURI) {\n            currentNode.setAttributeNS(namespaceURI, name, value);\n          } else {\n            /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n            currentNode.setAttribute(name, value);\n          }\n          if (_isClobbered(currentNode)) {\n            _forceRemove(currentNode);\n          } else {\n            arrayPop(DOMPurify.removed);\n          }\n        } catch (_) {}\n      }\n\n      /* Execute a hook if present */\n      _executeHook('afterSanitizeAttributes', currentNode, null);\n    };\n\n    /**\n     * _sanitizeShadowDOM\n     *\n     * @param  {DocumentFragment} fragment to iterate over recursively\n     */\n    const _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n      let shadowNode = null;\n      const shadowIterator = _createNodeIterator(fragment);\n\n      /* Execute a hook if present */\n      _executeHook('beforeSanitizeShadowDOM', fragment, null);\n      while (shadowNode = shadowIterator.nextNode()) {\n        /* Execute a hook if present */\n        _executeHook('uponSanitizeShadowNode', shadowNode, null);\n\n        /* Sanitize tags and elements */\n        if (_sanitizeElements(shadowNode)) {\n          continue;\n        }\n\n        /* Deep shadow DOM detected */\n        if (shadowNode.content instanceof DocumentFragment) {\n          _sanitizeShadowDOM(shadowNode.content);\n        }\n\n        /* Check attributes, sanitize if necessary */\n        _sanitizeAttributes(shadowNode);\n      }\n\n      /* Execute a hook if present */\n      _executeHook('afterSanitizeShadowDOM', fragment, null);\n    };\n\n    /**\n     * Sanitize\n     * Public method providing core sanitation functionality\n     *\n     * @param {String|Node} dirty string or DOM node\n     * @param {Object} cfg object\n     */\n    // eslint-disable-next-line complexity\n    DOMPurify.sanitize = function (dirty) {\n      let cfg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      let body = null;\n      let importedNode = null;\n      let currentNode = null;\n      let returnNode = null;\n      /* Make sure we have a string to sanitize.\n        DO NOT return early, as this will return the wrong type if\n        the user has requested a DOM object rather than a string */\n      IS_EMPTY_INPUT = !dirty;\n      if (IS_EMPTY_INPUT) {\n        dirty = '<!-->';\n      }\n\n      /* Stringify, in case dirty is an object */\n      if (typeof dirty !== 'string' && !_isNode(dirty)) {\n        if (typeof dirty.toString === 'function') {\n          dirty = dirty.toString();\n          if (typeof dirty !== 'string') {\n            throw typeErrorCreate('dirty is not a string, aborting');\n          }\n        } else {\n          throw typeErrorCreate('toString is not a function');\n        }\n      }\n\n      /* Return dirty HTML if DOMPurify cannot run */\n      if (!DOMPurify.isSupported) {\n        return dirty;\n      }\n\n      /* Assign config vars */\n      if (!SET_CONFIG) {\n        _parseConfig(cfg);\n      }\n\n      /* Clean up removed elements */\n      DOMPurify.removed = [];\n\n      /* Check if dirty is correctly typed for IN_PLACE */\n      if (typeof dirty === 'string') {\n        IN_PLACE = false;\n      }\n      if (IN_PLACE) {\n        /* Do some early pre-sanitization to avoid unsafe root nodes */\n        if (dirty.nodeName) {\n          const tagName = transformCaseFunc(dirty.nodeName);\n          if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n            throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');\n          }\n        }\n      } else if (dirty instanceof Node) {\n        /* If dirty is a DOM element, append to an empty document to avoid\n           elements being stripped by the parser */\n        body = _initDocument('<!---->');\n        importedNode = body.ownerDocument.importNode(dirty, true);\n        if (importedNode.nodeType === NODE_TYPE.element && importedNode.nodeName === 'BODY') {\n          /* Node is already a body, use as is */\n          body = importedNode;\n        } else if (importedNode.nodeName === 'HTML') {\n          body = importedNode;\n        } else {\n          // eslint-disable-next-line unicorn/prefer-dom-node-append\n          body.appendChild(importedNode);\n        }\n      } else {\n        /* Exit directly if we have nothing to do */\n        if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT &&\n        // eslint-disable-next-line unicorn/prefer-includes\n        dirty.indexOf('<') === -1) {\n          return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n        }\n\n        /* Initialize the document to work on */\n        body = _initDocument(dirty);\n\n        /* Check we have a DOM node from the data */\n        if (!body) {\n          return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n        }\n      }\n\n      /* Remove first element node (ours) if FORCE_BODY is set */\n      if (body && FORCE_BODY) {\n        _forceRemove(body.firstChild);\n      }\n\n      /* Get node iterator */\n      const nodeIterator = _createNodeIterator(IN_PLACE ? dirty : body);\n\n      /* Now start iterating over the created document */\n      while (currentNode = nodeIterator.nextNode()) {\n        /* Sanitize tags and elements */\n        if (_sanitizeElements(currentNode)) {\n          continue;\n        }\n\n        /* Shadow DOM detected, sanitize it */\n        if (currentNode.content instanceof DocumentFragment) {\n          _sanitizeShadowDOM(currentNode.content);\n        }\n\n        /* Check attributes, sanitize if necessary */\n        _sanitizeAttributes(currentNode);\n      }\n\n      /* If we sanitized `dirty` in-place, return it. */\n      if (IN_PLACE) {\n        return dirty;\n      }\n\n      /* Return sanitized string or DOM */\n      if (RETURN_DOM) {\n        if (RETURN_DOM_FRAGMENT) {\n          returnNode = createDocumentFragment.call(body.ownerDocument);\n          while (body.firstChild) {\n            // eslint-disable-next-line unicorn/prefer-dom-node-append\n            returnNode.appendChild(body.firstChild);\n          }\n        } else {\n          returnNode = body;\n        }\n        if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmode) {\n          /*\n            AdoptNode() is not used because internal state is not reset\n            (e.g. the past names map of a HTMLFormElement), this is safe\n            in theory but we would rather not risk another attack vector.\n            The state that is cloned by importNode() is explicitly defined\n            by the specs.\n          */\n          returnNode = importNode.call(originalDocument, returnNode, true);\n        }\n        return returnNode;\n      }\n      let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n\n      /* Serialize doctype if allowed */\n      if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n        serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n      }\n\n      /* Sanitize final string template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n          serializedHTML = stringReplace(serializedHTML, expr, ' ');\n        });\n      }\n      return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n    };\n\n    /**\n     * Public method to set the configuration once\n     * setConfig\n     *\n     * @param {Object} cfg configuration object\n     */\n    DOMPurify.setConfig = function () {\n      let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      _parseConfig(cfg);\n      SET_CONFIG = true;\n    };\n\n    /**\n     * Public method to remove the configuration\n     * clearConfig\n     *\n     */\n    DOMPurify.clearConfig = function () {\n      CONFIG = null;\n      SET_CONFIG = false;\n    };\n\n    /**\n     * Public method to check if an attribute value is valid.\n     * Uses last set config, if any. Otherwise, uses config defaults.\n     * isValidAttribute\n     *\n     * @param  {String} tag Tag name of containing element.\n     * @param  {String} attr Attribute name.\n     * @param  {String} value Attribute value.\n     * @return {Boolean} Returns true if `value` is valid. Otherwise, returns false.\n     */\n    DOMPurify.isValidAttribute = function (tag, attr, value) {\n      /* Initialize shared config vars if necessary. */\n      if (!CONFIG) {\n        _parseConfig({});\n      }\n      const lcTag = transformCaseFunc(tag);\n      const lcName = transformCaseFunc(attr);\n      return _isValidAttribute(lcTag, lcName, value);\n    };\n\n    /**\n     * AddHook\n     * Public method to add DOMPurify hooks\n     *\n     * @param {String} entryPoint entry point for the hook to add\n     * @param {Function} hookFunction function to execute\n     */\n    DOMPurify.addHook = function (entryPoint, hookFunction) {\n      if (typeof hookFunction !== 'function') {\n        return;\n      }\n      hooks[entryPoint] = hooks[entryPoint] || [];\n      arrayPush(hooks[entryPoint], hookFunction);\n    };\n\n    /**\n     * RemoveHook\n     * Public method to remove a DOMPurify hook at a given entryPoint\n     * (pops it from the stack of hooks if more are present)\n     *\n     * @param {String} entryPoint entry point for the hook to remove\n     * @return {Function} removed(popped) hook\n     */\n    DOMPurify.removeHook = function (entryPoint) {\n      if (hooks[entryPoint]) {\n        return arrayPop(hooks[entryPoint]);\n      }\n    };\n\n    /**\n     * RemoveHooks\n     * Public method to remove all DOMPurify hooks at a given entryPoint\n     *\n     * @param  {String} entryPoint entry point for the hooks to remove\n     */\n    DOMPurify.removeHooks = function (entryPoint) {\n      if (hooks[entryPoint]) {\n        hooks[entryPoint] = [];\n      }\n    };\n\n    /**\n     * RemoveAllHooks\n     * Public method to remove all DOMPurify hooks\n     */\n    DOMPurify.removeAllHooks = function () {\n      hooks = {};\n    };\n    return DOMPurify;\n  }\n  var purify = createDOMPurify();\n\n  return purify;\n\n}));\n//# sourceMappingURL=purify.js.map\n","/*!\n * EventEmitter2\n * https://github.com/hij1nx/EventEmitter2\n *\n * Copyright (c) 2013 hij1nx\n * Licensed under the MIT license.\n */\n;!function(undefined) {\n  var hasOwnProperty= Object.hasOwnProperty;\n  var isArray = Array.isArray ? Array.isArray : function _isArray(obj) {\n    return Object.prototype.toString.call(obj) === \"[object Array]\";\n  };\n  var defaultMaxListeners = 10;\n  var nextTickSupported= typeof process=='object' && typeof process.nextTick=='function';\n  var symbolsSupported= typeof Symbol==='function';\n  var reflectSupported= typeof Reflect === 'object';\n  var setImmediateSupported= typeof setImmediate === 'function';\n  var _setImmediate= setImmediateSupported ? setImmediate : setTimeout;\n  var ownKeys= symbolsSupported? (reflectSupported && typeof Reflect.ownKeys==='function'? Reflect.ownKeys : function(obj){\n    var arr= Object.getOwnPropertyNames(obj);\n    arr.push.apply(arr, Object.getOwnPropertySymbols(obj));\n    return arr;\n  }) : Object.keys;\n\n  function init() {\n    this._events = {};\n    if (this._conf) {\n      configure.call(this, this._conf);\n    }\n  }\n\n  function configure(conf) {\n    if (conf) {\n      this._conf = conf;\n\n      conf.delimiter && (this.delimiter = conf.delimiter);\n\n      if(conf.maxListeners!==undefined){\n          this._maxListeners= conf.maxListeners;\n      }\n\n      conf.wildcard && (this.wildcard = conf.wildcard);\n      conf.newListener && (this._newListener = conf.newListener);\n      conf.removeListener && (this._removeListener = conf.removeListener);\n      conf.verboseMemoryLeak && (this.verboseMemoryLeak = conf.verboseMemoryLeak);\n      conf.ignoreErrors && (this.ignoreErrors = conf.ignoreErrors);\n\n      if (this.wildcard) {\n        this.listenerTree = {};\n      }\n    }\n  }\n\n  function logPossibleMemoryLeak(count, eventName) {\n    var errorMsg = '(node) warning: possible EventEmitter memory ' +\n        'leak detected. ' + count + ' listeners added. ' +\n        'Use emitter.setMaxListeners() to increase limit.';\n\n    if(this.verboseMemoryLeak){\n      errorMsg += ' Event name: ' + eventName + '.';\n    }\n\n    if(typeof process !== 'undefined' && process.emitWarning){\n      var e = new Error(errorMsg);\n      e.name = 'MaxListenersExceededWarning';\n      e.emitter = this;\n      e.count = count;\n      process.emitWarning(e);\n    } else {\n      console.error(errorMsg);\n\n      if (console.trace){\n        console.trace();\n      }\n    }\n  }\n\n  var toArray = function (a, b, c) {\n    var n = arguments.length;\n    switch (n) {\n      case 0:\n        return [];\n      case 1:\n        return [a];\n      case 2:\n        return [a, b];\n      case 3:\n        return [a, b, c];\n      default:\n        var arr = new Array(n);\n        while (n--) {\n          arr[n] = arguments[n];\n        }\n        return arr;\n    }\n  };\n\n  function toObject(keys, values) {\n    var obj = {};\n    var key;\n    var len = keys.length;\n    var valuesCount = values ? value.length : 0;\n    for (var i = 0; i < len; i++) {\n      key = keys[i];\n      obj[key] = i < valuesCount ? values[i] : undefined;\n    }\n    return obj;\n  }\n\n  function TargetObserver(emitter, target, options) {\n    this._emitter = emitter;\n    this._target = target;\n    this._listeners = {};\n    this._listenersCount = 0;\n\n    var on, off;\n\n    if (options.on || options.off) {\n      on = options.on;\n      off = options.off;\n    }\n\n    if (target.addEventListener) {\n      on = target.addEventListener;\n      off = target.removeEventListener;\n    } else if (target.addListener) {\n      on = target.addListener;\n      off = target.removeListener;\n    } else if (target.on) {\n      on = target.on;\n      off = target.off;\n    }\n\n    if (!on && !off) {\n      throw Error('target does not implement any known event API');\n    }\n\n    if (typeof on !== 'function') {\n      throw TypeError('on method must be a function');\n    }\n\n    if (typeof off !== 'function') {\n      throw TypeError('off method must be a function');\n    }\n\n    this._on = on;\n    this._off = off;\n\n    var _observers= emitter._observers;\n    if(_observers){\n      _observers.push(this);\n    }else{\n      emitter._observers= [this];\n    }\n  }\n\n  Object.assign(TargetObserver.prototype, {\n    subscribe: function(event, localEvent, reducer){\n      var observer= this;\n      var target= this._target;\n      var emitter= this._emitter;\n      var listeners= this._listeners;\n      var handler= function(){\n        var args= toArray.apply(null, arguments);\n        var eventObj= {\n          data: args,\n          name: localEvent,\n          original: event\n        };\n        if(reducer){\n          var result= reducer.call(target, eventObj);\n          if(result!==false){\n            emitter.emit.apply(emitter, [eventObj.name].concat(args))\n          }\n          return;\n        }\n        emitter.emit.apply(emitter, [localEvent].concat(args));\n      };\n\n\n      if(listeners[event]){\n        throw Error('Event \\'' + event + '\\' is already listening');\n      }\n\n      this._listenersCount++;\n\n      if(emitter._newListener && emitter._removeListener && !observer._onNewListener){\n\n        this._onNewListener = function (_event) {\n          if (_event === localEvent && listeners[event] === null) {\n            listeners[event] = handler;\n            observer._on.call(target, event, handler);\n          }\n        };\n\n        emitter.on('newListener', this._onNewListener);\n\n        this._onRemoveListener= function(_event){\n          if(_event === localEvent && !emitter.hasListeners(_event) && listeners[event]){\n            listeners[event]= null;\n            observer._off.call(target, event, handler);\n          }\n        };\n\n        listeners[event]= null;\n\n        emitter.on('removeListener', this._onRemoveListener);\n      }else{\n        listeners[event]= handler;\n        observer._on.call(target, event, handler);\n      }\n    },\n\n    unsubscribe: function(event){\n      var observer= this;\n      var listeners= this._listeners;\n      var emitter= this._emitter;\n      var handler;\n      var events;\n      var off= this._off;\n      var target= this._target;\n      var i;\n\n      if(event && typeof event!=='string'){\n        throw TypeError('event must be a string');\n      }\n\n      function clearRefs(){\n        if(observer._onNewListener){\n          emitter.off('newListener', observer._onNewListener);\n          emitter.off('removeListener', observer._onRemoveListener);\n          observer._onNewListener= null;\n          observer._onRemoveListener= null;\n        }\n        var index= findTargetIndex.call(emitter, observer);\n        emitter._observers.splice(index, 1);\n      }\n\n      if(event){\n        handler= listeners[event];\n        if(!handler) return;\n        off.call(target, event, handler);\n        delete listeners[event];\n        if(!--this._listenersCount){\n          clearRefs();\n        }\n      }else{\n        events= ownKeys(listeners);\n        i= events.length;\n        while(i-->0){\n          event= events[i];\n          off.call(target, event, listeners[event]);\n        }\n        this._listeners= {};\n        this._listenersCount= 0;\n        clearRefs();\n      }\n    }\n  });\n\n  function resolveOptions(options, schema, reducers, allowUnknown) {\n    var computedOptions = Object.assign({}, schema);\n\n    if (!options) return computedOptions;\n\n    if (typeof options !== 'object') {\n      throw TypeError('options must be an object')\n    }\n\n    var keys = Object.keys(options);\n    var length = keys.length;\n    var option, value;\n    var reducer;\n\n    function reject(reason) {\n      throw Error('Invalid \"' + option + '\" option value' + (reason ? '. Reason: ' + reason : ''))\n    }\n\n    for (var i = 0; i < length; i++) {\n      option = keys[i];\n      if (!allowUnknown && !hasOwnProperty.call(schema, option)) {\n        throw Error('Unknown \"' + option + '\" option');\n      }\n      value = options[option];\n      if (value !== undefined) {\n        reducer = reducers[option];\n        computedOptions[option] = reducer ? reducer(value, reject) : value;\n      }\n    }\n    return computedOptions;\n  }\n\n  function constructorReducer(value, reject) {\n    if (typeof value !== 'function' || !value.hasOwnProperty('prototype')) {\n      reject('value must be a constructor');\n    }\n    return value;\n  }\n\n  function makeTypeReducer(types) {\n    var message= 'value must be type of ' + types.join('|');\n    var len= types.length;\n    var firstType= types[0];\n    var secondType= types[1];\n\n    if (len === 1) {\n      return function (v, reject) {\n        if (typeof v === firstType) {\n          return v;\n        }\n        reject(message);\n      }\n    }\n\n    if (len === 2) {\n      return function (v, reject) {\n        var kind= typeof v;\n        if (kind === firstType || kind === secondType) return v;\n        reject(message);\n      }\n    }\n\n    return function (v, reject) {\n      var kind = typeof v;\n      var i = len;\n      while (i-- > 0) {\n        if (kind === types[i]) return v;\n      }\n      reject(message);\n    }\n  }\n\n  var functionReducer= makeTypeReducer(['function']);\n\n  var objectFunctionReducer= makeTypeReducer(['object', 'function']);\n\n  function makeCancelablePromise(Promise, executor, options) {\n    var isCancelable;\n    var callbacks;\n    var timer= 0;\n    var subscriptionClosed;\n\n    var promise = new Promise(function (resolve, reject, onCancel) {\n      options= resolveOptions(options, {\n        timeout: 0,\n        overload: false\n      }, {\n        timeout: function(value, reject){\n          value*= 1;\n          if (typeof value !== 'number' || value < 0 || !Number.isFinite(value)) {\n            reject('timeout must be a positive number');\n          }\n          return value;\n        }\n      });\n\n      isCancelable = !options.overload && typeof Promise.prototype.cancel === 'function' && typeof onCancel === 'function';\n\n      function cleanup() {\n        if (callbacks) {\n          callbacks = null;\n        }\n        if (timer) {\n          clearTimeout(timer);\n          timer = 0;\n        }\n      }\n\n      var _resolve= function(value){\n        cleanup();\n        resolve(value);\n      };\n\n      var _reject= function(err){\n        cleanup();\n        reject(err);\n      };\n\n      if (isCancelable) {\n        executor(_resolve, _reject, onCancel);\n      } else {\n        callbacks = [function(reason){\n          _reject(reason || Error('canceled'));\n        }];\n        executor(_resolve, _reject, function (cb) {\n          if (subscriptionClosed) {\n            throw Error('Unable to subscribe on cancel event asynchronously')\n          }\n          if (typeof cb !== 'function') {\n            throw TypeError('onCancel callback must be a function');\n          }\n          callbacks.push(cb);\n        });\n        subscriptionClosed= true;\n      }\n\n      if (options.timeout > 0) {\n        timer= setTimeout(function(){\n          var reason= Error('timeout');\n          reason.code = 'ETIMEDOUT'\n          timer= 0;\n          promise.cancel(reason);\n          reject(reason);\n        }, options.timeout);\n      }\n    });\n\n    if (!isCancelable) {\n      promise.cancel = function (reason) {\n        if (!callbacks) {\n          return;\n        }\n        var length = callbacks.length;\n        for (var i = 1; i < length; i++) {\n          callbacks[i](reason);\n        }\n        // internal callback to reject the promise\n        callbacks[0](reason);\n        callbacks = null;\n      };\n    }\n\n    return promise;\n  }\n\n  function findTargetIndex(observer) {\n    var observers = this._observers;\n    if(!observers){\n      return -1;\n    }\n    var len = observers.length;\n    for (var i = 0; i < len; i++) {\n      if (observers[i]._target === observer) return i;\n    }\n    return -1;\n  }\n\n  // Attention, function return type now is array, always !\n  // It has zero elements if no any matches found and one or more\n  // elements (leafs) if there are matches\n  //\n  function searchListenerTree(handlers, type, tree, i, typeLength) {\n    if (!tree) {\n      return null;\n    }\n\n    if (i === 0) {\n      var kind = typeof type;\n      if (kind === 'string') {\n        var ns, n, l = 0, j = 0, delimiter = this.delimiter, dl = delimiter.length;\n        if ((n = type.indexOf(delimiter)) !== -1) {\n          ns = new Array(5);\n          do {\n            ns[l++] = type.slice(j, n);\n            j = n + dl;\n          } while ((n = type.indexOf(delimiter, j)) !== -1);\n\n          ns[l++] = type.slice(j);\n          type = ns;\n          typeLength = l;\n        } else {\n          type = [type];\n          typeLength = 1;\n        }\n      } else if (kind === 'object') {\n        typeLength = type.length;\n      } else {\n        type = [type];\n        typeLength = 1;\n      }\n    }\n\n    var listeners= null, branch, xTree, xxTree, isolatedBranch, endReached, currentType = type[i],\n        nextType = type[i + 1], branches, _listeners;\n\n    if (i === typeLength) {\n      //\n      // If at the end of the event(s) list and the tree has listeners\n      // invoke those listeners.\n      //\n\n      if(tree._listeners) {\n        if (typeof tree._listeners === 'function') {\n          handlers && handlers.push(tree._listeners);\n          listeners = [tree];\n        } else {\n          handlers && handlers.push.apply(handlers, tree._listeners);\n          listeners = [tree];\n        }\n      }\n    } else {\n\n      if (currentType === '*') {\n        //\n        // If the event emitted is '*' at this part\n        // or there is a concrete match at this patch\n        //\n        branches = ownKeys(tree);\n        n = branches.length;\n        while (n-- > 0) {\n          branch = branches[n];\n          if (branch !== '_listeners') {\n            _listeners = searchListenerTree(handlers, type, tree[branch], i + 1, typeLength);\n            if (_listeners) {\n              if (listeners) {\n                listeners.push.apply(listeners, _listeners);\n              } else {\n                listeners = _listeners;\n              }\n            }\n          }\n        }\n        return listeners;\n      } else if (currentType === '**') {\n        endReached = (i + 1 === typeLength || (i + 2 === typeLength && nextType === '*'));\n        if (endReached && tree._listeners) {\n          // The next element has a _listeners, add it to the handlers.\n          listeners = searchListenerTree(handlers, type, tree, typeLength, typeLength);\n        }\n\n        branches = ownKeys(tree);\n        n = branches.length;\n        while (n-- > 0) {\n          branch = branches[n];\n          if (branch !== '_listeners') {\n            if (branch === '*' || branch === '**') {\n              if (tree[branch]._listeners && !endReached) {\n                _listeners = searchListenerTree(handlers, type, tree[branch], typeLength, typeLength);\n                if (_listeners) {\n                  if (listeners) {\n                    listeners.push.apply(listeners, _listeners);\n                  } else {\n                    listeners = _listeners;\n                  }\n                }\n              }\n              _listeners = searchListenerTree(handlers, type, tree[branch], i, typeLength);\n            } else if (branch === nextType) {\n              _listeners = searchListenerTree(handlers, type, tree[branch], i + 2, typeLength);\n            } else {\n              // No match on this one, shift into the tree but not in the type array.\n              _listeners = searchListenerTree(handlers, type, tree[branch], i, typeLength);\n            }\n            if (_listeners) {\n              if (listeners) {\n                listeners.push.apply(listeners, _listeners);\n              } else {\n                listeners = _listeners;\n              }\n            }\n          }\n        }\n        return listeners;\n      } else if (tree[currentType]) {\n        listeners = searchListenerTree(handlers, type, tree[currentType], i + 1, typeLength);\n      }\n    }\n\n      xTree = tree['*'];\n    if (xTree) {\n      //\n      // If the listener tree will allow any match for this part,\n      // then recursively explore all branches of the tree\n      //\n      searchListenerTree(handlers, type, xTree, i + 1, typeLength);\n    }\n\n    xxTree = tree['**'];\n    if (xxTree) {\n      if (i < typeLength) {\n        if (xxTree._listeners) {\n          // If we have a listener on a '**', it will catch all, so add its handler.\n          searchListenerTree(handlers, type, xxTree, typeLength, typeLength);\n        }\n\n        // Build arrays of matching next branches and others.\n        branches= ownKeys(xxTree);\n        n= branches.length;\n        while(n-->0){\n          branch= branches[n];\n          if (branch !== '_listeners') {\n            if (branch === nextType) {\n              // We know the next element will match, so jump twice.\n              searchListenerTree(handlers, type, xxTree[branch], i + 2, typeLength);\n            } else if (branch === currentType) {\n              // Current node matches, move into the tree.\n              searchListenerTree(handlers, type, xxTree[branch], i + 1, typeLength);\n            } else {\n              isolatedBranch = {};\n              isolatedBranch[branch] = xxTree[branch];\n              searchListenerTree(handlers, type, {'**': isolatedBranch}, i + 1, typeLength);\n            }\n          }\n        }\n      } else if (xxTree._listeners) {\n        // We have reached the end and still on a '**'\n        searchListenerTree(handlers, type, xxTree, typeLength, typeLength);\n      } else if (xxTree['*'] && xxTree['*']._listeners) {\n        searchListenerTree(handlers, type, xxTree['*'], typeLength, typeLength);\n      }\n    }\n\n    return listeners;\n  }\n\n  function growListenerTree(type, listener, prepend) {\n    var len = 0, j = 0, i, delimiter = this.delimiter, dl= delimiter.length, ns;\n\n    if(typeof type==='string') {\n      if ((i = type.indexOf(delimiter)) !== -1) {\n        ns = new Array(5);\n        do {\n          ns[len++] = type.slice(j, i);\n          j = i + dl;\n        } while ((i = type.indexOf(delimiter, j)) !== -1);\n\n        ns[len++] = type.slice(j);\n      }else{\n        ns= [type];\n        len= 1;\n      }\n    }else{\n      ns= type;\n      len= type.length;\n    }\n\n    //\n    // Looks for two consecutive '**', if so, don't add the event at all.\n    //\n    if (len > 1) {\n      for (i = 0; i + 1 < len; i++) {\n        if (ns[i] === '**' && ns[i + 1] === '**') {\n          return;\n        }\n      }\n    }\n\n\n\n    var tree = this.listenerTree, name;\n\n    for (i = 0; i < len; i++) {\n      name = ns[i];\n\n      tree = tree[name] || (tree[name] = {});\n\n      if (i === len - 1) {\n        if (!tree._listeners) {\n          tree._listeners = listener;\n        } else {\n          if (typeof tree._listeners === 'function') {\n            tree._listeners = [tree._listeners];\n          }\n\n          if (prepend) {\n            tree._listeners.unshift(listener);\n          } else {\n            tree._listeners.push(listener);\n          }\n\n          if (\n              !tree._listeners.warned &&\n              this._maxListeners > 0 &&\n              tree._listeners.length > this._maxListeners\n          ) {\n            tree._listeners.warned = true;\n            logPossibleMemoryLeak.call(this, tree._listeners.length, name);\n          }\n        }\n        return true;\n      }\n    }\n\n    return true;\n  }\n\n  function collectTreeEvents(tree, events, root, asArray){\n     var branches= ownKeys(tree);\n     var i= branches.length;\n     var branch, branchName, path;\n     var hasListeners= tree['_listeners'];\n     var isArrayPath;\n\n     while(i-->0){\n         branchName= branches[i];\n\n         branch= tree[branchName];\n\n         if(branchName==='_listeners'){\n             path= root;\n         }else {\n             path = root ? root.concat(branchName) : [branchName];\n         }\n\n         isArrayPath= asArray || typeof branchName==='symbol';\n\n         hasListeners && events.push(isArrayPath? path : path.join(this.delimiter));\n\n         if(typeof branch==='object'){\n             collectTreeEvents.call(this, branch, events, path, isArrayPath);\n         }\n     }\n\n     return events;\n  }\n\n  function recursivelyGarbageCollect(root) {\n    var keys = ownKeys(root);\n    var i= keys.length;\n    var obj, key, flag;\n    while(i-->0){\n      key = keys[i];\n      obj = root[key];\n\n      if(obj){\n          flag= true;\n          if(key !== '_listeners' && !recursivelyGarbageCollect(obj)){\n             delete root[key];\n          }\n      }\n    }\n\n    return flag;\n  }\n\n  function Listener(emitter, event, listener){\n    this.emitter= emitter;\n    this.event= event;\n    this.listener= listener;\n  }\n\n  Listener.prototype.off= function(){\n    this.emitter.off(this.event, this.listener);\n    return this;\n  };\n\n  function setupListener(event, listener, options){\n      if (options === true) {\n        promisify = true;\n      } else if (options === false) {\n        async = true;\n      } else {\n        if (!options || typeof options !== 'object') {\n          throw TypeError('options should be an object or true');\n        }\n        var async = options.async;\n        var promisify = options.promisify;\n        var nextTick = options.nextTick;\n        var objectify = options.objectify;\n      }\n\n      if (async || nextTick || promisify) {\n        var _listener = listener;\n        var _origin = listener._origin || listener;\n\n        if (nextTick && !nextTickSupported) {\n          throw Error('process.nextTick is not supported');\n        }\n\n        if (promisify === undefined) {\n          promisify = listener.constructor.name === 'AsyncFunction';\n        }\n\n        listener = function () {\n          var args = arguments;\n          var context = this;\n          var event = this.event;\n\n          return promisify ? (nextTick ? Promise.resolve() : new Promise(function (resolve) {\n            _setImmediate(resolve);\n          }).then(function () {\n            context.event = event;\n            return _listener.apply(context, args)\n          })) : (nextTick ? process.nextTick : _setImmediate)(function () {\n            context.event = event;\n            _listener.apply(context, args)\n          });\n        };\n\n        listener._async = true;\n        listener._origin = _origin;\n      }\n\n    return [listener, objectify? new Listener(this, event, listener): this];\n  }\n\n  function EventEmitter(conf) {\n    this._events = {};\n    this._newListener = false;\n    this._removeListener = false;\n    this.verboseMemoryLeak = false;\n    configure.call(this, conf);\n  }\n\n  EventEmitter.EventEmitter2 = EventEmitter; // backwards compatibility for exporting EventEmitter property\n\n  EventEmitter.prototype.listenTo= function(target, events, options){\n    if(typeof target!=='object'){\n      throw TypeError('target musts be an object');\n    }\n\n    var emitter= this;\n\n    options = resolveOptions(options, {\n      on: undefined,\n      off: undefined,\n      reducers: undefined\n    }, {\n      on: functionReducer,\n      off: functionReducer,\n      reducers: objectFunctionReducer\n    });\n\n    function listen(events){\n      if(typeof events!=='object'){\n        throw TypeError('events must be an object');\n      }\n\n      var reducers= options.reducers;\n      var index= findTargetIndex.call(emitter, target);\n      var observer;\n\n      if(index===-1){\n        observer= new TargetObserver(emitter, target, options);\n      }else{\n        observer= emitter._observers[index];\n      }\n\n      var keys= ownKeys(events);\n      var len= keys.length;\n      var event;\n      var isSingleReducer= typeof reducers==='function';\n\n      for(var i=0; i<len; i++){\n        event= keys[i];\n        observer.subscribe(\n            event,\n            events[event] || event,\n            isSingleReducer ? reducers : reducers && reducers[event]\n        );\n      }\n    }\n\n    isArray(events)?\n        listen(toObject(events)) :\n        (typeof events==='string'? listen(toObject(events.split(/\\s+/))): listen(events));\n\n    return this;\n  };\n\n  EventEmitter.prototype.stopListeningTo = function (target, event) {\n    var observers = this._observers;\n\n    if(!observers){\n      return false;\n    }\n\n    var i = observers.length;\n    var observer;\n    var matched= false;\n\n    if(target && typeof target!=='object'){\n      throw TypeError('target should be an object');\n    }\n\n    while (i-- > 0) {\n      observer = observers[i];\n      if (!target || observer._target === target) {\n        observer.unsubscribe(event);\n        matched= true;\n      }\n    }\n\n    return matched;\n  };\n\n  // By default EventEmitters will print a warning if more than\n  // 10 listeners are added to it. This is a useful default which\n  // helps finding memory leaks.\n  //\n  // Obviously not all Emitters should be limited to 10. This function allows\n  // that to be increased. Set to zero for unlimited.\n\n  EventEmitter.prototype.delimiter = '.';\n\n  EventEmitter.prototype.setMaxListeners = function(n) {\n    if (n !== undefined) {\n      this._maxListeners = n;\n      if (!this._conf) this._conf = {};\n      this._conf.maxListeners = n;\n    }\n  };\n\n  EventEmitter.prototype.getMaxListeners = function() {\n    return this._maxListeners;\n  };\n\n  EventEmitter.prototype.event = '';\n\n  EventEmitter.prototype.once = function(event, fn, options) {\n    return this._once(event, fn, false, options);\n  };\n\n  EventEmitter.prototype.prependOnceListener = function(event, fn, options) {\n    return this._once(event, fn, true, options);\n  };\n\n  EventEmitter.prototype._once = function(event, fn, prepend, options) {\n    return this._many(event, 1, fn, prepend, options);\n  };\n\n  EventEmitter.prototype.many = function(event, ttl, fn, options) {\n    return this._many(event, ttl, fn, false, options);\n  };\n\n  EventEmitter.prototype.prependMany = function(event, ttl, fn, options) {\n    return this._many(event, ttl, fn, true, options);\n  };\n\n  EventEmitter.prototype._many = function(event, ttl, fn, prepend, options) {\n    var self = this;\n\n    if (typeof fn !== 'function') {\n      throw new Error('many only accepts instances of Function');\n    }\n\n    function listener() {\n      if (--ttl === 0) {\n        self.off(event, listener);\n      }\n      return fn.apply(this, arguments);\n    }\n\n    listener._origin = fn;\n\n    return this._on(event, listener, prepend, options);\n  };\n\n  EventEmitter.prototype.emit = function() {\n    if (!this._events && !this._all) {\n      return false;\n    }\n\n    this._events || init.call(this);\n\n    var type = arguments[0], ns, wildcard= this.wildcard;\n    var args,l,i,j, containsSymbol;\n\n    if (type === 'newListener' && !this._newListener) {\n      if (!this._events.newListener) {\n        return false;\n      }\n    }\n\n    if (wildcard) {\n      ns= type;\n      if(type!=='newListener' && type!=='removeListener'){\n        if (typeof type === 'object') {\n          l = type.length;\n          if (symbolsSupported) {\n            for (i = 0; i < l; i++) {\n              if (typeof type[i] === 'symbol') {\n                containsSymbol = true;\n                break;\n              }\n            }\n          }\n          if (!containsSymbol) {\n            type = type.join(this.delimiter);\n          }\n        }\n      }\n    }\n\n    var al = arguments.length;\n    var handler;\n\n    if (this._all && this._all.length) {\n      handler = this._all.slice();\n\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler[i].call(this, type);\n          break;\n        case 2:\n          handler[i].call(this, type, arguments[1]);\n          break;\n        case 3:\n          handler[i].call(this, type, arguments[1], arguments[2]);\n          break;\n        default:\n          handler[i].apply(this, arguments);\n        }\n      }\n    }\n\n    if (wildcard) {\n      handler = [];\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0, l);\n    } else {\n      handler = this._events[type];\n      if (typeof handler === 'function') {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler.call(this);\n          break;\n        case 2:\n          handler.call(this, arguments[1]);\n          break;\n        case 3:\n          handler.call(this, arguments[1], arguments[2]);\n          break;\n        default:\n          args = new Array(al - 1);\n          for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n          handler.apply(this, args);\n        }\n        return true;\n      } else if (handler) {\n        // need to make copy of handlers because list can change in the middle\n        // of emit call\n        handler = handler.slice();\n      }\n    }\n\n    if (handler && handler.length) {\n      if (al > 3) {\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n      }\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler[i].call(this);\n          break;\n        case 2:\n          handler[i].call(this, arguments[1]);\n          break;\n        case 3:\n          handler[i].call(this, arguments[1], arguments[2]);\n          break;\n        default:\n          handler[i].apply(this, args);\n        }\n      }\n      return true;\n    } else if (!this.ignoreErrors && !this._all && type === 'error') {\n      if (arguments[1] instanceof Error) {\n        throw arguments[1]; // Unhandled 'error' event\n      } else {\n        throw new Error(\"Uncaught, unspecified 'error' event.\");\n      }\n    }\n\n    return !!this._all;\n  };\n\n  EventEmitter.prototype.emitAsync = function() {\n    if (!this._events && !this._all) {\n      return false;\n    }\n\n    this._events || init.call(this);\n\n    var type = arguments[0], wildcard= this.wildcard, ns, containsSymbol;\n    var args,l,i,j;\n\n    if (type === 'newListener' && !this._newListener) {\n        if (!this._events.newListener) { return Promise.resolve([false]); }\n    }\n\n    if (wildcard) {\n      ns= type;\n      if(type!=='newListener' && type!=='removeListener'){\n        if (typeof type === 'object') {\n          l = type.length;\n          if (symbolsSupported) {\n            for (i = 0; i < l; i++) {\n              if (typeof type[i] === 'symbol') {\n                containsSymbol = true;\n                break;\n              }\n            }\n          }\n          if (!containsSymbol) {\n            type = type.join(this.delimiter);\n          }\n        }\n      }\n    }\n\n    var promises= [];\n\n    var al = arguments.length;\n    var handler;\n\n    if (this._all) {\n      for (i = 0, l = this._all.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          promises.push(this._all[i].call(this, type));\n          break;\n        case 2:\n          promises.push(this._all[i].call(this, type, arguments[1]));\n          break;\n        case 3:\n          promises.push(this._all[i].call(this, type, arguments[1], arguments[2]));\n          break;\n        default:\n          promises.push(this._all[i].apply(this, arguments));\n        }\n      }\n    }\n\n    if (wildcard) {\n      handler = [];\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\n    } else {\n      handler = this._events[type];\n    }\n\n    if (typeof handler === 'function') {\n      this.event = type;\n      switch (al) {\n      case 1:\n        promises.push(handler.call(this));\n        break;\n      case 2:\n        promises.push(handler.call(this, arguments[1]));\n        break;\n      case 3:\n        promises.push(handler.call(this, arguments[1], arguments[2]));\n        break;\n      default:\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n        promises.push(handler.apply(this, args));\n      }\n    } else if (handler && handler.length) {\n      handler = handler.slice();\n      if (al > 3) {\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n      }\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          promises.push(handler[i].call(this));\n          break;\n        case 2:\n          promises.push(handler[i].call(this, arguments[1]));\n          break;\n        case 3:\n          promises.push(handler[i].call(this, arguments[1], arguments[2]));\n          break;\n        default:\n          promises.push(handler[i].apply(this, args));\n        }\n      }\n    } else if (!this.ignoreErrors && !this._all && type === 'error') {\n      if (arguments[1] instanceof Error) {\n        return Promise.reject(arguments[1]); // Unhandled 'error' event\n      } else {\n        return Promise.reject(\"Uncaught, unspecified 'error' event.\");\n      }\n    }\n\n    return Promise.all(promises);\n  };\n\n  EventEmitter.prototype.on = function(type, listener, options) {\n    return this._on(type, listener, false, options);\n  };\n\n  EventEmitter.prototype.prependListener = function(type, listener, options) {\n    return this._on(type, listener, true, options);\n  };\n\n  EventEmitter.prototype.onAny = function(fn) {\n    return this._onAny(fn, false);\n  };\n\n  EventEmitter.prototype.prependAny = function(fn) {\n    return this._onAny(fn, true);\n  };\n\n  EventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n  EventEmitter.prototype._onAny = function(fn, prepend){\n    if (typeof fn !== 'function') {\n      throw new Error('onAny only accepts instances of Function');\n    }\n\n    if (!this._all) {\n      this._all = [];\n    }\n\n    // Add the function to the event listener collection.\n    if(prepend){\n      this._all.unshift(fn);\n    }else{\n      this._all.push(fn);\n    }\n\n    return this;\n  };\n\n  EventEmitter.prototype._on = function(type, listener, prepend, options) {\n    if (typeof type === 'function') {\n      this._onAny(type, listener);\n      return this;\n    }\n\n    if (typeof listener !== 'function') {\n      throw new Error('on only accepts instances of Function');\n    }\n    this._events || init.call(this);\n\n    var returnValue= this, temp;\n\n    if (options !== undefined) {\n      temp = setupListener.call(this, type, listener, options);\n      listener = temp[0];\n      returnValue = temp[1];\n    }\n\n    // To avoid recursion in the case that type == \"newListeners\"! Before\n    // adding it to the listeners, first emit \"newListeners\".\n    if (this._newListener) {\n      this.emit('newListener', type, listener);\n    }\n\n    if (this.wildcard) {\n      growListenerTree.call(this, type, listener, prepend);\n      return returnValue;\n    }\n\n    if (!this._events[type]) {\n      // Optimize the case of one listener. Don't need the extra array object.\n      this._events[type] = listener;\n    } else {\n      if (typeof this._events[type] === 'function') {\n        // Change to array.\n        this._events[type] = [this._events[type]];\n      }\n\n      // If we've already got an array, just add\n      if(prepend){\n        this._events[type].unshift(listener);\n      }else{\n        this._events[type].push(listener);\n      }\n\n      // Check for listener leak\n      if (\n        !this._events[type].warned &&\n        this._maxListeners > 0 &&\n        this._events[type].length > this._maxListeners\n      ) {\n        this._events[type].warned = true;\n        logPossibleMemoryLeak.call(this, this._events[type].length, type);\n      }\n    }\n\n    return returnValue;\n  };\n\n  EventEmitter.prototype.off = function(type, listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('removeListener only takes instances of Function');\n    }\n\n    var handlers,leafs=[];\n\n    if(this.wildcard) {\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\n      if(!leafs) return this;\n    } else {\n      // does not use listeners(), so no side effect of creating _events[type]\n      if (!this._events[type]) return this;\n      handlers = this._events[type];\n      leafs.push({_listeners:handlers});\n    }\n\n    for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\n      var leaf = leafs[iLeaf];\n      handlers = leaf._listeners;\n      if (isArray(handlers)) {\n\n        var position = -1;\n\n        for (var i = 0, length = handlers.length; i < length; i++) {\n          if (handlers[i] === listener ||\n            (handlers[i].listener && handlers[i].listener === listener) ||\n            (handlers[i]._origin && handlers[i]._origin === listener)) {\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0) {\n          continue;\n        }\n\n        if(this.wildcard) {\n          leaf._listeners.splice(position, 1);\n        }\n        else {\n          this._events[type].splice(position, 1);\n        }\n\n        if (handlers.length === 0) {\n          if(this.wildcard) {\n            delete leaf._listeners;\n          }\n          else {\n            delete this._events[type];\n          }\n        }\n        if (this._removeListener)\n          this.emit(\"removeListener\", type, listener);\n\n        return this;\n      }\n      else if (handlers === listener ||\n        (handlers.listener && handlers.listener === listener) ||\n        (handlers._origin && handlers._origin === listener)) {\n        if(this.wildcard) {\n          delete leaf._listeners;\n        }\n        else {\n          delete this._events[type];\n        }\n        if (this._removeListener)\n          this.emit(\"removeListener\", type, listener);\n      }\n    }\n\n    this.listenerTree && recursivelyGarbageCollect(this.listenerTree);\n\n    return this;\n  };\n\n  EventEmitter.prototype.offAny = function(fn) {\n    var i = 0, l = 0, fns;\n    if (fn && this._all && this._all.length > 0) {\n      fns = this._all;\n      for(i = 0, l = fns.length; i < l; i++) {\n        if(fn === fns[i]) {\n          fns.splice(i, 1);\n          if (this._removeListener)\n            this.emit(\"removeListenerAny\", fn);\n          return this;\n        }\n      }\n    } else {\n      fns = this._all;\n      if (this._removeListener) {\n        for(i = 0, l = fns.length; i < l; i++)\n          this.emit(\"removeListenerAny\", fns[i]);\n      }\n      this._all = [];\n    }\n    return this;\n  };\n\n  EventEmitter.prototype.removeListener = EventEmitter.prototype.off;\n\n  EventEmitter.prototype.removeAllListeners = function (type) {\n    if (type === undefined) {\n      !this._events || init.call(this);\n      return this;\n    }\n\n    if (this.wildcard) {\n      var leafs = searchListenerTree.call(this, null, type, this.listenerTree, 0), leaf, i;\n      if (!leafs) return this;\n      for (i = 0; i < leafs.length; i++) {\n        leaf = leafs[i];\n        leaf._listeners = null;\n      }\n      this.listenerTree && recursivelyGarbageCollect(this.listenerTree);\n    } else if (this._events) {\n      this._events[type] = null;\n    }\n    return this;\n  };\n\n  EventEmitter.prototype.listeners = function (type) {\n    var _events = this._events;\n    var keys, listeners, allListeners;\n    var i;\n    var listenerTree;\n\n    if (type === undefined) {\n      if (this.wildcard) {\n        throw Error('event name required for wildcard emitter');\n      }\n\n      if (!_events) {\n        return [];\n      }\n\n      keys = ownKeys(_events);\n      i = keys.length;\n      allListeners = [];\n      while (i-- > 0) {\n        listeners = _events[keys[i]];\n        if (typeof listeners === 'function') {\n          allListeners.push(listeners);\n        } else {\n          allListeners.push.apply(allListeners, listeners);\n        }\n      }\n      return allListeners;\n    } else {\n      if (this.wildcard) {\n        listenerTree= this.listenerTree;\n        if(!listenerTree) return [];\n        var handlers = [];\n        var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n        searchListenerTree.call(this, handlers, ns, listenerTree, 0);\n        return handlers;\n      }\n\n      if (!_events) {\n        return [];\n      }\n\n      listeners = _events[type];\n\n      if (!listeners) {\n        return [];\n      }\n      return typeof listeners === 'function' ? [listeners] : listeners;\n    }\n  };\n\n  EventEmitter.prototype.eventNames = function(nsAsArray){\n    var _events= this._events;\n    return this.wildcard? collectTreeEvents.call(this, this.listenerTree, [], null, nsAsArray) : (_events? ownKeys(_events) : []);\n  };\n\n  EventEmitter.prototype.listenerCount = function(type) {\n    return this.listeners(type).length;\n  };\n\n  EventEmitter.prototype.hasListeners = function (type) {\n    if (this.wildcard) {\n      var handlers = [];\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      searchListenerTree.call(this, handlers, ns, this.listenerTree, 0);\n      return handlers.length > 0;\n    }\n\n    var _events = this._events;\n    var _all = this._all;\n\n    return !!(_all && _all.length || _events && (type === undefined ? ownKeys(_events).length : _events[type]));\n  };\n\n  EventEmitter.prototype.listenersAny = function() {\n\n    if(this._all) {\n      return this._all;\n    }\n    else {\n      return [];\n    }\n\n  };\n\n  EventEmitter.prototype.waitFor = function (event, options) {\n    var self = this;\n    var type = typeof options;\n    if (type === 'number') {\n      options = {timeout: options};\n    } else if (type === 'function') {\n      options = {filter: options};\n    }\n\n    options= resolveOptions(options, {\n      timeout: 0,\n      filter: undefined,\n      handleError: false,\n      Promise: Promise,\n      overload: false\n    }, {\n      filter: functionReducer,\n      Promise: constructorReducer\n    });\n\n    return makeCancelablePromise(options.Promise, function (resolve, reject, onCancel) {\n      function listener() {\n        var filter= options.filter;\n        if (filter && !filter.apply(self, arguments)) {\n          return;\n        }\n        self.off(event, listener);\n        if (options.handleError) {\n          var err = arguments[0];\n          err ? reject(err) : resolve(toArray.apply(null, arguments).slice(1));\n        } else {\n          resolve(toArray.apply(null, arguments));\n        }\n      }\n\n      onCancel(function(){\n        self.off(event, listener);\n      });\n\n      self._on(event, listener, false);\n    }, {\n      timeout: options.timeout,\n      overload: options.overload\n    })\n  };\n\n  function once(emitter, name, options) {\n    options= resolveOptions(options, {\n      Promise: Promise,\n      timeout: 0,\n      overload: false\n    }, {\n      Promise: constructorReducer\n    });\n\n    var _Promise= options.Promise;\n\n    return makeCancelablePromise(_Promise, function(resolve, reject, onCancel){\n      var handler;\n      if (typeof emitter.addEventListener === 'function') {\n        handler=  function () {\n          resolve(toArray.apply(null, arguments));\n        };\n\n        onCancel(function(){\n          emitter.removeEventListener(name, handler);\n        });\n\n        emitter.addEventListener(\n            name,\n            handler,\n            {once: true}\n        );\n        return;\n      }\n\n      var eventListener = function(){\n        errorListener && emitter.removeListener('error', errorListener);\n        resolve(toArray.apply(null, arguments));\n      };\n\n      var errorListener;\n\n      if (name !== 'error') {\n        errorListener = function (err){\n          emitter.removeListener(name, eventListener);\n          reject(err);\n        };\n\n        emitter.once('error', errorListener);\n      }\n\n      onCancel(function(){\n        errorListener && emitter.removeListener('error', errorListener);\n        emitter.removeListener(name, eventListener);\n      });\n\n      emitter.once(name, eventListener);\n    }, {\n      timeout: options.timeout,\n      overload: options.overload\n    });\n  }\n\n  var prototype= EventEmitter.prototype;\n\n  Object.defineProperties(EventEmitter, {\n    defaultMaxListeners: {\n      get: function () {\n        return prototype._maxListeners;\n      },\n      set: function (n) {\n        if (typeof n !== 'number' || n < 0 || Number.isNaN(n)) {\n          throw TypeError('n must be a non-negative number')\n        }\n        prototype._maxListeners = n;\n      },\n      enumerable: true\n    },\n    once: {\n      value: once,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  Object.defineProperties(prototype, {\n      _maxListeners: {\n          value: defaultMaxListeners,\n          writable: true,\n          configurable: true\n      },\n      _observers: {value: null, writable: true, configurable: true}\n  });\n\n  if (typeof define === 'function' && define.amd) {\n     // AMD. Register as an anonymous module.\n    define(function() {\n      return EventEmitter;\n    });\n  } else if (typeof exports === 'object') {\n    // CommonJS\n    module.exports = EventEmitter;\n  }\n  else {\n    // global for any kind of environment.\n    var _global= new Function('','return this')();\n    _global.EventEmitter2 = EventEmitter;\n  }\n}();\n","\n        var result = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/less-loader/dist/cjs.js!./style.less\");\n\n        if (result && result.__esModule) {\n            result = result.default;\n        }\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","import { storageInterface } from './storageInterface';\n\ndeclare let i18n: string[];\n\nexport const webextension: storageInterface = {\n  async set(key: string, value: string): Promise<void> {\n    const obj = {} as any;\n    obj[key] = value;\n    return new Promise((resolve, reject) => {\n      getStorage(key).set(obj, function () {\n        if (chrome.runtime.lastError) {\n          reject(chrome.runtime.lastError);\n          return;\n        }\n        resolve();\n      });\n    });\n  },\n\n  async get(key: string): Promise<any> {\n    return new Promise((resolve, reject) => {\n      getStorage(key).get(key, function (results) {\n        if (chrome.runtime.lastError) {\n          reject(chrome.runtime.lastError);\n          return;\n        }\n        resolve(results[key]);\n      });\n    });\n  },\n\n  async remove(key: string): Promise<void> {\n    return new Promise((resolve, reject) => {\n      getStorage(key).remove(key, function () {\n        if (chrome.runtime.lastError) {\n          reject(chrome.runtime.lastError);\n          return;\n        }\n        resolve();\n      });\n    });\n  },\n\n  async list(type = 'local'): Promise<any> {\n    return new Promise((resolve, reject) => {\n      if (type === 'local') {\n        chrome.storage.local.get(null, function (results) {\n          resolve(results);\n        });\n      } else {\n        chrome.storage.sync.get(null, function (results) {\n          resolve(results);\n        });\n      }\n    });\n  },\n\n  async addStyle(css) {\n    try {\n      const style = document.createElement('style');\n      style.textContent = css;\n      (document.head || document.body || document.documentElement || document).appendChild(style);\n    } catch (e) {\n      console.log(`Could not add css:${e}`);\n    }\n  },\n\n  version() {\n    return chrome.runtime.getManifest().version;\n  },\n\n  lang(selector, args) {\n    if (api.settings.get('forceEn') && typeof i18n !== 'undefined') {\n      let message = i18n[selector];\n      if (typeof args !== 'undefined') {\n        for (let argIndex = 0; argIndex < args.length; argIndex++) {\n          message = message.replace(`$${argIndex + 1}`, args[argIndex]);\n        }\n      }\n      return message;\n    }\n    // @ts-ignore\n    return chrome.i18n.getMessage(selector, args);\n  },\n\n  langDirection() {\n    try {\n      const lang = chrome.i18n.getUILanguage();\n      if (/^(ar)(-|$)/i.test(lang) && !api.settings.get('forceEn')) {\n        return 'rtl';\n      }\n    } catch (error) {\n      con.error(error);\n    }\n    return 'ltr';\n  },\n\n  assetUrl(filename) {\n    return chrome.runtime.getURL(`assets/${filename}`);\n  },\n\n  injectCssResource(res, head) {\n    alert('injectCssResource not supported in webextension');\n  },\n\n  injectjsResource(res, head) {\n    const s = document.createElement('script');\n    s.src = chrome.runtime.getURL(`vendor/${res}`);\n    s.onload = function () {\n      // @ts-ignore\n      this.remove();\n    };\n    head.get(0).appendChild(s);\n  },\n\n  addProxyScriptToTag(tag, name) {\n    tag.src = chrome.runtime.getURL(`/content/proxy/proxy_${name}.js`);\n    return tag;\n  },\n\n  updateDom(head) {\n    const s = document.createElement('script');\n    s.text = `\n        document.getElementsByTagName('head')[0].onclick = function(e){\n          try{\n            componentHandler.upgradeDom();\n          }catch(e){\n            console.log(e);\n            setTimeout(function(){\n              componentHandler.upgradeDom();\n            },500);\n          }\n        }`;\n    s.onload = function () {\n      // @ts-ignore\n      this.remove();\n    };\n    head.get(0).appendChild(s);\n  },\n\n  storageOnChanged(cb) {\n    chrome.storage.onChanged.addListener(cb);\n  },\n};\n\nfunction getStorage(key: string) {\n  if (utils.syncRegex.test(key)) {\n    return chrome.storage.sync;\n  }\n  return chrome.storage.local;\n}\n","import { sendMessageI, responseMessageI } from '../messageInterface';\nimport { requestInterface } from './requestInterface';\n\nexport const requestApi: requestInterface = {\n  async xhr(method, url) {\n    if (typeof requestApi.sendMessage !== 'undefined') {\n      return requestApi.sendMessage({ name: 'xhr', method, url }).then(xhr => {\n        if (xhr.status === 429) throw 'Rate limit Timeout';\n        if (xhr.status === 0) throw xhr.responseText;\n        return xhr;\n      });\n    }\n    throw 'Could not send xhr';\n  },\n\n  async sendMessage(message: sendMessageI): Promise<any> {\n    return new Promise((resolve, reject) => {\n      chrome.runtime.sendMessage(message, function (response: responseMessageI) {\n        resolve(response);\n      });\n    });\n  },\n\n  notification(options) {\n    this.sendMessage({\n      name: 'notification',\n      options,\n    });\n  },\n  database(call, param) {\n    return this.sendMessage({\n      name: 'database',\n      options: {\n        call,\n        param,\n      },\n    });\n  },\n};\n","import { reactive, ref } from 'vue';\n\nexport const settingsObj = {\n  options: reactive({\n    autoTrackingModeanime: 'video',\n    readerTracking: true,\n    askBefore: true,\n    autoTrackingModemanga: 'instant',\n    enablePages: {},\n    forceEn: false,\n    rpc: true,\n    presenceLargeImage: 'cover',\n    presenceShowButtons: true,\n    presenceShowMalsync: false,\n    userscriptModeButton: false,\n    syncMode: 'MAL',\n    syncModeSimkl: 'MAL',\n    localSync: true,\n    delay: 0,\n    videoDuration: 85,\n    malTags: false,\n    malContinue: true,\n    malResume: true,\n    usedPage: true,\n    epPredictions: true,\n\n    theme: 'auto',\n    themeSidebars: true,\n    themeColor: '#000000',\n    themeOpacity: 100,\n    themeImage: '',\n\n    minimalWindow: false,\n    posLeft: 'left',\n    miniMALonMal: false,\n    floatButtonStealth: false,\n    minimizeBigPopup: false,\n    floatButtonCorrection: true,\n    floatButtonHide: false,\n    autoCloseMinimal: false,\n    outWay: true,\n    miniMalWidth: '550px',\n    miniMalHeight: '90%',\n    malThumbnail: 100,\n    friendScore: true,\n    loadPTWForProgress: false,\n\n    quicklinks: [\n      'Aniwave',\n      'Crunchyroll',\n      'Gogoanime',\n      'Mangadex',\n      'MangaNato',\n      'MangaFox',\n      'MangaSee',\n      'MangaFire',\n      'YugenAnime',\n      'HiAnime',\n      'Hulu',\n      'Netflix',\n      'Hidive',\n      'VIZ',\n      'MangaPlus',\n      'MangaReader',\n      'ComicK',\n    ],\n    quicklinksPosition: 'default',\n\n    autofull: false,\n    autoresume: false,\n    autoNextEp: false,\n    highlightAllEp: false,\n    checkForFiller: true,\n    crashReport: true,\n\n    introSkip: 85,\n    introSkipFwd: [17, 39],\n    introSkipBwd: [17, 37],\n    nextEpShort: [],\n    correctionShort: [67],\n    syncShort: [],\n\n    progressInterval: 120,\n    progressIntervalDefaultAnime: 'en/sub',\n    progressIntervalDefaultManga: 'en/sub',\n    progressNotificationsAnime: true,\n    progressNotificationsManga: true,\n    notificationsSticky: true,\n\n    bookMarksList: false,\n\n    customDomains: [],\n\n    anilistUpdateUi: true,\n\n    anilistToken: '',\n    anilistOptions: {\n      displayAdultContent: true,\n      scoreFormat: 'POINT_10',\n    },\n    kitsuToken: '',\n    kitsuOptions: {\n      titleLanguagePreference: 'canonical',\n      sfwFilter: false,\n      ratingSystem: 'regular',\n    },\n    simklToken: '',\n\n    malToken: '',\n    malRefresh: '',\n\n    shikiToken: '',\n    shikiOptions: {\n      locale: 'ru',\n    },\n  }),\n\n  debounceArray: {},\n\n  isInit: ref(false),\n\n  async init() {\n    const tempSettings = [];\n    for (const key in this.options) {\n      const store = await api.storage.get(`settings/${key}`);\n      if (typeof store !== 'undefined') {\n        this.options[key] = store;\n        tempSettings[key] = /(token|refresh)/i.test(key) && store ? '********' : store;\n      }\n    }\n    con.log('Settings', tempSettings);\n\n    let rateDebounce;\n\n    api.storage.storageOnChanged((changes, namespace) => {\n      if (namespace === 'sync') {\n        for (const key in changes) {\n          const storageChange = changes[key];\n          if (/^settings\\//i.test(key)) {\n            this.options[key.replace('settings/', '')] = storageChange.newValue;\n            con.info(`Update ${key} option to ${JSON.stringify(storageChange.newValue, null, 2)}`);\n          }\n        }\n      }\n      if (namespace === 'local' && changes.rateLimit) {\n        try {\n          clearTimeout(rateDebounce);\n          if (changes.rateLimit.newValue) {\n            con.log('Rate limited');\n            if (!$('.type-rate').length) {\n              utils.flashm('Rate limited. Retrying in a moment', {\n                error: true,\n                type: 'rate',\n                permanent: true,\n              });\n            }\n          } else {\n            rateDebounce = setTimeout(() => {\n              con.log('No Rate limited');\n              $('.type-rate').remove();\n            }, 5000);\n          }\n        } catch (e) {\n          con.error(e);\n        }\n      }\n    });\n\n    this.isInit.value = true;\n\n    return this;\n  },\n\n  get(name: string) {\n    if (!this.isInit.value) throw 'Settings not initialized';\n    return this.options[name];\n  },\n\n  set(name: string, value: any) {\n    if (!Object.prototype.hasOwnProperty.call(this.options, name)) {\n      const err = Error(`${name} is not a defined option`);\n      con.error(err);\n      throw err;\n    }\n\n    this.options[name] = value;\n    return api.storage.set(`settings/${name}`, value);\n  },\n\n  setDebounce(name: string, value: any) {\n    this.options[name] = value;\n    clearTimeout(this.debounceArray[name]);\n    this.debounceArray[name] = setTimeout(() => {\n      this.set(name, value);\n      delete this.debounceArray[name];\n    }, 1000);\n  },\n\n  async getAsync(name: string) {\n    const value = await api.storage.get(`settings/${name}`);\n    if (typeof value === 'undefined' && typeof this.options[name] !== 'undefined')\n      return this.options[name];\n    return value;\n  },\n};\n","import { webextension } from './storage/webextension';\nimport { requestApi } from './request/requestWebextension';\nimport { settingsObj } from './settings';\n\nexport const storage = webextension;\n\nexport const request = requestApi;\n\nexport const settings = settingsObj;\n\nexport const type = 'webextension';\n","/* eslint-disable no-bitwise */\n\nexport const log = (function () {\n  return Function.prototype.bind.call(\n    console.log,\n    console,\n    '%cMAL-Sync',\n    'background-color: #2e51a2; color: white; padding: 2px 10px; border-radius: 3px;',\n  );\n})();\n\nexport const error = (function () {\n  return Function.prototype.bind.call(\n    console.error,\n    console,\n    '%cMAL-Sync',\n    'background-color: #8f0000; color: white; padding: 2px 10px; border-radius: 3px;',\n  );\n})();\n\nexport const info = (function () {\n  return Function.prototype.bind.call(\n    console.info,\n    console,\n    '%cMAL-Sync',\n    'background-color: wheat; color: black; padding: 2px 10px; border-radius: 3px;',\n  );\n})();\n\nexport const debug = (function () {\n  return Function.prototype.bind.call(\n    console.debug,\n    console,\n    '%cMAL-Sync',\n    'background-color: steelblue; color: black; padding: 2px 10px; border-radius: 3px;',\n  );\n})();\n\nexport const m = (name, color = '', blocks: { name: string; style: string }[] = []) => {\n  let fontColor = 'white';\n  if (!color) color = stringToColour(name);\n  if (color[0] === '#') fontColor = getColorByBgColor(color);\n  const style = `background-color: ${color}; color: ${fontColor}; padding: 2px 10px; border-radius: 3px; margin-left: -5px; border-left: 1px solid white;`;\n  blocks.push({\n    name,\n    style,\n  });\n\n  const temp: any = {};\n\n  temp.m = (name2, color2 = '') => {\n    return m(name2, color2, [...blocks]);\n  };\n\n  const moduleText = blocks.reduce((sum, el) => `${sum}%c${el.name}`, '');\n  const moduleStyle = blocks.map(el => el.style);\n\n  temp.log = (function () {\n    return Function.prototype.bind.call(\n      console.log,\n      console,\n      `%cM ${moduleText}`,\n      'background-color: #2e51a2; color: white; padding: 2px 10px; border-radius: 3px;',\n      ...moduleStyle,\n    );\n  })();\n\n  temp.error = (function () {\n    return Function.prototype.bind.call(\n      console.error,\n      console,\n      `%cM ${moduleText}`,\n      'background-color: #8f0000; color: white; padding: 2px 10px; border-radius: 3px;',\n      ...moduleStyle,\n    );\n  })();\n\n  temp.info = (function () {\n    return Function.prototype.bind.call(\n      console.info,\n      console,\n      `%cM ${moduleText}`,\n      'background-color: wheat; color: black; padding: 2px 10px; border-radius: 3px;',\n      ...moduleStyle,\n    );\n  })();\n\n  temp.debug = (function () {\n    return Function.prototype.bind.call(\n      console.debug,\n      console,\n      `%cM ${moduleText}`,\n      'background-color: steelblue; color: black; padding: 2px 10px; border-radius: 3px;',\n      ...moduleStyle,\n    );\n  })();\n\n  return temp;\n};\n\nfunction stringToColour(str) {\n  if (!str) return '#ffffff';\n  str = String(str);\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n  }\n  let colour = '#';\n  for (let i = 0; i < 3; i++) {\n    const value = (hash >> (i * 8)) & 0xff;\n    colour += `00${value.toString(16)}`.substr(-2);\n  }\n  return colour;\n}\n\nfunction getColorByBgColor(bgColor) {\n  return parseInt(bgColor.replace('#', ''), 16) > 0xffffff / 2 ? '#000' : '#fff';\n}\n","declare let browser: any;\n\nexport function urlPart(url: string, part: number) {\n  if (!url) return '';\n\n  const urlParts = url.split('/');\n\n  if (!urlParts[part]) return '';\n\n  return urlParts[part].replace(/[#?].*/, '');\n}\n\nexport function urlStrip(url: string) {\n  return url.replace(/[#?].*/, '');\n}\n\nexport function urlParam(url, name) {\n  const results = new RegExp(`[?&]${name}=([^&#]*)`).exec(url);\n  if (results === null) {\n    return null;\n  }\n  return decodeURI(results[1]) || 0;\n}\n\nexport function getBaseText(element) {\n  let text = element.text();\n  element.children().each(function () {\n    // @ts-ignore\n    text = text.replace(j.$(this).text(), '');\n  });\n  return text;\n}\n\nexport function favicon(domain) {\n  if (!domain) return '';\n  const res = domain.match(/^(https?:\\/\\/)?[^/]+/);\n\n  if (res) domain = res[0];\n\n  return `https://favicon.malsync.moe/?domain=${domain}`;\n}\n\nexport function watching(type: 'anime' | 'manga') {\n  if (type === 'manga') return 'Reading';\n  return 'Watching';\n}\n\nexport function planTo(type: 'anime' | 'manga') {\n  if (type === 'manga') return 'Plan to Read';\n  return 'Plan to Watch';\n}\n\nexport function episode(type: 'anime' | 'manga') {\n  if (type === 'manga') return api.storage.lang('UI_Chapter');\n  return api.storage.lang('UI_Episode');\n}\n\nexport const syncRegex =\n  /(^settings\\/.*|^updateCheckTime$|^tempVersion$|^local:\\/\\/|^list-tagSettings$)/;\n\nexport const rateLimitExclude = /^https:\\/\\/api.malsync.moe\\/(shark|mal\\/|nc\\/mal\\/.*\\/progress$)/i;\n\n// eslint-disable-next-line no-shadow\nexport enum status {\n  // eslint-disable-next-line no-shadow\n  watching = 1,\n  completed = 2,\n  onhold = 3,\n  dropped = 4,\n  planToWatch = 6,\n}\n\nexport function getselect(data, name) {\n  let temp = data.split(`name=\"${name}\"`)[1].split('</select>')[0];\n  if (temp.indexOf('selected=\"selected\"') > -1) {\n    temp = temp.split('<option');\n    for (let i = 0; i < temp.length; ++i) {\n      if (temp[i].indexOf('selected=\"selected\"') > -1) {\n        return temp[i].split('value=\"')[1].split('\"')[0];\n      }\n    }\n  }\n  return '';\n}\n\nexport function absoluteLink(url, domain) {\n  if (typeof url === 'undefined') {\n    return url;\n  }\n  if (!url.startsWith('http')) {\n    if (url.charAt(0) !== '/') url = `/${url}`;\n    url = domain + url;\n  }\n  return url;\n}\n\nexport function parseHtml(text) {\n  const parser = new DOMParser();\n  const dom = parser.parseFromString(`<!doctype html><body>${text}`, 'text/html');\n  return dom.body.textContent;\n}\n\nexport function urlChangeDetect(callback) {\n  let currentPage = window.location.href;\n  return setInterval(function () {\n    if (currentPage !== window.location.href) {\n      currentPage = window.location.href;\n      callback();\n    }\n  }, 100);\n}\n\nexport function fullUrlChangeDetect(callback, strip = false) {\n  let currentPage = '';\n  const intervalId = setInterval(function () {\n    const url = strip ? urlStrip(window.location.href) : window.location.href;\n    if (currentPage !== url) {\n      currentPage = url;\n      callback();\n    }\n  }, 100);\n\n  return Number(intervalId);\n}\n\nexport function changeDetect(callback, func, immediate = false) {\n  let currentPage = func();\n  const intervalId = setInterval(function () {\n    const temp = func();\n    if (typeof temp !== 'undefined' && currentPage !== temp) {\n      currentPage = func();\n      callback();\n    }\n  }, 500);\n\n  if (immediate) callback();\n\n  return Number(intervalId);\n}\n\nexport function waitUntilTrue(condition: Function, callback: Function, interval = 100) {\n  const intervalId = setInterval(function () {\n    if (condition()) {\n      clearInterval(intervalId);\n      callback();\n    }\n  }, interval);\n\n  return intervalId;\n}\n\nexport function getAsyncWaitUntilTrue(condition: Function, interval = 100) {\n  let intervalId;\n  let rejectThis;\n  const reset = () => {\n    clearTimeout(intervalId);\n    if (rejectThis) rejectThis('AsyncWait stopped');\n  };\n\n  return {\n    asyncWaitUntilTrue: () => {\n      reset();\n      return new Promise<void>((resolve, reject) => {\n        rejectThis = reject;\n        intervalId = waitUntilTrue(condition, () => resolve(), interval);\n      });\n    },\n    reset,\n  };\n}\n\nconst doubleId = Math.random();\nexport function checkDoubleExecution() {\n  if ($('.mal-sync-double-detect').length) {\n    $('.mal-sync-double-detect').each(function (index) {\n      if ($(this).text() !== doubleId.toString()) {\n        alert('Double execution detected! Please run MAL-Sync once only.');\n      }\n    });\n  }\n  $('body').after(\n    j.html(\n      `<div class=\"mal-sync-double-detect\" style=\"display: none;\">${doubleId.toString()}</div>`,\n    ),\n  );\n}\n\nexport function getUrlFromTags(tags: string) {\n  if (/malSync::[\\d\\D]+::/.test(tags)) {\n    return atobURL(tags.split('malSync::')[1].split('::')[0]);\n  }\n  if (/last::[\\d\\D]+::/.test(tags)) {\n    return atobURL(tags.split('last::')[1].split('::')[0]);\n  }\n  return undefined;\n\n  function atobURL(encoded) {\n    try {\n      return atob(encoded);\n    } catch (e) {\n      return encoded;\n    }\n  }\n}\n\nexport function setUrlInTags(url: string, tags: string) {\n  if (url === '') {\n    tags = tags.replace(/,?(malSync|last)::[^ \\n]+?::/, '');\n    return tags;\n  }\n  if (!api.settings.get('malTags')) return tags;\n  const addition = `malSync::${btoa(url)}::`;\n  if (/(last|malSync)::[\\d\\D]+::/.test(tags)) {\n    tags = tags.replace(/(last|malSync)::[^^]*?::/, addition);\n  } else {\n    tags = `${tags},${addition}`;\n  }\n  return tags;\n}\n\nexport async function setResumeWaching(url: string, ep: number, type, id) {\n  return api.storage.set(`resume/${type}/${id}`, { url, ep });\n}\n\nexport async function getResumeWaching(type, id): Promise<{ url?: string; ep?: number } | void> {\n  if (!api.settings.get('malResume')) return;\n\n  /* eslint-disable-next-line consistent-return */\n  return api.storage.get(`resume/${type}/${id}`);\n}\n\nexport async function setContinueWaching(url: string, ep: number, type, id) {\n  return api.storage.set(`continue/${type}/${id}`, { url, ep });\n}\n\nexport async function getContinueWaching(type, id): Promise<{ url?: string; ep?: number } | void> {\n  if (!api.settings.get('malContinue')) return;\n\n  /* eslint-disable-next-line consistent-return */\n  return api.storage.get(`continue/${type}/${id}`);\n}\n\nexport async function setEntrySettings(type, id, options, tags = '') {\n  const tempOptions = {};\n  if (options) {\n    for (const key in options) {\n      switch (key) {\n        case 'u':\n        case 'p':\n          tempOptions[key] = options[key];\n          break;\n        default:\n      }\n    }\n\n    if (api.settings.get('malTags')) {\n      // TAG mode\n      tags = setUrlInTags(JSON.stringify(tempOptions), tags);\n    } else {\n      // No TAG mode\n      await api.storage.set(`tagSettings/${type}/${id}`, JSON.stringify(tempOptions));\n    }\n  }\n\n  if (!Object.values(tempOptions).find(el => Boolean(el))) {\n    tags = setUrlInTags('', tags);\n    if (!api.settings.get('malTags')) {\n      await api.storage.remove(`tagSettings/${type}/${id}`);\n    }\n  }\n\n  return tags;\n}\n\nexport async function getEntrySettings(type, id, tags = '') {\n  const tempOptions: any = {\n    u: null, // url\n    c: null, // Continue Url\n    r: null, // Resume Url\n    p: '', // Progress Mode\n  };\n\n  if (api.settings.get('malTags')) {\n    // TAG mode\n    const tagString = getUrlFromTags(tags);\n    if (tagString) {\n      if (tagString[0] === '{') {\n        try {\n          const temp = JSON.parse(tagString);\n          for (const key in tempOptions) {\n            if (temp[key]) tempOptions[key] = temp[key];\n          }\n        } catch (e) {\n          con.error(e);\n        }\n      } else {\n        tempOptions.u = tagString;\n      }\n    }\n  } else {\n    // No TAG mode\n    let temp: any = await api.storage.get(`tagSettings/${type}/${id}`);\n\n    if (temp) {\n      temp = JSON.parse(temp);\n\n      for (const key in tempOptions) {\n        if (temp[key]) tempOptions[key] = temp[key];\n      }\n    }\n  }\n\n  const continueUrlObj = await getContinueWaching(type, id);\n  if (continueUrlObj) tempOptions.c = continueUrlObj;\n  const resumeUrlObj = await getResumeWaching(type, id);\n  if (resumeUrlObj) tempOptions.r = resumeUrlObj;\n\n  if (!api.settings.get('usedPage')) tempOptions.u = null;\n\n  return tempOptions;\n}\n\nexport function handleMalImages(url) {\n  if (url.indexOf('questionmark') !== -1) return api.storage.assetUrl('questionmark.gif');\n  return url;\n}\n\nexport function getTooltip(text, style = '', direction = 'top') {\n  const rNumber = Math.floor(Math.random() * 1000 + 1);\n  return `<div id=\"tt${rNumber}\" class=\"icon material-icons\" style=\"font-size:16px; line-height: 0; color: #7f7f7f; padding-bottom: 20px; padding-left: 3px; ${style}\">contact_support</div>\\\n  <div class=\"mdl-tooltip mdl-tooltip--${direction} mdl-tooltip--large\" for=\"tt${rNumber}\">${text}</div>`;\n}\n\nexport function timeDiffToText(delta) {\n  let text = '';\n\n  delta /= 1000;\n\n  const diffYears = Math.floor(delta / 31536000);\n  delta -= diffYears * 31536000;\n  if (diffYears) {\n    text += `${diffYears}y `;\n  }\n\n  const diffDays = Math.floor(delta / 86400);\n  delta -= diffDays * 86400;\n  if (diffDays) {\n    text += `${diffDays}d `;\n  }\n\n  const diffHours = Math.floor(delta / 3600) % 24;\n  delta -= diffHours * 3600;\n  if (diffHours && diffDays < 2) {\n    text += `${diffHours}h `;\n  }\n\n  const diffMinutes = Math.floor(delta / 60) % 60;\n  delta -= diffMinutes * 60;\n  if (diffMinutes && !diffDays && diffHours < 3) {\n    text += `${diffMinutes}min `;\n  }\n\n  return text;\n}\n\nexport function canHideTabs() {\n  if (typeof browser !== 'undefined' && typeof browser.tabs.hide !== 'undefined') {\n    return true;\n  }\n  return false;\n}\n\n// eslint-disable-next-line no-shadow\nexport function statusTag(status, type, id) {\n  const info = {\n    anime: {\n      1: {\n        class: 'watching',\n        text: 'CW',\n        title: api.storage.lang(`UI_Status_watching_${type}`),\n      },\n      2: {\n        class: 'completed',\n        text: 'CMPL',\n        title: api.storage.lang('UI_Status_Completed'),\n      },\n      3: {\n        class: 'on-hold',\n        text: 'HOLD',\n        title: api.storage.lang('UI_Status_OnHold'),\n      },\n      4: {\n        class: 'dropped',\n        text: 'DROP',\n        title: api.storage.lang('UI_Status_Dropped'),\n      },\n      6: {\n        class: 'plantowatch',\n        text: 'PTW',\n        title: api.storage.lang(`UI_Status_planTo_${type}`),\n      },\n      23: {\n        class: 'rewatching',\n        text: 'RE',\n        title: api.storage.lang(`UI_Status_Rewatching_${type}`),\n      },\n    },\n    manga: {\n      1: {\n        class: 'reading',\n        text: 'CR',\n        title: api.storage.lang(`UI_Status_watching_${type}`),\n      },\n      2: {\n        class: 'completed',\n        text: 'CMPL',\n        title: api.storage.lang('UI_Status_Completed'),\n      },\n      3: {\n        class: 'on-hold',\n        text: 'HOLD',\n        title: api.storage.lang('UI_Status_OnHold'),\n      },\n      4: {\n        class: 'dropped',\n        text: 'DROP',\n        title: api.storage.lang('UI_Status_Dropped'),\n      },\n      6: {\n        class: 'plantoread',\n        text: 'PTR',\n        title: api.storage.lang(`UI_Status_planTo_${type}`),\n      },\n      23: {\n        class: 'rewatching',\n        text: 'RE',\n        title: api.storage.lang(`UI_Status_Rewatching_${type}`),\n      },\n    },\n  };\n\n  $.each([1, 2, 3, 4, 6, 23], function (i, el) {\n    info.anime[info.anime[el].title] = info.anime[el];\n    info.manga[info.manga[el].title] = info.manga[el];\n  });\n\n  if (status && info[type][status]) {\n    const tempInfo = info[type][status];\n    return ` <a href=\"https://myanimelist.net/ownlist/${type}/${id}/edit?hideLayout=1\" title=\"${tempInfo.title}\" class=\"Lightbox_AddEdit button_edit ${tempInfo.class}\">${tempInfo.text}</a>`;\n  }\n  return false;\n}\n\nexport function getStatusText(type: 'anime' | 'manga', state) {\n  switch (state) {\n    case 1:\n      return api.storage.lang(`UI_Status_watching_${type}`);\n    case 2:\n      return api.storage.lang('UI_Status_Completed');\n    case 3:\n      return api.storage.lang('UI_Status_OnHold');\n    case 4:\n      return api.storage.lang('UI_Status_Dropped');\n    case 6:\n      return api.storage.lang(`UI_Status_planTo_${type}`);\n    case 7:\n      return api.storage.lang(`UI_Status_All`);\n    case 23:\n      return api.storage.lang(`UI_Status_Rewatching_${type}`);\n    default:\n      return '';\n  }\n}\n\n// eslint-disable-next-line consistent-return\nexport function notifications(url: string, title: string, message: string, iconUrl = '') {\n  const messageObj: chrome.notifications.NotificationOptions<true> = {\n    type: 'basic',\n    title,\n    message,\n    iconUrl,\n  };\n\n  con.log('Notification', url, messageObj);\n\n  api.storage.get('notificationHistory').then(history => {\n    if (history === undefined) {\n      history = [];\n    }\n\n    if (typeof history !== 'object') return;\n\n    if (history.length >= 10) {\n      history.shift();\n    }\n    history.push({\n      url,\n      title: messageObj.title,\n      message: messageObj.message,\n      iconUrl: messageObj.iconUrl,\n      timestamp: Date.now(),\n    });\n    api.storage.set('notificationHistory', history);\n  });\n\n  try {\n    return chrome.notifications.create(url, messageObj);\n  } catch (e) {\n    con.error(e);\n  }\n}\n\nexport async function timeCache(key, dataFunction, ttl) {\n  const value = await api.storage.get(key);\n  if (typeof value === 'object' && new Date().getTime() < value.timestamp) {\n    return value.data;\n  }\n  const result = await dataFunction();\n  return api.storage.set(key, { data: result, timestamp: new Date().getTime() + ttl }).then(() => {\n    return result;\n  });\n}\n\n// flashm\nexport function flashm(\n  text,\n  options?: {\n    error?: boolean;\n    type?: string;\n    permanent?: boolean;\n    hoverInfo?: boolean;\n    position?: 'top' | 'bottom';\n    minimized?: boolean;\n  },\n) {\n  if (!j.$('#flash-div-top').length) {\n    initflashm();\n  }\n  con.log('[Flash] Message:', text);\n\n  let colorF = '#323232';\n  if (typeof options !== 'undefined' && typeof options.error !== 'undefined' && options.error) {\n    colorF = '#3e0808';\n  }\n\n  let flashdiv = '#flash-div-bottom';\n  if (\n    typeof options !== 'undefined' &&\n    typeof options.position !== 'undefined' &&\n    options.position\n  ) {\n    flashdiv = `#flash-div-${options.position}`;\n  }\n\n  let messClass = 'flash';\n  if (typeof options !== 'undefined' && typeof options.type !== 'undefined' && options.type) {\n    const tempClass = `type-${options.type}`;\n    j.$(`${flashdiv} .${tempClass}, #flashinfo-div .${tempClass}`)\n      .removeClass(tempClass)\n      .fadeOut({\n        duration: 1000,\n        queue: false,\n        complete() {\n          j.$(this).remove();\n        },\n      });\n\n    messClass += ` ${tempClass}`;\n  }\n\n  let mess = `<div class=\"${messClass}\" style=\"display:none;\">\\\n        <div style=\"display:table; pointer-events: all; padding: 14px 24px 14px 24px; margin: 0 auto; margin-top: 5px; max-width: 60%; -webkit-border-radius: 20px;-moz-border-radius: 20px;border-radius: 2px;color: white;background:${colorF}; \">\\\n          ${text}\\\n        </div>\\\n      </div>`;\n\n  let flashmEl;\n\n  if (\n    typeof options !== 'undefined' &&\n    typeof options.hoverInfo !== 'undefined' &&\n    options.hoverInfo\n  ) {\n    messClass += ' flashinfo';\n    mess = `<div class=\"${messClass}\" style=\"display:none; max-height: 5000px; overflow: hidden;\"><div style=\"display:table; pointer-events: all; margin: 0 auto; margin-top: -2px; max-width: 60%; -webkit-border-radius: 20px;-moz-border-radius: 20px;border-radius: 2px;color: white;background:${colorF}; position: relative;\"><div style=\"max-height: 60vh; overflow-y: auto; padding: 14px 24px 14px 24px;\">${text}</div></div></div>`;\n    j.$('#flashinfo-div').addClass('hover');\n    // eslint-disable-next-line jquery-unsafe-malsync/no-xss-jquery\n    flashmEl = j.$(j.html(mess)).appendTo('#flashinfo-div');\n    if (\n      typeof options !== 'undefined' &&\n      typeof options.minimized !== 'undefined' &&\n      options.minimized\n    )\n      flashmEl.css('max-height', '8px');\n  } else {\n    // eslint-disable-next-line jquery-unsafe-malsync/no-xss-jquery\n    flashmEl = j.$(j.html(mess)).appendTo(flashdiv);\n  }\n\n  if (\n    typeof options !== 'undefined' &&\n    typeof options.permanent !== 'undefined' &&\n    options.permanent\n  ) {\n    flashmEl.slideDown(800);\n  } else if (\n    typeof options !== 'undefined' &&\n    typeof options.hoverInfo !== 'undefined' &&\n    options.hoverInfo\n  ) {\n    flashmEl\n      .slideDown(800)\n      .delay(4000)\n      .queue(function () {\n        j.$('#flashinfo-div').removeClass('hover');\n        flashmEl.css('max-height', '8px');\n      });\n  } else {\n    flashmEl\n      .slideDown(800)\n      .delay(4000)\n      .slideUp(800, () => {\n        // @ts-ignore\n        j.$(this).remove();\n      });\n  }\n  return flashmEl;\n}\n\nexport async function flashConfirm(\n  message,\n  type,\n  yesCall = () => {\n    /* Placeholder */\n  },\n  cancelCall = () => {\n    /* Placeholder */\n  },\n  yesNo = false,\n): Promise<boolean> {\n  return new Promise(function (resolve, reject) {\n    let yesText = api.storage.lang('Ok');\n    let noText = api.storage.lang('Cancel');\n    if (yesNo) {\n      yesText = api.storage.lang('Yes');\n      noText = api.storage.lang('No');\n    }\n    message = `<div style=\"text-align: center;\">${message}</div><div style=\"display: flex; justify-content: space-around;\"><button class=\"Yes\" style=\"background-color: transparent; border: none; color: rgb(255,64,129);margin-top: 10px; cursor:pointer;\">${yesText}</button><button class=\"Cancel\" style=\"background-color: transparent; border: none; color: rgb(255,64,129);margin-top: 10px; cursor:pointer;\">${noText}</button></div>`;\n    const flasmessage = flashm(message, {\n      permanent: true,\n      position: 'top',\n      type,\n    });\n    flasmessage.find('.Yes').click(function (evt) {\n      resolve(true);\n      j.$(evt.target)\n        .parentsUntil('.flash')\n        .fadeOut(300, function () {\n          // @ts-ignore\n          j.$(this).remove();\n        });\n      yesCall();\n    });\n    flasmessage.find('.Cancel').click(function (evt) {\n      resolve(false);\n      j.$(evt.target)\n        .parentsUntil('.flash')\n        .fadeOut(300, function () {\n          // @ts-ignore\n          j.$(this).remove();\n        });\n      cancelCall();\n    });\n  });\n}\n\nfunction initflashm() {\n  api.storage.addStyle(\n    `.flashinfo{\n                    transition: max-height 2s, opacity 2s 2s;\n                 }\n                 .mini-stealth .flashinfo{\n                    opacity: 0;\n                 }\n                  #flashinfo-div.hover.mini-stealth .flashinfo.type-update{\n                    opacity: 0.7;\n                 }\n                 #flashinfo-div.hover .flashinfo{\n                    opacity: 1;\n                 }\n                 .flashinfo:hover{\n                    max-height:5000px !important;\n                    z-index: 2147483647;\n                    opacity: 1;\n                    transition: max-height 2s;\n                 }\n                 .flashinfo .synopsis{\n                    transition: max-height 2s, max-width 2s ease 2s;\n                 }\n                 .flashinfo:hover .synopsis{\n                    max-height:9999px !important;\n                    max-width: 500px !important;\n                    transition: max-height 2s;\n                 }\n                 #flashinfo-div{\n                  z-index: 2;\n                  transition: 2s;\n                 }\n                 #flashinfo-div:hover, #flashinfo-div.hover{\n                  z-index: 2147483647;\n                 }\n                 #flashinfo-div.player-error {\n                   z-index: 2147483647;\n                 }\n                 #flashinfo-div.player-error .type-update{\n                  overflow: visible !important;\n                  opacity: 1 !important;\n                 }\n                 #flashinfo-div.player-error .player-error{\n                  display: block !important\n                 }\n                 #flashinfo-div.player-error-missing-permissions .player-error-missing-permissions{\n                  display: block !important\n                 }\n                 #flashinfo-div.player-error-missing-permissions .player-error-default{\n                  display: none !important\n                 }\n\n                 #flash-div-top, #flash-div-bottom, #flashinfo-div{\n                    font-family: \"Helvetica\",\"Arial\",sans-serif;\n                    color: white;\n                    font-size: 14px;\n                    font-weight: 400;\n                    line-height: 17px;\n                 }\n                 #flash-div-top h2, #flash-div-bottom h2, #flashinfo-div h2{\n                    font-family: \"Helvetica\",\"Arial\",sans-serif;\n                    color: white;\n                    font-size: 14px;\n                    font-weight: 700;\n                    line-height: 17px;\n                    padding: 0;\n                    margin: 0;\n                 }\n                 #flash-div-top a, #flash-div-bottom a, #flashinfo-div a{\n                    color: #DF6300;\n                 }`,\n  );\n\n  let extraClass = '';\n  if (api.settings.get('floatButtonStealth')) extraClass = 'mini-stealth';\n\n  j.$('body').after(\n    j.html(\n      `<div id=\"flash-div-top\" dir=\"${api.storage.langDirection()}\" style=\"text-align: center;pointer-events: none;position: fixed;top:-5px;width:100%;z-index: 2147483647;left: 0;\"></div>\\\n        <div id=\"flash-div-bottom\" dir=\"${api.storage.langDirection()}\" style=\"text-align: center;pointer-events: none;position: fixed;bottom:0px;width:100%;z-index: 2147483647;left: 0;\"><div id=\"flash\" style=\"display:none;  background-color: red;padding: 20px; margin: 0 auto;max-width: 60%;          -webkit-border-radius: 20px;-moz-border-radius: 20px;border-radius: 20px;background:rgba(227,0,0,0.6);\"></div></div>\\\n        <div id=\"flashinfo-div\" dir=\"${api.storage.langDirection()}\" class=\"${extraClass}\" style=\"text-align: center;pointer-events: none;position: fixed;bottom:0px;width:100%;left: 0;\">`,\n    ),\n  );\n}\n\nlet lazyloaded = false;\nlet lazyimages: any[] = [];\n\nexport function lazyload(doc, scrollElement = '.mdl-layout__content') {\n  /* lazyload.js (c) Lorenzo Giuliani\n   * MIT License (http://www.opensource.org/licenses/mit-license.html)\n   *\n   * expects a list of:\n   * `<img src=\"blank.gif\" data-src=\"my_image.png\" width=\"600\" height=\"400\" class=\"lazy\">`\n   */\n  // eslint-disable-next-line\n  function loadImage(el, fn) {\n    if (!j.$(el).is(':visible')) return false;\n    if (j.$(el).hasClass('lazyBack')) {\n      j.$(el)\n        .css('background-image', `url(${el.getAttribute('data-src')})`)\n        .removeClass('lazyBack');\n    } else {\n      const img = new Image();\n      const src = el.getAttribute('data-src');\n      img.onload = function () {\n        if (el.parent) el.parent.replaceChild(img, el);\n        else el.src = src;\n        // eslint-disable-next-line\n        fn ? fn() : null;\n      };\n      img.src = src;\n    }\n  }\n\n  for (let i = 0; i < lazyimages.length; i++) {\n    $(lazyimages[i]).addClass('init');\n  }\n\n  lazyimages = [];\n  const query = doc.find('img.lazy.init, .lazyBack.init');\n  const processScroll = function () {\n    for (let i = 0; i < lazyimages.length; i++) {\n      if (utils.elementInViewport(lazyimages[i], 600)) {\n        // eslint-disable-next-line\n        loadImage(lazyimages[i], function() {\n          lazyimages.splice(i, i);\n        });\n      }\n      if (!$(lazyimages[i]).length) {\n        lazyimages.splice(i, i);\n      }\n    }\n  };\n  // Array.prototype.slice.call is not callable under our lovely IE8\n  for (let i = 0; i < query.length; i++) {\n    lazyimages.push(query[i]);\n    $(query[i]).removeClass('init');\n  }\n\n  processScroll();\n\n  if (!lazyloaded) {\n    lazyloaded = true;\n    doc.find(scrollElement).scroll(function () {\n      processScroll();\n    });\n  }\n}\n\nexport function elementInViewport(el, horizontalOffset = 0) {\n  const rect = el.getBoundingClientRect();\n\n  return (\n    rect.top >= 0 &&\n    rect.left >= 0 &&\n    // @ts-ignore\n    rect.top - horizontalOffset <= (window.innerHeight || document.documentElement.clientHeight)\n  );\n}\n\nexport function wait(ms: number) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\n\nexport function pageUrl(\n  page: 'mal' | 'anilist' | 'kitsu' | 'simkl',\n  type: 'anime' | 'manga',\n  id: string | number,\n) {\n  switch (page) {\n    case 'mal':\n      return `https://myanimelist.net/${type}/${id}`;\n    case 'anilist':\n      return `https://anilist.co/${type}/${id}`;\n    case 'kitsu':\n      return `https://kitsu.app/${type}/${id}`;\n    case 'simkl':\n      return `https://simkl.com/${type}/${id}`;\n    default:\n      throw `${page} not a valid page`;\n  }\n}\n\nexport function returnYYYYMMDD(numFromToday = 0) {\n  const d = new Date();\n  d.setDate(d.getDate() + numFromToday);\n  const month = d.getMonth() < 9 ? `0${d.getMonth() + 1}` : d.getMonth() + 1;\n  const day = d.getDate() < 10 ? `0${d.getDate()}` : d.getDate();\n  return `${d.getFullYear()}-${month}-${day}`;\n}\n\nexport function htmlDecode(text) {\n  return $('<textarea/>').html(j.html(text)).text();\n}\n\nexport function isFirefox(): boolean {\n  return Boolean(typeof browser !== 'undefined' && typeof chrome !== 'undefined');\n}\n\nexport function waitForPageToBeVisible() {\n  const condition = () =>\n    Boolean(!document.visibilityState || document.visibilityState === 'visible');\n\n  if (condition()) return Promise.resolve();\n\n  con.log('Page in background');\n\n  const { asyncWaitUntilTrue: awaitUi } = getAsyncWaitUntilTrue(() => condition());\n\n  return awaitUi().then(() => {\n    con.log('Page is visible');\n  });\n}\n\nexport async function clearCache() {\n  const cacheArray = await api.storage.list();\n  let deleted = 0;\n\n  j.$.each(cacheArray, function (index, cache) {\n    if (!utils.syncRegex.test(String(index)) && !/(^tagSettings\\/.*)/.test(String(index))) {\n      api.storage.remove(String(index));\n      deleted++;\n    }\n  });\n\n  utils.flashm(`Cache Cleared [${deleted}]`);\n}\n\nexport function sortAlphabetically(a, b) {\n  if (a.toLowerCase() < b.toLowerCase()) return -1;\n  if (a.toLowerCase() > b.toLowerCase()) return 1;\n  return 0;\n}\n\nexport function isDomainMatching(url, domain) {\n  const urlObj = new URL(url);\n  const { host } = urlObj;\n  return host === domain || host.endsWith(`.${domain}`);\n}\n\nexport function upperCaseFirstLetter(string) {\n  if (!string || string.length < 2) return string;\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n","import * as DOMPurify from 'dompurify';\n\nexport const $ = jQuery;\n\nexport function html(htmlContent) {\n  return DOMPurify.sanitize(htmlContent, {\n    SAFE_FOR_JQUERY: true,\n    ALLOW_UNKNOWN_PROTOCOLS: true,\n    ADD_ATTR: ['target'],\n  });\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* eslint-disable no-shadow */\n/* export enum type {\n  Anime = \"anime\",\n  Manga = \"manga\"\n} */\n\nimport { Component } from 'vue';\n\nexport type contentType = 'anime' | 'manga';\n\nexport enum status {\n  NoState = 0,\n  Watching = 1,\n  Completed = 2,\n  Onhold = 3,\n  Dropped = 4,\n  PlanToWatch = 6,\n  All = 7,\n  Rewatching = 23,\n}\n\nexport enum score {\n  NoScore = 0,\n  R1 = 1,\n  R2 = 2,\n  R3 = 3,\n  R4 = 4,\n  R5 = 5,\n  R6 = 6,\n  R7 = 7,\n  R8 = 8,\n  R9 = 9,\n  R10 = 10,\n}\n\n// score range 0 - 100\nexport type score100 = number;\n\nexport type searchResult = {\n  id: number;\n  name: string;\n  altNames: string[];\n  url: string;\n  malUrl: () => Promise<string | null>;\n  image: string;\n  imageLarge: string;\n  imageBanner?: string;\n  media_type: string;\n  isNovel: boolean;\n  score: string;\n  year: string;\n  totalEp?: number;\n  list?: {\n    status: status;\n    score: score;\n    episode: number;\n  };\n};\n\nexport type searchInterface = (\n  keyword: string,\n  type: 'anime' | 'manga',\n  options?: {},\n  sync?: boolean,\n) => Promise<searchResult[]>;\n\nexport interface ConfObj {\n  key: string;\n  title: string | (() => string);\n  system?: 'userscript' | 'webextension';\n  component: Component;\n  condition?: () => boolean;\n  change?: () => void;\n  props?: { [key: string]: any };\n  children?: ConfObj[];\n}\n","let store: Pick<Storage, 'getItem' | 'setItem' | 'clear' | 'removeItem'>;\n\nif (checkLocalStorageIsAvailable()) {\n  store = localStorage;\n} else {\n  let storage = {};\n  store = {\n    getItem(key) {\n      return key in storage ? storage[key] : null;\n    },\n    setItem(key, value) {\n      storage[key] = value;\n    },\n    removeItem(key) {\n      if (key in storage) delete storage[key];\n    },\n    clear() {\n      storage = {};\n    },\n  };\n}\n\nexport const localStore = store;\n\nfunction checkLocalStorageIsAvailable() {\n  try {\n    localStorage.getItem('x');\n    return true;\n  } catch (e) {\n    con.info('Local storage is not available', e);\n    return false;\n  }\n}\n","import { localStore } from './localStore';\n\nexport class Cache {\n  constructor(\n    protected key: string,\n    protected ttl: number,\n    protected localStorage: boolean = true,\n    protected refetchTtl: number = 0,\n  ) {\n    return this;\n  }\n\n  protected containsValue(value) {\n    return typeof value !== 'undefined' && value !== null;\n  }\n\n  protected valueValid(value, ttl) {\n    if (!value || !value.timestamp) return false;\n    return new Date().getTime() < value.timestamp + ttl;\n  }\n\n  protected ttlValid(value) {\n    return this.valueValid(value, this.ttl);\n  }\n\n  protected refetchTtlValid(value) {\n    return this.valueValid(value, this.refetchTtl);\n  }\n\n  async hasValue() {\n    const value = await this.getStorage();\n    if (this.containsValue(value) && this.ttlValid(value)) {\n      return true;\n    }\n    return false;\n  }\n\n  async hasValueAndIsNotEmpty() {\n    const value = await this.getStorage();\n    if (\n      this.containsValue(value) &&\n      typeof value.data !== 'undefined' &&\n      value.data !== null &&\n      Object.keys(value.data).length &&\n      this.ttlValid(value)\n    ) {\n      return true;\n    }\n    return false;\n  }\n\n  async fullState() {\n    const value = await this.getStorage();\n    const hasValue = this.containsValue(value) && this.refetchTtlValid(value);\n    const isValid = this.ttlValid(value);\n    return {\n      value,\n      hasValue,\n      isValid,\n      refetch: hasValue && !isValid,\n    };\n  }\n\n  async getValue() {\n    const value = await this.getStorage();\n    return value.data;\n  }\n\n  async setValue(result) {\n    const save = { data: result, timestamp: new Date().getTime() };\n    if (this.localStorage) {\n      return localStore.setItem(this.key, JSON.stringify(save));\n    }\n    return api.storage.set(this.key, save);\n  }\n\n  async clearValue() {\n    if (this.localStorage) {\n      return localStore.removeItem(this.key);\n    }\n    return api.storage.remove(this.key);\n  }\n\n  protected async getStorage() {\n    if (this.localStorage) {\n      return JSON.parse(localStore.getItem(this.key)!);\n    }\n    return api.storage.get(this.key);\n  }\n}\n","import { Cache } from '../utils/Cache';\nimport type { listElement } from '../_provider/listAbstract';\nimport { xhrResponseI } from '../api/messageInterface';\n\nexport interface releaseItemInterface {\n  timestamp: number;\n  value: any;\n  finished: boolean;\n  mode: string;\n}\n\nexport async function predictionXhrGET(type: string, apiCacheKey: number | string | null) {\n  if (!apiCacheKey) return {};\n  const response = await api.request.xhr(\n    'GET',\n    `https://api.malsync.moe/nc/mal/${type}/${apiCacheKey}/pr`,\n  );\n  return JSON.parse(response.responseText);\n}\n\nexport async function predictionXhrPOST(type: string, malDATA: listElement[] | null) {\n  if (malDATA === null) return [];\n  if (malDATA.length <= 0) return [];\n  const malDATAID = malDATA.map(el => el.apiCacheKey);\n  const returnArray: xhrResponseI[] = [];\n  for (let i = 0; i <= malDATAID.length; ) {\n    const tempArray = malDATAID.slice(i, i + 49);\n    const Request = {\n      url: `https://api.malsync.moe/nc/mal/${type}/POST/pr`,\n      data: JSON.stringify({ malids: tempArray }),\n      headers: { 'Content-Type': 'application/json' },\n    };\n    await utils.wait(5000);\n    const response = await api.request.xhr('POST', Request);\n    returnArray.push(JSON.parse(response.responseText));\n    i += 50;\n  }\n\n  return returnArray.reduce((acc: xhrResponseI[], val) => acc.concat(val), []);\n}\n\nexport async function single(\n  el: {\n    uid: number;\n    apiCacheKey: number | string | null;\n    title: string;\n    cacheKey: string;\n    watchedEp: number;\n    single: any;\n    xhr?: object;\n  },\n  type,\n  mode = 'default',\n  logger = con.m('release'),\n) {\n  if (!mode) mode = 'default';\n  logger = logger.m(el.uid.toString());\n  logger.log(el.title, el.cacheKey, el.apiCacheKey, `Mode: ${mode}`);\n  if (!el.apiCacheKey) {\n    logger.log('No Api Cache Id');\n    return;\n  }\n  if (!api.settings.get('epPredictions')) {\n    logger.log('epPredictions disabled');\n    return;\n  }\n  const releaseItem: undefined | releaseItemInterface = await api.storage.get(\n    `release/${type}/${el.cacheKey}`,\n  );\n\n  logger.m('Load').log(releaseItem);\n\n  let force = false;\n\n  if (releaseItem && releaseItem.mode && releaseItem.mode !== mode) force = true;\n\n  if (\n    releaseItem &&\n    releaseItem.timestamp &&\n    Date.now() - releaseItem.timestamp < 2 * 60 * 1000 &&\n    !force\n  ) {\n    logger.log('Up to date');\n    return;\n  }\n\n  if (\n    releaseItem &&\n    releaseItem.finished &&\n    releaseItem.timestamp &&\n    Date.now() - releaseItem.timestamp < 7 * 24 * 60 * 60 * 1000 &&\n    !force\n  ) {\n    logger.log('Fininshed');\n    return;\n  }\n\n  if (\n    releaseItem &&\n    !releaseItem.value &&\n    releaseItem.timestamp &&\n    Date.now() - releaseItem.timestamp < 1 * 24 * 60 * 60 * 1000 &&\n    !force\n  ) {\n    logger.log('Nulled');\n    return;\n  }\n\n  if (force) logger.log('Update forced');\n\n  if (mode === 'off') {\n    logger.log('Disabled');\n    el.xhr = [];\n  }\n\n  let xhr;\n  if (typeof el.xhr !== 'undefined') {\n    xhr = el.xhr;\n  } else {\n    xhr = await predictionXhrGET(type, el.apiCacheKey);\n    await utils.wait(500);\n  }\n  logger.log(xhr);\n\n  const progressValue = getProgress(xhr, mode, type);\n\n  if (!progressValue) {\n    logger.log('No value for the selected mode');\n  }\n\n  let finished = false;\n\n  if (progressValue && progressValue.state && progressValue.state === 'complete') finished = true;\n\n  logger.m('Save').log(progressValue);\n  if (releaseItem && releaseItem.value) {\n    notificationCheck(el, releaseItem.value, progressValue, type);\n  }\n\n  await api.storage.set(`release/${type}/${el.cacheKey}`, {\n    timestamp: Date.now(),\n    value: progressValue,\n    mode,\n    finished,\n  } as releaseItemInterface);\n}\n\nexport function progressIsOld(releaseItem: releaseItemInterface) {\n  if (releaseItem && releaseItem.timestamp) {\n    const diff = new Date().getTime() - releaseItem.timestamp;\n\n    if (releaseItem.finished && diff < 7 * 24 * 60 * 60 * 1000) {\n      // logger.log('Fininshed');\n      return false;\n    }\n\n    if (!releaseItem.value && diff < 1 * 24 * 60 * 60 * 1000) {\n      // logger.log('Nulled');\n      return false;\n    }\n\n    if (diff < 1 * 24 * 60 * 60 * 1000) {\n      // logger.log('not old');\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function getProgress(res, mode, type) {\n  const config: {\n    mainId?: string;\n    fallbackPrediction?: string;\n    fallback?: string;\n  } = {};\n\n  if (!res.length) return null;\n\n  if (mode === 'default') {\n    if (type === 'anime') {\n      config.mainId = api.settings.get('progressIntervalDefaultAnime');\n    } else {\n      config.mainId = api.settings.get('progressIntervalDefaultManga');\n    }\n    config.fallback = 'en/sub';\n  } else {\n    config.mainId = mode;\n  }\n\n  config.fallbackPrediction = 'jp/dub';\n\n  let top;\n\n  if (config.mainId) {\n    const mainTemp = res.find(el => el.id === config.mainId);\n    if (mainTemp) top = mainTemp;\n  }\n\n  if (config.fallback && !top) {\n    const mainTemp = res.find(el => el.id === config.fallback);\n    if (mainTemp) top = mainTemp;\n  }\n\n  if (config.fallbackPrediction && top && !top.predicition && top.lastEp && top.lastEp.timestamp) {\n    const predTemp = res.find(el => el.id === config.fallbackPrediction);\n    const predTime = top.lastEp.timestamp + 7 * 24 * 60 * 60 * 1000;\n    if (predTime && predTemp && predTemp.predicition) {\n      if (top.lastEp.total === predTemp.lastEp.total) {\n        if (Math.abs(predTime - predTemp.predicition.timestamp) < 30 * 60 * 60 * 1000) {\n          top.predicition = {\n            timestamp: predTime,\n            probability: 'medium',\n          };\n        }\n      } else if (predTemp.lastEp.total && top.lastEp.total === predTemp.lastEp.total - 1) {\n        if (\n          Math.abs(predTime - (predTemp.predicition.timestamp - 7 * 24 * 60 * 60 * 1000)) <\n          30 * 60 * 60 * 1000\n        ) {\n          top.predicition = {\n            timestamp: predTime,\n            probability: 'medium',\n          };\n        }\n      }\n    }\n  }\n\n  // Fallback to jp if no other language found and episode 0 -> Before release\n  if (config.fallbackPrediction && !top) {\n    const predSoon = res.find(el => el.id === config.fallbackPrediction);\n    if (predSoon && predSoon.lastEp && predSoon.predicition && predSoon.lastEp.total === 0) {\n      top = predSoon;\n      top.predicition.probability = 'medium';\n    }\n  }\n\n  if (!top) return null;\n\n  return top;\n}\n\nexport async function getProgressTypeList(\n  type: 'anime' | 'manga',\n): Promise<{ key: string; label: string }[]> {\n  const cacheObj = new Cache(`ProgressTypeList${type}`, 24 * 60 * 60 * 1000, false);\n  if (!(await cacheObj.hasValueAndIsNotEmpty())) {\n    con.log('Getting new ProgressTypeList Cache');\n    const url = `https://api.malsync.moe/general/progress/${type}`;\n    const request = await api.request.xhr('GET', url).then(async response => {\n      if (response.status === 200 && response.responseText) {\n        return JSON.parse(response.responseText);\n      }\n      return [];\n    });\n    await cacheObj.setValue(request);\n    return request;\n  }\n  con.log('PageSearch Cached');\n  return cacheObj.getValue();\n}\n\nexport async function notificationCheck(el, cProgress, nProgress, type) {\n  try {\n    if (\n      (type === 'anime' && !api.settings.get('progressNotificationsAnime')) ||\n      (type === 'manga' && !api.settings.get('progressNotificationsManga'))\n    ) {\n      return;\n    }\n    if (el && nProgress && nProgress) {\n      if (\n        cProgress.lastEp &&\n        typeof cProgress.lastEp.total !== 'undefined' &&\n        nProgress.lastEp &&\n        nProgress.lastEp.total &&\n        cProgress.lang === nProgress.lang &&\n        cProgress.type === nProgress.type\n      ) {\n        if (cProgress.lastEp.total < nProgress.lastEp.total) {\n          // Check if new ep is one higher than the watched one\n          if (el.watchedEp + 1 === nProgress.lastEp.total) {\n            let noti;\n            if (el.single) {\n              noti = {\n                title: el.title,\n                text: api.storage.lang(`syncPage_malObj_nextEp_${type}`, [nProgress.lastEp.total]),\n                sticky: api.settings.get('notificationsSticky'),\n                image: await el.single.getImage(),\n                url: el.single.getStreamingUrl() ? el.single.getStreamingUrl() : el.single.getUrl(),\n              };\n            } else {\n              noti = {\n                title: el.title,\n                text: api.storage.lang(`syncPage_malObj_nextEp_${type}`, [nProgress.lastEp.total]),\n                sticky: api.settings.get('notificationsSticky'),\n                image: el.image,\n                url: el.options && el.options.u ? el.options.u : el.url,\n              };\n            }\n            api.request.notification(noti);\n          }\n        }\n      }\n    }\n  } catch (e) {\n    con.error('Could not check notification Progress', e);\n  }\n}\n","/* eslint-disable operator-assignment */\n\nexport interface timeElement {\n  y: number;\n  d: number;\n  h: number;\n  m: number;\n  s: number;\n}\n\nexport function msToTime(milliseconds: number): timeElement {\n  let day;\n  let hour;\n  let minute;\n  let seconds;\n  seconds = Math.floor(milliseconds / 1000);\n  minute = Math.floor(seconds / 60);\n  seconds = seconds % 60;\n  hour = Math.floor(minute / 60);\n  minute = minute % 60;\n  day = Math.floor(hour / 24);\n  hour = hour % 24;\n  const year = Math.floor(day / 365);\n  day = day % 365;\n  return {\n    y: year,\n    d: day,\n    h: hour,\n    m: minute,\n    s: seconds,\n  };\n}\n\nexport function shortTime(el: timeElement): timeElement {\n  if (el.y > 1) {\n    if (el.d > 182) {\n      return {\n        y: el.y + 1,\n        d: 0,\n        h: 0,\n        m: 0,\n        s: 0,\n      };\n    }\n    return {\n      y: el.y,\n      d: 0,\n      h: 0,\n      m: 0,\n      s: 0,\n    };\n  }\n  if (el.y) {\n    return {\n      y: el.y,\n      d: el.d,\n      h: 0,\n      m: 0,\n      s: 0,\n    };\n  }\n  if (el.d > 3) {\n    if (el.h > 11) {\n      return {\n        y: 0,\n        d: el.d + 1,\n        h: 0,\n        m: 0,\n        s: 0,\n      };\n    }\n    return {\n      y: 0,\n      d: el.d,\n      h: 0,\n      m: 0,\n      s: 0,\n    };\n  }\n  if (el.d) {\n    return {\n      y: 0,\n      d: el.d,\n      h: el.h,\n      m: 0,\n      s: 0,\n    };\n  }\n  if (el.h > 5) {\n    if (el.m > 29) {\n      return {\n        y: 0,\n        d: 0,\n        h: el.h + 1,\n        m: 0,\n        s: 0,\n      };\n    }\n    return {\n      y: 0,\n      d: 0,\n      h: el.h,\n      m: 0,\n      s: 0,\n    };\n  }\n  if (el.h) {\n    return {\n      y: 0,\n      d: 0,\n      h: el.h,\n      m: el.m,\n      s: 0,\n    };\n  }\n  if (el.m > 14) {\n    return {\n      y: 0,\n      d: 0,\n      h: 0,\n      m: el.m,\n      s: 0,\n    };\n  }\n  return {\n    y: 0,\n    d: 0,\n    h: 0,\n    m: el.m,\n    s: el.s,\n  };\n}\n\nexport function timeToString(el: timeElement): string {\n  let output = '';\n\n  if (el.y === 1) {\n    output += ` ${el.y} ${api.storage.lang('bookmarksItem_Year')}`;\n  } else if (el.y > 1) {\n    output += ` ${el.y} ${api.storage.lang('bookmarksItem_Years')}`;\n  }\n\n  if (el.d === 1) {\n    output += ` ${el.d} ${api.storage.lang('bookmarksItem_Day')}`;\n  } else if (el.d > 1) {\n    output += ` ${el.d} ${api.storage.lang('bookmarksItem_Days')}`;\n  }\n\n  if (el.h === 1) {\n    output += ` ${el.h} ${api.storage.lang('bookmarksItem_Hour')}`;\n  } else if (el.h > 1) {\n    output += ` ${el.h} ${api.storage.lang('bookmarksItem_Hours')}`;\n  }\n\n  if (el.m === 1) {\n    output += ` ${el.m} ${api.storage.lang('bookmarksItem_min')}`;\n  } else if (el.m > 1) {\n    output += ` ${el.m} ${api.storage.lang('bookmarksItem_mins')}`;\n  }\n\n  if (el.s === 1) {\n    output += ` ${el.s} ${api.storage.lang('bookmarksItem_sec')}`;\n  } else if (el.s > 1) {\n    output += ` ${el.s} ${api.storage.lang('bookmarksItem_secs')}`;\n  }\n\n  return output.trim();\n}\n\nexport function msDiffToShortTimeString(ms: number): string {\n  return timeToString(shortTime(msToTime(ms)));\n}\n\nexport function timestampToShortTime(tm: number, ago = true): string {\n  if (!tm) return '';\n  const curTime = Date.now();\n  let diff;\n  let future;\n  if (curTime > tm) {\n    future = false;\n    diff = curTime - tm;\n  } else {\n    future = true;\n    diff = tm - curTime;\n  }\n\n  if (diff < 30 * 1000) return api.storage.lang('bookmarksItem_now');\n\n  let short = msDiffToShortTimeString(diff);\n\n  if (!future && ago) short = api.storage.lang('bookmarksItem_ago', [short]);\n\n  return short;\n}\n\nexport function timestampToShortDate(ts: number): string {\n  const date = new Date(ts);\n\n  const monthAbbreviation = date.toLocaleString('default', { month: 'short' });\n  const dayOfMonth = date.getDate();\n  const year = date.getFullYear();\n\n  return `${monthAbbreviation} ${dayOfMonth}, ${year}`;\n}\n","import {\n  releaseItemInterface,\n  progressIsOld,\n  single as updateProgress,\n} from '../background/releaseProgressUtils';\nimport { timestampToShortTime } from './time';\n\nexport class Progress {\n  protected logger;\n\n  protected releaseItem: undefined | releaseItemInterface = undefined;\n\n  constructor(\n    protected cacheKey: string,\n    protected type: 'anime' | 'manga',\n  ) {\n    this.logger = con.m('progress').m(cacheKey.toString());\n    return this;\n  }\n\n  // Progress\n  protected async initReleaseProgress(liveData) {\n    if (liveData) await updateProgress(liveData, this.type, liveData.progressMode);\n\n    const releaseItem: undefined | releaseItemInterface = await api.storage.get(\n      `release/${this.type}/${this.cacheKey}`,\n    );\n\n    this.logger.m('Init Release').log(releaseItem);\n    if (!releaseItem) return;\n    if (progressIsOld(releaseItem)) {\n      this.logger.log('Too old');\n      return;\n    }\n\n    this.releaseItem = releaseItem;\n  }\n\n  protected getProgressCurrentEpisode() {\n    const re = this.releaseItem;\n    if (re && re.value && re.value.lastEp && re.value.lastEp.total) return re.value.lastEp.total;\n    return null;\n  }\n\n  protected isProgressFinished() {\n    const re = this.releaseItem;\n    if (re && re.finished) return true;\n    return false;\n  }\n\n  protected getProgressPrediction() {\n    const re = this.releaseItem;\n    if (re && re.value && re.value.predicition && re.value.predicition.timestamp)\n      return re.value.predicition.timestamp;\n    return null;\n  }\n\n  protected getProgressLastTimestamp() {\n    const re = this.releaseItem;\n    if (re && re.value && re.value.lastEp && re.value.lastEp.timestamp)\n      return re.value.lastEp.timestamp;\n    return null;\n  }\n\n  // General\n  async init(\n    live:\n      | {\n          uid: number;\n          apiCacheKey: number | string | null;\n          title: string;\n          cacheKey: string;\n          progressMode: string;\n          watchedEp: number;\n          single: any;\n          xhr?: object;\n        }\n      | false = false,\n  ) {\n    await Promise.all([this.initReleaseProgress(live)]);\n\n    return this;\n  }\n\n  getCurrentEpisode(): number {\n    // @ts-ignore\n    if (!api.settings.get('epPredictions')) return null;\n    return this.getProgressCurrentEpisode();\n  }\n\n  isFinished(): boolean {\n    return this.isProgressFinished();\n  }\n\n  isAiring(): boolean {\n    return !this.isFinished();\n  }\n\n  getPredictionTimestamp(): number {\n    if (!this.getProgressPrediction() || new Date().getTime() > this.getProgressPrediction())\n      return NaN;\n    return this.getProgressPrediction();\n  }\n\n  getPrediction(): string {\n    return timestampToShortTime(this.getPredictionTimestamp());\n  }\n\n  getPredictionText(): string {\n    const pre = this.getPrediction();\n    if (pre) return api.storage.lang(`prediction_Episode_${this.type}`, [pre]);\n    return '';\n  }\n\n  getLastTimestamp(): number {\n    return this.getProgressLastTimestamp();\n  }\n\n  getLast(ago = true): string {\n    return timestampToShortTime(this.getLastTimestamp(), ago);\n  }\n\n  getLastText(): string {\n    const last = this.getLast(false);\n    if (last) return api.storage.lang(`prediction_Last_${this.type}`, [last]);\n    return '';\n  }\n\n  getAuto(): string {\n    const preT = this.getPrediction();\n    if (preT) return preT;\n    const lastT = this.getLast();\n    if (lastT) return lastT;\n    return '';\n  }\n\n  getAutoText(): string {\n    const preT = this.getPredictionText();\n    if (preT) return preT;\n    const lastT = this.getLastText();\n    if (lastT) return lastT;\n    return '';\n  }\n\n  getColor(): string {\n    return '#f57c00';\n  }\n\n  getBars(curEp, totalEp): { totalWidth: number; epWidth: number; predWidth: number } {\n    const predEp = this.getCurrentEpisode();\n    const res = {\n      totalWidth: 100,\n      epWidth: 0,\n      predWidth: 0,\n    };\n    if (!totalEp) {\n      res.totalWidth = 0;\n      if (curEp && (!predEp || curEp >= predEp)) {\n        totalEp = Math.ceil(curEp * 1.2);\n      } else if (predEp && (!curEp || curEp < predEp)) {\n        totalEp = Math.ceil(predEp * 1.2);\n      } else {\n        return res;\n      }\n    }\n    if (curEp) {\n      res.epWidth = (curEp / totalEp) * 100;\n      if (res.epWidth > 100) res.epWidth = 100;\n    }\n    if (predEp) {\n      res.predWidth = (predEp / totalEp) * 100;\n      if (res.predWidth > 100) res.predWidth = 100;\n    }\n    return res;\n  }\n}\n","import { EventEmitter2 } from 'eventemitter2';\n\nconst scriptId = Math.floor(Math.random() * 1000000000);\n\nexport const emitter = new EventEmitter2({\n  wildcard: true,\n});\n\nexport function globalEmit(eventName: string, ...params) {\n  con\n    .m('Global')\n    .m('Emit')\n    .debug(eventName, ...params);\n\n  emitter.emit(`${eventName}`, ...params);\n\n  if (typeof api !== 'undefined' && api && api.type === 'webextension') {\n    chrome.runtime.sendMessage({\n      name: 'emitter',\n      item: { event: eventName, params, id: scriptId },\n    });\n  }\n}\n\nif (typeof api !== 'undefined' && api && api.type === 'webextension') {\n  chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n    if (message.name && message.name === 'emitter') {\n      con.m('Global').m('Event').debug(message.item.id, message.item.event, message.item.params);\n\n      if (message.item.id !== scriptId) {\n        emitter.emit(message.item.event, ...message.item.params);\n      }\n    }\n  });\n}\n","/* eslint-disable max-classes-per-file */\nexport class MissingPlayerError extends Error {\n  public url;\n\n  constructor(url: string) {\n    const parts = url.split('/');\n    let domain = url;\n    if (parts.length > 2) domain = parts[2];\n    super(domain);\n    this.url = url;\n    this.name = 'MissingPlayerError';\n  }\n}\n\nexport class SafeError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'SafeError';\n  }\n}\n\nexport class MissingDataError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'MissingDataError';\n  }\n}\n\nexport class CustomDomainError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'CustomDomainError';\n  }\n}\n","/* eslint-disable max-classes-per-file */\nexport class NotAutenticatedError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'NotAutenticatedError';\n  }\n}\n\nexport class UrlNotSupportedError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'UrlNotSupportedError';\n  }\n}\n\nexport class ServerOfflineError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'ServerOfflineError';\n  }\n}\n\nexport class NotFoundError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'NotFoundError';\n  }\n}\n\nexport class UnexpectedResponseError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'UnexpectedResponseError';\n  }\n}\n\nexport function parseJson(json) {\n  try {\n    return JSON.parse(json);\n  } catch (e) {\n    throw new UnexpectedResponseError(e.message);\n  }\n}\n\nexport function errorMessage(error, authenticationUrl: string) {\n  if (error instanceof NotAutenticatedError) {\n    return api.storage.lang('Error_Authenticate', [authenticationUrl]);\n  }\n  if (error instanceof ServerOfflineError) {\n    return `Server Offline`;\n  }\n  if (error instanceof UrlNotSupportedError) {\n    return `Incorrect url provided [${error.message}]`;\n  }\n  if (error instanceof NotFoundError) {\n    return `Could not find this entry`;\n  }\n  return error.message;\n}\n","import { ScoreModeStrategy } from './ScoreModeStrategy';\n\nexport const point10: ScoreModeStrategy = {\n  ui: {\n    module: 'dropdown',\n  },\n  getOptions() {\n    return [\n      { value: 0, label: api.storage.lang('UI_Score_Not_Rated') },\n      { value: 100, label: api.storage.lang('UI_Score_Masterpiece') },\n      { value: 90, label: api.storage.lang('UI_Score_Great') },\n      { value: 80, label: api.storage.lang('UI_Score_VeryGood') },\n      { value: 70, label: api.storage.lang('UI_Score_Good') },\n      { value: 60, label: api.storage.lang('UI_Score_Fine') },\n      { value: 50, label: api.storage.lang('UI_Score_Average') },\n      { value: 40, label: api.storage.lang('UI_Score_Bad') },\n      { value: 30, label: api.storage.lang('UI_Score_VeryBad') },\n      { value: 20, label: api.storage.lang('UI_Score_Horrible') },\n      { value: 10, label: api.storage.lang('UI_Score_Appalling') },\n    ];\n  },\n  valueToOptionValue(value) {\n    if (!value) return 0;\n    if (value < 10) return 10;\n    return Math.round(value / 10) * 10;\n  },\n  optionValueToValue(optionValue) {\n    if (!optionValue) return 0;\n    return Number(optionValue);\n  },\n};\n","import * as definitions from './definitions';\n\nimport { Progress } from '../utils/progress';\nimport { predictionXhrGET } from '../background/releaseProgressUtils';\n\nimport { emitter, globalEmit } from '../utils/emitter';\nimport { SafeError } from '../utils/errors';\nimport { errorMessage as _errorMessage } from './Errors';\nimport { point10 } from './ScoreMode/point10';\nimport { SyncTypes } from './helper';\n\nObject.seal(emitter);\n\nexport abstract class SingleAbstract {\n  constructor(protected url: string) {\n    this.handleUrl(url);\n    this.logger = con.m('[S]', '#348fff');\n    return this;\n  }\n\n  protected logger;\n\n  protected type: definitions.contentType | null = null;\n\n  protected persistanceState;\n\n  protected undoState;\n\n  protected lastError;\n\n  protected askCompleted = false;\n\n  public abstract shortName: string;\n\n  protected abstract authenticationUrl: string;\n\n  protected rewatchingSupport = true;\n\n  protected ids = {\n    mal: NaN,\n    ani: NaN,\n    kitsu: {\n      id: NaN,\n      slug: '',\n    },\n    simkl: NaN,\n  };\n\n  protected options: {\n    u: string;\n    c: any;\n    r: any;\n    p: any;\n  } | null = null;\n\n  protected abstract handleUrl(url: string);\n\n  public getType() {\n    return this.type;\n  }\n\n  public getUrl() {\n    return this.url;\n  }\n\n  public supportsRewatching() {\n    return this.rewatchingSupport;\n  }\n\n  public abstract getCacheKey();\n\n  public abstract getPageId();\n\n  public getApiCacheKey(): string | number {\n    return this.getKey(['ANILIST']);\n  }\n\n  public getRulesCacheKey(): string | number {\n    return this.getKey(['ANILIST', 'KITSU'], false);\n  }\n\n  abstract _setStatus(status: definitions.status): void;\n\n  public setStatus(status: definitions.status): SingleAbstract {\n    status = Number(status);\n    this._setStatus(status);\n    return this;\n  }\n\n  abstract _getStatus(): definitions.status | number;\n\n  public getStatus(): definitions.status {\n    if (!this.isOnList()) return definitions.status.NoState;\n    return this._getStatus();\n  }\n\n  public getScoreMode() {\n    return point10;\n  }\n\n  abstract _setScore(score: definitions.score): void;\n\n  /**\n   * @deprecated Use setAbsoluteScore instead\n   */\n  public setScore(score: definitions.score): SingleAbstract {\n    score = parseInt(`${score}`);\n    if (!score) score = 0;\n    this._setScore(score);\n    return this;\n  }\n\n  abstract _getScore(): definitions.score;\n\n  /**\n   * @deprecated Use getAbsoluteScore instead\n   */\n  public getScore(): definitions.score {\n    const score = this._getScore();\n    if (!score) return 0;\n    return score;\n  }\n\n  abstract _setAbsoluteScore(score: definitions.score100): void;\n\n  public setAbsoluteScore(score: definitions.score100): SingleAbstract {\n    score = parseInt(`${score}`);\n    this._setAbsoluteScore(score);\n    return this;\n  }\n\n  abstract _getAbsoluteScore(): definitions.score100;\n\n  public getAbsoluteScore(): definitions.score100 {\n    const score = this._getAbsoluteScore();\n    if (!score) return 0;\n    return score;\n  }\n\n  abstract _setEpisode(episode: number): void;\n\n  public setEpisode(episode: number): SingleAbstract {\n    episode = parseInt(`${episode}`);\n    if (this.getTotalEpisodes() && episode > this.getTotalEpisodes())\n      episode = this.getTotalEpisodes();\n    this._setEpisode(episode);\n    return this;\n  }\n\n  abstract _getEpisode(): number;\n\n  public getEpisode(): number {\n    return this._getEpisode();\n  }\n\n  abstract _setVolume(volume: number): void;\n\n  public setVolume(volume: number): SingleAbstract {\n    this._setVolume(volume);\n    return this;\n  }\n\n  abstract _getVolume(): number;\n\n  public getVolume(): number {\n    return this._getVolume();\n  }\n\n  abstract _setTags(tags: string): void;\n\n  abstract _getTags(): string;\n\n  public setStreamingUrl(streamingUrl: string): SingleAbstract {\n    if (this.options) {\n      this.options.u = streamingUrl;\n    }\n    return this;\n  }\n\n  public getStreamingUrl(): string | undefined {\n    if (this.options && this.options.u) {\n      return this.options.u;\n    }\n\n    return undefined;\n  }\n\n  public cleanTags() {\n    this.options = null;\n  }\n\n  protected progress: false | Progress = false;\n\n  protected progressXhr;\n\n  public async initProgress() {\n    const xhr = await predictionXhrGET(this.getType()!, this.getApiCacheKey());\n    return new Progress(this.getCacheKey(), this.getType()!)\n      .init({\n        uid: this.getCacheKey(),\n        apiCacheKey: this.getApiCacheKey(),\n        title: this.getTitle(),\n        cacheKey: this.getCacheKey(),\n        progressMode: this.getProgressMode(),\n        watchedEp: this.getEpisode(),\n        single: this,\n        xhr,\n      })\n      .then(progress => {\n        this.updateProgress = false;\n        this.progress = progress;\n        this.progressXhr = xhr;\n      });\n  }\n\n  public getProgress() {\n    if (!this.progress) return false;\n    return this.progress;\n  }\n\n  public getProgressFormated() {\n    const op: {\n      label: string;\n      key: string;\n      state: 'complete' | 'ongoing' | 'dropped' | 'discontinued';\n      type: 'dub' | 'sub';\n      dropped: boolean;\n      episode: Number;\n      lastEp?: {\n        total: number;\n        timestamp?: number;\n      };\n      predicition?: {\n        timestamp: number;\n        probability: 'low' | 'medium' | 'high';\n      };\n    }[] = [];\n    const languageNames = new Intl.DisplayNames('en', { type: 'language' });\n    con.log(this.progressXhr);\n    if (this.progressXhr && Object.keys(this.progressXhr).length) {\n      this.progressXhr.forEach(el => {\n        op.push({\n          type: el.type,\n          key: el.id,\n          state: el.state,\n          label: languageNames.of(el.lang.replace(/^jp$/, 'ja')) || el.lang,\n          dropped: el.state === 'dropped' || el.state === 'discontinued',\n          episode: el.lastEp && el.lastEp.total ? el.lastEp.total : 0,\n          lastEp: el.lastEp,\n          predicition: el.prediction,\n        });\n      });\n    }\n    return op;\n  }\n\n  public getProgressOptions() {\n    return this.getProgressFormated().filter(el => el.state !== 'complete');\n  }\n\n  public getProgressCompleted() {\n    return this.getProgressFormated().filter(el => el.state === 'complete');\n  }\n\n  private updateProgress = false;\n\n  public getProgressMode(): string {\n    if (this.options && this.options.p) {\n      return this.options.p;\n    }\n\n    return '';\n  }\n\n  public setProgressMode(mode: string): void {\n    if (this.options) {\n      this.options.p = mode;\n      this.updateProgress = true;\n    }\n    if (!api.settings.get('malTags')) {\n      utils\n        .setEntrySettings(this.type, this.getCacheKey(), this.options, this._getTags())\n        .then(() => this.initProgress());\n    }\n  }\n\n  public getProgressKey() {\n    let mode = this.getProgressMode();\n\n    if (!mode) {\n      if (this.getType() === 'anime') {\n        mode = api.settings.get('progressIntervalDefaultAnime');\n      } else {\n        mode = api.settings.get('progressIntervalDefaultManga');\n      }\n    }\n\n    if (!mode) return null;\n\n    const res = /^([^/]*)\\/(.*)$/.exec(mode);\n\n    if (!res) return null;\n\n    return {\n      key: mode,\n      lang: res[1],\n      type: res[2],\n    };\n  }\n\n  public getPageRelations(): { name: string; icon: string; link: string }[] {\n    const name = this.shortName;\n    const res: { name: string; icon: string; link: string }[] = [];\n\n    if (this.ids.mal && name !== 'MAL') {\n      res.push({\n        name: 'MAL',\n        icon: 'https://cdn.myanimelist.net/images/favicon.ico',\n        link: `https://myanimelist.net/${this.type}/${this.ids.mal}`,\n      });\n    }\n\n    if (this.ids.ani && name !== 'AniList') {\n      res.push({\n        name: 'AniList',\n        icon: 'https://anilist.co/img/icons/favicon-32x32.png',\n        link: `https://anilist.co/${this.type}/${this.ids.ani}`,\n      });\n    }\n\n    if (this.ids.kitsu.id && name !== 'Kitsu') {\n      res.push({\n        name: 'Kitsu',\n        icon: 'https://kitsu.app/favicon-32x32-3e0ecb6fc5a6ae681e65dcbc2bdf1f17.png',\n        link: `https://kitsu.app/${this.type}/${this.ids.kitsu.id}`,\n      });\n    }\n\n    if (this.ids.simkl && name !== 'Simkl') {\n      res.push({\n        name: 'Simkl',\n        icon: 'https://eu.simkl.in/img_favicon/v2/favicon-32x32.png',\n        link: `https://simkl.com/${this.type}/${this.ids.simkl}`,\n      });\n    }\n\n    return res;\n  }\n\n  public fillRelations(): Promise<void> {\n    return Promise.resolve();\n  }\n\n  abstract _update(): Promise<void>;\n\n  public update(): Promise<void> {\n    this.logger.log('[SINGLE]', 'Update info', this.ids);\n    this.lastError = null;\n    return this._update()\n      .catch(e => {\n        this.lastError = e;\n        throw e;\n      })\n      .then(() => {\n        this.persistanceState = this.getStateEl();\n\n        return utils.getEntrySettings(this.type, this.getCacheKey(), this._getTags());\n      })\n      .then(options => {\n        this.options = options;\n        this.registerEvent();\n        this.emitUpdate('state');\n      });\n  }\n\n  abstract _sync(): Promise<void>;\n\n  public async sync(): Promise<void> {\n    this.logger.log('[SINGLE]', 'Sync', this.ids);\n    this.lastError = null;\n    this._setTags(\n      await utils.setEntrySettings(this.type, this.getCacheKey(), this.options, this._getTags()),\n    );\n    return this._sync()\n      .catch(e => {\n        this.lastError = e;\n        throw e;\n      })\n      .then(() => {\n        this.undoState = this.persistanceState;\n        if (this.updateProgress) this.initProgress();\n        this._onList = true;\n        this.emitUpdate();\n      });\n  }\n\n  public emitUpdate(action: 'update' | 'state' = 'update') {\n    globalEmit(`${action}.${this.getCacheKey()}`, {\n      id: this.getPageId(),\n      type: this.getType(),\n      cacheKey: this.getCacheKey(),\n      state: this.getStateEl(),\n      meta: {\n        title: this.getTitle(),\n        image: this.getImage(),\n        malId: this.getMalId(),\n        totalEp: this.getTotalEpisodes(),\n        url: this.getUrl(),\n      },\n    });\n  }\n\n  abstract _delete(): Promise<void>;\n\n  public async delete(): Promise<void> {\n    return this._delete().then(() => {\n      this._onList = false;\n      globalEmit(`delete.${this.getCacheKey()}`, {\n        id: this.getPageId(),\n        type: this.getType(),\n        cacheKey: this.getCacheKey(),\n      });\n    });\n  }\n\n  protected globalUpdateEvent;\n\n  protected registerEvent() {\n    if (!this.globalUpdateEvent) {\n      this.globalUpdateEvent = emitter.on(`update.${this.getCacheKey()}`, data =>\n        this.updateEvent(data),\n      );\n    }\n  }\n\n  protected updateEvent(data) {\n    if (this.isDirty()) {\n      this.logger.log('Ignore event');\n      return;\n    }\n\n    if (data && data.state) {\n      this.setStateEl(data.state);\n      this.persistanceState = this.getStateEl();\n      emitter.emit('syncPage_fillUi');\n    }\n  }\n\n  public isDirty(): boolean {\n    return (\n      JSON.stringify(this.persistanceState) !== JSON.stringify(this.getStateEl()) ||\n      this.updateProgress\n    );\n  }\n\n  public undo(): Promise<void> {\n    this.logger.log('[SINGLE]', 'Undo', this.undoState);\n    if (!this.undoState) throw new SafeError('No undo state found');\n    if (!this.undoState.onList) {\n      // @ts-ignore\n      if (typeof this.delete === 'undefined') throw new Error('Deleting an entry is not supported');\n      // @ts-ignore\n      return this.delete().then(() => {\n        this.setStateEl(this.undoState);\n        this.undoState = null;\n      });\n    }\n    this.setStateEl(this.undoState);\n    return this.sync().then(() => {\n      this.undoState = null;\n    });\n  }\n\n  abstract _getTitle(raw: boolean): string;\n\n  public getTitle(raw = false) {\n    return this._getTitle(raw);\n  }\n\n  abstract _getTotalEpisodes(): number;\n\n  public getTotalEpisodes() {\n    let eps = this._getTotalEpisodes();\n    if (!eps) eps = 0;\n    return eps;\n  }\n\n  abstract _getTotalVolumes(): number;\n\n  public getTotalVolumes() {\n    return this._getTotalVolumes();\n  }\n\n  protected _onList = false;\n\n  public isOnList() {\n    return this._onList;\n  }\n\n  protected _authenticated = false;\n\n  public isAuthenticated() {\n    return this._authenticated;\n  }\n\n  abstract _getDisplayUrl(): string;\n\n  public getDisplayUrl(): string {\n    return this._getDisplayUrl();\n  }\n\n  public getMalUrl(): string | null {\n    if (!Number.isNaN(this.ids.mal)) {\n      return `https://myanimelist.net/${this.getType()}/${this.ids.mal}`;\n    }\n    return null;\n  }\n\n  public getMalId(): number | null {\n    if (!Number.isNaN(this.ids.mal)) {\n      return this.ids.mal;\n    }\n    return null;\n  }\n\n  public getIds() {\n    return this.ids;\n  }\n\n  abstract _getImage(): string;\n\n  public getImage(): string {\n    return this._getImage();\n  }\n\n  public setImage?(url: string): void;\n\n  abstract _getRating(): Promise<string>;\n\n  public getRating(): Promise<string> {\n    return this._getRating().then(rating => {\n      if (!rating) return 'N/A';\n      return rating;\n    });\n  }\n\n  public setResumeWatching(url: string, ep: number) {\n    return utils.setResumeWaching(url, ep, this.type, this.getCacheKey());\n  }\n\n  public getResumeWatching(): { url: string; ep: number } | null {\n    if (this.options && this.options.r) return this.options.r;\n    return null;\n  }\n\n  public setContinueWatching(url: string, ep: number) {\n    return utils.setContinueWaching(url, ep, this.type, this.getCacheKey());\n  }\n\n  public getContinueWatching(): { url: string; ep: number } | null {\n    if (this.options && this.options.c) return this.options.c;\n    return null;\n  }\n\n  public increaseRewatchCount(): void {\n    //  do nothing\n  }\n\n  getStateEl() {\n    return {\n      onList: this.isOnList(),\n      episode: this.getEpisode(),\n      volume: this.getVolume(),\n      status: this.getStatus(),\n      score: this.getScore(),\n      absoluteScore: this.getAbsoluteScore(),\n    };\n  }\n\n  setStateEl(state) {\n    this._onList = state.onList;\n    this.setEpisode(state.episode);\n    this.setVolume(state.volume);\n    this.setStatus(state.status);\n    this.setScore(state.score);\n    if (state.absoluteScore) this.setAbsoluteScore(state.absoluteScore);\n  }\n\n  getStateDiff() {\n    const persistance = this.getStateEl();\n    if (persistance && this.undoState) {\n      const diff: any = {};\n      for (const key in persistance) {\n        if (persistance[key] !== this.undoState[key]) {\n          diff[key] = persistance[key];\n        }\n      }\n      return diff;\n    }\n    return undefined;\n  }\n\n  public async lifeCycleHook(state: 'afterCheckSync' | 'beforeSync') {\n    if (this.askCompleted) {\n      if (\n        (state === 'afterCheckSync' && api.settings.get('askBefore')) ||\n        (state === 'beforeSync' && !api.settings.get('askBefore'))\n      ) {\n        this.askCompleted = false;\n        if (this.getStatus() === definitions.status.Rewatching) {\n          await this.finishRewatchingMessage();\n        } else {\n          await this.finishWatchingMessage();\n        }\n      }\n    }\n  }\n\n  public async checkSync(episode: number, volume?: number): Promise<boolean> {\n    const curEpisode = this.getEpisode();\n    const curStatus = this.getStatus();\n    const curVolume = this.getVolume();\n\n    if (curStatus === definitions.status.Completed) {\n      if (episode === 1) {\n        return this.startRewatchingMessage();\n      }\n      return false;\n    }\n\n    if (\n      curEpisode >= episode &&\n      // Novel Volume\n      !(\n        typeof volume !== 'undefined' &&\n        (curVolume || volume > 1 || !episode) &&\n        volume > curVolume\n      )\n    ) {\n      return false;\n    }\n\n    if (episode && episode === this.getTotalEpisodes()) {\n      this.askCompleted = true;\n      return true;\n    }\n\n    if (curStatus !== definitions.status.Watching && curStatus !== definitions.status.Rewatching) {\n      return this.startWatchingMessage();\n    }\n\n    return true;\n  }\n\n  public async startWatchingMessage() {\n    return utils\n      .flashConfirm(api.storage.lang(`syncPage_flashConfirm_start_${this.getType()}`), 'add')\n      .then(res => {\n        if (res) this.setStatus(definitions.status.Watching);\n        return res;\n      });\n  }\n\n  public async finishWatchingMessage(): Promise<boolean> {\n    const currentScore = this.getScoreCheckboxValue();\n\n    let checkHtml =\n      '<div><select id=\"finish_score\" style=\"margin-top:5px; color:white; background-color:#4e4e4e; border: none;\">';\n    this.getScoreCheckbox().forEach(el => {\n      checkHtml += `<option value=\"${el.value}\" ${currentScore === el.value ? 'selected' : ''}>${\n        el.label\n      }</option>`;\n    });\n    checkHtml += '</select></div>';\n\n    return utils\n      .flashConfirm(api.storage.lang('syncPage_flashConfirm_complete') + checkHtml, 'complete')\n      .then(res => {\n        if (res) {\n          this.setStatus(definitions.status.Completed);\n          const finishScore = Number(j.$('#finish_score').val());\n          if (finishScore > 0) {\n            this.logger.log(`finish_score: ${j.$('#finish_score :selected').val()}`);\n            this.handleScoreCheckbox(j.$('#finish_score :selected').val());\n          }\n        }\n\n        return res;\n      });\n  }\n\n  public async startRewatchingMessage(): Promise<boolean> {\n    return utils\n      .flashConfirm(\n        api.storage.lang(`syncPage_flashConfirm_rewatch_start_${this.getType()}`),\n        'add',\n      )\n      .then(res => {\n        if (res) this.setStatus(definitions.status.Rewatching);\n        return res;\n      });\n  }\n\n  public async finishRewatchingMessage(): Promise<boolean> {\n    return utils\n      .flashConfirm(\n        api.storage.lang(`syncPage_flashConfirm_rewatch_finish_${this.getType()}`),\n        'complete',\n      )\n      .then(res => {\n        if (res) {\n          this.setStatus(definitions.status.Completed);\n          this.increaseRewatchCount();\n        }\n        return res;\n      });\n  }\n\n  public getScoreCheckbox() {\n    return this.getScoreMode().getOptions();\n  }\n\n  public getScoreCheckboxValue() {\n    return this.getScoreMode().valueToOptionValue(this.getAbsoluteScore());\n  }\n\n  public handleScoreCheckbox(value) {\n    this.setAbsoluteScore(this.getScoreMode().optionValueToValue(value));\n  }\n\n  public getDisplayScoreCheckbox() {\n    const curScore = this.getScoreCheckboxValue();\n    const labelEl = this.getScoreCheckbox().filter(el => el.value === curScore);\n    if (labelEl.length) return labelEl[0].label;\n    return '';\n  }\n\n  public getStatusCheckbox() {\n    const statusEs = [\n      {\n        value: '1',\n        label: api.storage.lang(`UI_Status_watching_${this.getType()}`),\n      },\n      { value: '2', label: api.storage.lang('UI_Status_Completed') },\n      { value: '3', label: api.storage.lang('UI_Status_OnHold') },\n      { value: '4', label: api.storage.lang('UI_Status_Dropped') },\n      {\n        value: '6',\n        label: api.storage.lang(`UI_Status_planTo_${this.getType()}`),\n      },\n    ];\n\n    if (this.rewatchingSupport) {\n      statusEs.push({\n        value: '23',\n        label: api.storage.lang(`UI_Status_Rewatching_${this.getType()}`),\n      });\n    }\n\n    return statusEs;\n  }\n\n  public handleStatusCheckbox(value) {\n    this.setStatus(value);\n  }\n\n  public getStatusCheckboxValue() {\n    return this.getStatus();\n  }\n\n  public getKey(allowed: SyncTypes[], forceMal = true) {\n    if (forceMal && this.ids.mal) return this.ids.mal;\n    if (this.ids.ani && allowed.includes('ANILIST')) return `anilist:${this.ids.ani}`;\n    if (this.ids.kitsu.id && allowed.includes('KITSU')) return `kitsu:${this.ids.kitsu.id}`;\n    if (this.ids.simkl && allowed.includes('SIMKL')) return `simkl:${this.ids.simkl}`;\n    return this.ids.mal;\n  }\n\n  public getLastError() {\n    return this.lastError;\n  }\n\n  public getLastErrorMessage() {\n    return this.errorMessage(this.getLastError());\n  }\n\n  flashmError(error) {\n    utils.flashm(this.errorMessage(error), { error: true, type: 'error' });\n  }\n\n  errorMessage(error) {\n    return _errorMessage(error, this.authenticationUrl);\n  }\n}\n","import { NotAutenticatedError, NotFoundError, parseJson, ServerOfflineError } from '../Errors';\n\nconst logger = con.m('kitsu', '#d65e43');\n\nexport function translateList(aniStatus, malStatus: null | number = null) {\n  const list = {\n    current: 1,\n    planned: 6,\n    completed: 2,\n    dropped: 4,\n    on_hold: 3,\n  };\n  if (malStatus !== null) {\n    return Object.keys(list).find(key => list[key] === malStatus);\n  }\n  return list[aniStatus];\n}\n\nexport function getTitle(titles, canonicalTitle) {\n  let title: string;\n  switch (api.settings.get('kitsuOptions').titleLanguagePreference) {\n    case 'english':\n      title = titles.en;\n      break;\n    case 'romanized':\n      title = titles.en_jp;\n      break;\n    case 'canonical':\n    default:\n      title = canonicalTitle;\n  }\n\n  if (typeof title === 'undefined' || !title) title = titles.en;\n  if (typeof title === 'undefined' || !title) title = titles.en_jp;\n  if (typeof title === 'undefined' || !title) title = titles.ja_jp;\n  if (typeof title === 'undefined' || !title) {\n    const keys = Object.keys(titles);\n    if (!keys.length) {\n      return 'No Title';\n    }\n    title = titles[keys[0]];\n  }\n\n  return title;\n}\n\nexport function getCacheKey(id, kitsuId) {\n  if (Number.isNaN(id) || !id) {\n    return `kitsu:${kitsuId}`;\n  }\n  return id;\n}\n\nexport function malToKitsu(malid: number, type: 'anime' | 'manga') {\n  return apiCall(\n    'GET',\n    `https://kitsu.app/api/edge/mappings?filter[externalSite]=myanimelist/${type}&filter[externalId]=${malid}&include=item&fields[item]=id`,\n    {},\n    false,\n  );\n}\n\nexport function kitsuToMal(kitsuId: number, type: 'anime' | 'manga') {\n  return api.request\n    .xhr('GET', {\n      url: `https://kitsu.app/api/edge/${type}/${kitsuId}/mappings?filter[externalSite]=myanimelist/${type}`,\n      headers: {\n        'Content-Type': 'application/vnd.api+json',\n        Accept: 'application/vnd.api+json',\n      },\n    })\n    .then(response => {\n      const res = JSON.parse(response.responseText);\n      con.log('[KtoM]', res);\n      if (typeof res.data === 'undefined' || !res.data.length) return null;\n      return Number(res.data[0].attributes.externalId);\n    });\n}\n\nexport function apiCall(\n  mode: 'GET' | 'POST' | 'DELETE' | 'PUT',\n  url,\n  variables = {},\n  authentication = true,\n) {\n  const headers: any = {\n    'Content-Type': 'application/vnd.api+json',\n    Accept: 'application/vnd.api+json',\n  };\n  if (authentication) headers.Authorization = `Bearer ${api.settings.get('kitsuToken')}`;\n  return api.request\n    .xhr(mode, {\n      url,\n      headers,\n      data: mode !== 'GET' ? JSON.stringify(variables) : undefined,\n    })\n    .then(response => {\n      if ((response.status > 499 && response.status < 600) || response.status === 0) {\n        throw new ServerOfflineError(`Server Offline status: ${response.status}`);\n      }\n\n      if (response.status === 204) {\n        return {};\n      }\n\n      const res = parseJson(response.responseText);\n\n      if (typeof res.errors !== 'undefined' && res.errors.length) {\n        logger.error('[SINGLE]', 'Error', res.errors);\n        const error = res.errors[0];\n        switch (parseInt(error.status)) {\n          case 401:\n          case 403:\n            throw new NotAutenticatedError(error.detail);\n          case 404:\n            throw new NotFoundError(error.detail);\n          default:\n            throw new Error(error.detail);\n        }\n      }\n\n      return res;\n    });\n}\n","import { ScoreModeStrategy } from './ScoreModeStrategy';\n\nexport const point20decimal: ScoreModeStrategy = {\n  ui: {\n    module: 'dropdown',\n  },\n  getOptions() {\n    const resArr = [{ value: 0, label: api.storage.lang('UI_Score_Not_Rated') }];\n    for (let i = 2; i < 21; i++) {\n      resArr.push({\n        value: i * 5,\n        label: (i / 2).toFixed(1).toString(),\n      });\n    }\n    return resArr;\n  },\n  valueToOptionValue(value) {\n    if (!value) return 0;\n    if (value < 10) return 10;\n    return Math.round(Number(value) / 5) * 5;\n  },\n  optionValueToValue(optionValue) {\n    if (!optionValue) return 0;\n    return Number(optionValue);\n  },\n};\n","import { ScoreModeStrategy } from './ScoreModeStrategy';\n\nexport const smiley4: ScoreModeStrategy = {\n  ui: {\n    module: 'click',\n    type: 'smiley',\n  },\n  getOptions() {\n    return [\n      { value: 0, label: api.storage.lang('UI_Score_Not_Rated') },\n      { value: 100, label: '' },\n      { value: 70, label: '' },\n      { value: 40, label: '' },\n      { value: 10, label: '' },\n    ];\n  },\n  valueToOptionValue(value) {\n    if (!value) return 0;\n    if (value < 25) return 10;\n    if (value < 55) return 40;\n    if (value < 85) return 70;\n    return 100;\n  },\n  optionValueToValue(optionValue) {\n    if (!optionValue) return 0;\n    return Number(optionValue);\n  },\n};\n","import { ScoreModeStrategy } from './ScoreModeStrategy';\n\nexport const point10decimal: ScoreModeStrategy = {\n  ui: {\n    module: 'dropdown',\n  },\n  getOptions() {\n    const resArr = [{ value: 0, label: api.storage.lang('UI_Score_Not_Rated') }];\n    for (let i = 1; i < 11; i++) {\n      resArr.push({\n        value: i * 10,\n        label: (i / 2).toFixed(1).toString(),\n      });\n    }\n    return resArr;\n  },\n  valueToOptionValue(value) {\n    if (!value) return 0;\n    if (value < 10) return 10;\n    return Math.round(value / 10) * 10;\n  },\n  optionValueToValue(optionValue) {\n    if (!optionValue) return 0;\n    return Number(optionValue);\n  },\n};\n","import { SingleAbstract } from '../singleAbstract';\nimport * as helper from './helper';\nimport { NotAutenticatedError, NotFoundError, UrlNotSupportedError } from '../Errors';\nimport { point10 } from '../ScoreMode/point10';\nimport { point20decimal } from '../ScoreMode/point20decimal';\nimport { smiley4 } from '../ScoreMode/smiley4';\nimport { point10decimal } from '../ScoreMode/point10decimal';\n\nexport class Single extends SingleAbstract {\n  constructor(protected url: string) {\n    super(url);\n    this.logger = con.m(this.shortName, '#d65e43');\n    return this;\n  }\n\n  private animeInfo: any;\n\n  listI() {\n    return this.animeInfo.data[0];\n  }\n\n  animeI() {\n    return this.animeInfo.included[0];\n  }\n\n  shortName = 'Kitsu';\n\n  authenticationUrl = 'https://kitsu.app/404?mal-sync=authentication';\n\n  protected handleUrl(url) {\n    if (url.match(/kitsu\\.app\\/(anime|manga)\\/.*/i)) {\n      this.type = utils.urlPart(url, 3) === 'anime' ? 'anime' : 'manga';\n      this.ids.kitsu.slug = utils.urlPart(url, 4);\n      return;\n    }\n    if (url.match(/myanimelist\\.net\\/(anime|manga)\\/\\d*/i)) {\n      this.type = utils.urlPart(url, 3) === 'anime' ? 'anime' : 'manga';\n      this.ids.mal = Number(utils.urlPart(url, 4));\n      return;\n    }\n    throw new UrlNotSupportedError(url);\n  }\n\n  getCacheKey() {\n    return this.getKey(['KITSU']);\n  }\n\n  getPageId() {\n    return this.ids.kitsu.id;\n  }\n\n  _getStatus() {\n    if (this.listI().attributes.reconsuming && this.listI().attributes.status === 'current')\n      return 23;\n    return parseInt(helper.translateList(this.listI().attributes.status));\n  }\n\n  _setStatus(status) {\n    if (status === 23) {\n      status = 1;\n      this.listI().attributes.reconsuming = true;\n    } else {\n      this.listI().attributes.reconsuming = false;\n    }\n    this.listI().attributes.status = helper.translateList(status, parseInt(status.toString()));\n  }\n\n  _getScore() {\n    if (!this.listI().attributes.ratingHundred) return 0;\n    const score = Math.round(this.listI().attributes.ratingHundred / 10);\n    if (score === 0) return 1;\n    return score;\n  }\n\n  _setScore(score) {\n    if (!score) {\n      this.listI().attributes.ratingHundred = null;\n      return;\n    }\n    this.listI().attributes.ratingHundred = score * 10;\n  }\n\n  _getAbsoluteScore() {\n    return Number(this.listI().attributes.ratingHundred);\n  }\n\n  _setAbsoluteScore(score) {\n    this.listI().attributes.ratingHundred = Number(score);\n  }\n\n  _getTwentyScore() {\n    const score = this.listI().attributes.ratingHundred;\n    if (!score) return null;\n    if (score < 5) return 1;\n    return Math.round(score / 5);\n  }\n\n  _getEpisode() {\n    return this.listI().attributes.progress;\n  }\n\n  _setEpisode(episode) {\n    this.listI().attributes.progress = parseInt(`${episode}`);\n  }\n\n  _getVolume() {\n    return this.listI().attributes.volumesOwned;\n  }\n\n  _setVolume(volume) {\n    this.listI().attributes.volumesOwned = volume;\n  }\n\n  _getTags() {\n    let tags = this.listI().attributes.notes;\n    if (tags === null || tags === 'null') tags = '';\n    return tags;\n  }\n\n  _setTags(tags) {\n    this.listI().attributes.notes = tags;\n  }\n\n  _getTitle() {\n    try {\n      return helper.getTitle(\n        this.animeI().attributes.titles,\n        this.animeI().attributes.canonicalTitle,\n      );\n    } catch (e) {\n      console.error('title', e);\n      return 'Failed';\n    }\n  }\n\n  _getTotalEpisodes() {\n    const eps = this.animeI().attributes.episodeCount\n      ? this.animeI().attributes.episodeCount\n      : this.animeI().attributes.chapterCount;\n    if (eps === null) return 0;\n    return eps;\n  }\n\n  _getTotalVolumes() {\n    const vol = this.animeI().attributes.volumeCount;\n    if (!vol) return 0;\n    return vol;\n  }\n\n  _getDisplayUrl() {\n    return `https://kitsu.app/${this.getType()}/${this.animeI().attributes.slug}`;\n  }\n\n  _getImage() {\n    return this.animeI().attributes.posterImage && this.animeI().attributes.posterImage.large\n      ? this.animeI().attributes.posterImage.large\n      : '';\n  }\n\n  _getRating() {\n    if (this.animeI().attributes.averageRating === null) return Promise.resolve('');\n    return Promise.resolve(`${this.animeI().attributes.averageRating}%`);\n  }\n\n  async _update() {\n    if (Number.isNaN(this.ids.mal)) {\n      /* eslint-disable-next-line no-var */\n      var kitsuSlugRes = await this.kitsuSlugtoKitsu(this.ids.kitsu.slug, this.getType());\n      try {\n        this.ids.kitsu.id = Number(kitsuSlugRes.res.data[0].id);\n        this.ids.mal = Number(kitsuSlugRes.malId);\n      } catch (e) {\n        this._authenticated = true;\n        throw new NotFoundError('Not found');\n      }\n    }\n    if (Number.isNaN(this.ids.kitsu.id)) {\n      /* eslint-disable-next-line no-var */\n      var kitsuRes = await this.malToKitsu(this.ids.mal, this.getType());\n      try {\n        const relation = kitsuRes.data.find(\n          item => item.relationships.item.data.type === this.getType(),\n        );\n        if (!relation) throw new NotFoundError('Not found');\n        this.ids.kitsu.id = Number(relation.relationships.item.data.id);\n      } catch (e) {\n        this._authenticated = true;\n        throw new NotFoundError(`No entry found for malId ${this.ids.mal}`);\n      }\n    }\n\n    this._authenticated = true;\n    return this.userId()\n      .then(userId => {\n        return this.apiCall(\n          'GET',\n          `https://kitsu.app/api/edge/library-entries?filter[user_id]=${userId}&filter[kind]=${this.getType()}&filter[${this.getType()}_id]=${\n            this.ids.kitsu.id\n          }&page[limit]=1&page[limit]=1&include=${this.getType()}&fields[${this.getType()}]=slug,titles,canonicalTitle,averageRating,posterImage,${\n            this.getType() === 'anime' ? 'episodeCount' : 'chapterCount,volumeCount'\n          }`,\n        );\n      })\n      .catch(e => {\n        if (e instanceof NotAutenticatedError) {\n          this._authenticated = false;\n          return { data: [], included: [] };\n        }\n        throw e;\n      })\n      .then(async res => {\n        const tempAnimeInfo = res;\n\n        this._onList = true;\n\n        if (!res.data.length) {\n          this._onList = false;\n          tempAnimeInfo.data[0] = {\n            attributes: {\n              notes: '',\n              progress: 0,\n              volumesOwned: 0,\n              reconsuming: false,\n              reconsumeCount: false,\n              ratingTwenty: null,\n              status: 'planned',\n            },\n          };\n          if (typeof kitsuRes !== 'undefined') {\n            tempAnimeInfo.included = kitsuRes.included;\n          } else if (kitsuSlugRes) {\n            tempAnimeInfo.included = kitsuSlugRes.res.data;\n          } else {\n            kitsuRes = await this.malToKitsu(this.ids.mal, this.getType());\n            tempAnimeInfo.included = kitsuRes.included;\n          }\n        }\n\n        if (tempAnimeInfo.data[0].attributes.ratingHundred) {\n          tempAnimeInfo.data[0].attributes.ratingHundred = 0;\n        } else {\n          tempAnimeInfo.data[0].attributes.ratingHundred = Number(\n            tempAnimeInfo.data[0].attributes.ratingTwenty * 5,\n          );\n        }\n\n        this.animeInfo = tempAnimeInfo;\n\n        try {\n          this.animeI();\n        } catch (e) {\n          this.logger.error(e);\n          throw new NotFoundError('Not found');\n        }\n\n        if (!this._authenticated) throw new NotAutenticatedError('Not Authenticated');\n      });\n  }\n\n  async _sync() {\n    const variables: any = {\n      data: {\n        attributes: {\n          notes: this.listI().attributes.notes,\n          progress: this.listI().attributes.progress,\n          volumesOwned: this.listI().attributes.volumesOwned,\n          reconsuming: this.listI().attributes.reconsuming,\n          reconsumeCount: this.listI().attributes.reconsumeCount,\n          ratingTwenty: this._getTwentyScore(),\n          status: this.listI().attributes.status,\n        },\n        type: 'library-entries',\n      },\n    };\n    const tType = this.getType();\n    if (!tType) return Promise.resolve();\n    let updateUrl;\n    let post;\n    if (this.isOnList()) {\n      updateUrl = `https://kitsu.app/api/edge/library-entries/${this.listI().id}`;\n      variables.data.id = this.listI().id;\n      post = 'PATCH';\n    } else {\n      updateUrl = 'https://kitsu.app/api/edge/library-entries/';\n      variables.data.relationships = {\n        [tType]: {\n          data: {\n            type: tType,\n            id: this.ids.kitsu.id,\n          },\n        },\n        user: {\n          data: {\n            type: 'users',\n            id: await this.userId(),\n          },\n        },\n      };\n      post = 'POST';\n    }\n\n    this.logger.log(post, variables);\n\n    return this.apiCall(post, updateUrl, variables).then(res => {\n      if (res && res.data && res.data.id) {\n        this.listI().id = res.data.id;\n      }\n      return res;\n    });\n  }\n\n  protected apiCall(\n    mode: 'GET' | 'POST' | 'DELETE' | 'PUT',\n    url,\n    variables = {},\n    authentication = true,\n  ) {\n    return helper.apiCall(mode, url, variables, authentication).catch(e => {\n      if (e instanceof NotAutenticatedError) throw new NotAutenticatedError(e.message);\n      throw e;\n    });\n  }\n\n  protected kitsuSlugtoKitsu(kitsuSlug: string, type: any) {\n    return this.apiCall(\n      'GET',\n      `https://kitsu.app/api/edge/${type}?filter[slug]=${kitsuSlug}&page[limit]=1&include=mappings`,\n      {},\n    )\n      .catch(e => {\n        if (e instanceof NotAutenticatedError) {\n          this._authenticated = false;\n          return this.apiCall(\n            'GET',\n            `https://kitsu.app/api/edge/${type}?filter[slug]=${kitsuSlug}&page[limit]=1&include=mappings`,\n            {},\n            false,\n          );\n        }\n        throw e;\n      })\n      .then(res => {\n        let malId = NaN;\n        if (typeof res !== 'undefined' && typeof res.included !== 'undefined') {\n          for (let k = 0; k < res.included.length; k++) {\n            const mapping = res.included[k];\n            if (mapping.type === 'mappings') {\n              if (mapping.attributes.externalSite === `myanimelist/${type}`) {\n                malId = Number(mapping.attributes.externalId);\n                res.included.splice(k, 1);\n                break;\n              } else if (mapping.attributes.externalSite === `anilist/${type}`) {\n                this.ids.ani = Number(mapping.attributes.externalId);\n              }\n            }\n          }\n        }\n        return { res, malId };\n      });\n  }\n\n  protected malToKitsu(malid: number, type: any) {\n    return this.apiCall(\n      'GET',\n      `https://kitsu.app/api/edge/mappings?filter[externalSite]=myanimelist/${type}&filter[externalId]=${malid}&include=item&fields[item]=id`,\n      {},\n    )\n      .catch(e => {\n        if (e instanceof NotAutenticatedError) {\n          this._authenticated = false;\n          return this.apiCall(\n            'GET',\n            `https://kitsu.app/api/edge/mappings?filter[externalSite]=myanimelist/${type}&filter[externalId]=${malid}&include=item&fields[item]=id`,\n            {},\n            false,\n          );\n        }\n        throw e;\n      })\n      .then(res => {\n        return res;\n      });\n  }\n\n  protected async userId() {\n    const userId = await api.storage.get('kitsuUserId');\n    if (typeof userId !== 'undefined' && userId) {\n      return userId;\n    }\n    return this.apiCall('GET', 'https://kitsu.app/api/edge/users?filter[self]=true').then(res => {\n      if (\n        typeof res.data === 'undefined' ||\n        !res.data.length ||\n        typeof res.data[0] === 'undefined'\n      ) {\n        throw new NotAutenticatedError('Not Authenticated');\n      }\n      api.storage.set('kitsuUserId', res.data[0].id);\n      return res.data[0].id;\n    });\n  }\n\n  public getScoreMode() {\n    switch (api.settings.get('kitsuOptions').ratingSystem) {\n      case 'simple':\n        return smiley4;\n      case 'regular':\n        return point10decimal;\n      case 'advanced':\n        return point20decimal;\n      default:\n        return point10;\n    }\n  }\n\n  _delete() {\n    return this.apiCall('DELETE', `https://kitsu.app/api/edge/library-entries/${this.listI().id}`);\n  }\n}\n","import { Cache } from '../utils/Cache';\nimport { Progress } from '../utils/progress';\nimport { emitter } from '../utils/emitter';\nimport { errorMessage as _errorMessage } from './Errors';\n\nObject.seal(emitter);\n\nexport interface listElement {\n  uid: number;\n  malId: number;\n  apiCacheKey: number | string;\n  cacheKey: any;\n  type: 'anime' | 'manga';\n  title: string;\n  url: string;\n  watchedEp: number;\n  totalEp: number;\n  status: number;\n  score: number;\n  image: string;\n  imageLarge: string;\n  imageBanner?: string;\n  tags: string;\n  airingState: number;\n  fn: {\n    continueUrl: () => string;\n    initProgress: () => void;\n    progress: false | Progress;\n  };\n  options?: {\n    u: string;\n    r: any;\n    c: any;\n    p: any;\n  };\n}\n\nexport abstract class ListAbstract {\n  protected done = false;\n\n  protected loading = false;\n\n  protected firstLoaded = false;\n\n  protected abstract authenticationUrl: string;\n\n  abstract readonly name;\n\n  protected logger;\n\n  public seperateRewatching = false;\n\n  // Modes\n  modes = {\n    frontend: false,\n    sortAiring: false,\n    initProgress: false,\n    cached: false,\n  };\n\n  protected username = '';\n\n  protected offset = 0;\n\n  protected templist: listElement[] = [];\n\n  constructor(\n    protected status: number = 1,\n    protected listType: 'anime' | 'manga' = 'anime',\n    protected sort: string = 'default',\n  ) {\n    this.status = Number(this.status);\n    this.logger = con.m('[S]', '#348fff');\n    return this;\n  }\n\n  public api = api;\n\n  public setTemplist(list) {\n    this.templist = list;\n    return this;\n  }\n\n  public getTemplist() {\n    return this.templist;\n  }\n\n  public setSort(sort) {\n    if (this.firstLoaded || this.loading) throw 'To late to change sort';\n    this.sort = sort;\n  }\n\n  isDone() {\n    return this.done;\n  }\n\n  isLoading() {\n    return this.loading;\n  }\n\n  isFirstLoaded() {\n    return this.firstLoaded;\n  }\n\n  async getCompleteList(): Promise<listElement[]> {\n    do {\n      // eslint-disable-next-line no-await-in-loop\n      await this.getNext();\n    } while (!this.done);\n\n    if (this.modes.sortAiring) await this.sortAiringList();\n\n    if (this.modes.cached) this.getCache().setValue(this.templist.slice(0, 18));\n\n    this.firstLoaded = true;\n\n    return this.templist;\n  }\n\n  async getNextPage(): Promise<listElement[]> {\n    if (this.done) return this.templist;\n\n    if (\n      this.modes.frontend &&\n      this.status === 1 &&\n      (this.sort === 'default' || this.sort === 'unread')\n    ) {\n      this.modes.sortAiring = true;\n      return this.getCompleteList();\n    }\n\n    await this.getNext();\n\n    if (this.modes.cached) this.getCache().setValue(this.templist.slice(0, 24));\n\n    this.firstLoaded = true;\n\n    return this.templist;\n  }\n\n  private async getNext() {\n    this.loading = true;\n    const retList = await this.getPart();\n    this.templist = this.templist.concat(retList);\n    this.loading = false;\n  }\n\n  async getCached(): Promise<listElement[]> {\n    if (await this.getCache().hasValue()) {\n      const cachelist = await this.getCache().getValue();\n      cachelist.forEach(item => {\n        item = this.fn(item);\n        item.watchedEp = '';\n        item.score = '';\n      });\n      return cachelist;\n    }\n    return [];\n  }\n\n  protected updateListener;\n\n  public initFrontendMode() {\n    this.modes.frontend = true;\n    this.updateListener = emitter.on(\n      'update.*',\n      data => {\n        con.log('update', data);\n        if (data.cacheKey) {\n          const item = this.templist.find(el => el.cacheKey === data.cacheKey);\n          con.log(item);\n          if (item && data.state) {\n            item.watchedEp = data.state.episode;\n            item.score = data.state.score;\n            item.status = data.state.status;\n          }\n        }\n      },\n      { objectify: true },\n    );\n  }\n\n  public destroy() {\n    if (this.updateListener) {\n      this.updateListener.off();\n    }\n  }\n\n  public getUsername() {\n    return this.getUserObject().then(user => user.username);\n  }\n\n  abstract getUserObject(): Promise<{ username: string; picture: string; href: string }>;\n\n  abstract _getSortingOptions(): { icon: string; title: string; value: string; asc?: boolean }[];\n\n  getSortingOptions(\n    simple = false,\n  ): { icon: string; title: string; value: string; asc?: boolean }[] {\n    const res = [\n      {\n        icon: 'filter_list',\n        title: api.storage.lang('settings_progress_default'),\n        value: 'default',\n      },\n    ];\n\n    if (this.status === 1 && this.listType === 'manga') {\n      res.push({\n        icon: 'adjust',\n        title: api.storage.lang('list_sorting_unread'),\n        value: 'unread',\n      });\n    }\n\n    const options = this._getSortingOptions();\n    options.forEach(el => {\n      if (!simple) {\n        if (el.asc) {\n          const asc = { ...el };\n          delete asc.asc;\n          asc.value += '_asc';\n          asc.title += ' Ascending';\n          res.push(asc);\n        }\n        delete el.asc;\n      }\n      res.push(el);\n    });\n    return res;\n  }\n\n  abstract getPart(): Promise<listElement[]>;\n\n  flashmError(error) {\n    utils.flashm(this.errorMessage(error), { error: true, type: 'error' });\n  }\n\n  errorMessage(error) {\n    return _errorMessage(error, this.authenticationUrl);\n  }\n\n  // itemFunctions;\n  async fn(item, streamurl = '') {\n    let continueUrlTemp: any = null;\n    item.fn = {\n      continueUrl: () => {\n        if (continueUrlTemp !== null) return continueUrlTemp;\n        return utils.getContinueWaching(item.type, item.cacheKey).then(obj => {\n          const curEp = parseInt(item.watchedEp.toString());\n\n          if (obj === undefined || obj.ep !== curEp + 1) return '';\n\n          continueUrlTemp = obj.url;\n\n          return continueUrlTemp;\n        });\n      },\n      initProgress: () => {\n        return new Progress(item.cacheKey, item.type).init().then(progress => {\n          item.fn.progress = progress;\n        });\n      },\n      progress: false,\n    };\n    item.options = await utils.getEntrySettings(item.type, item.cacheKey, item.tags);\n    if (streamurl) item.options.u = streamurl;\n    if (this.modes.sortAiring || this.modes.initProgress) await item.fn.initProgress();\n\n    return item;\n  }\n\n  // Modes\n  async initProgress() {\n    const listP: any = [];\n    this.templist.forEach(item => {\n      listP.push(item.fn.initProgress());\n    });\n\n    await Promise.all(listP);\n  }\n\n  async sortAiringList() {\n    if (this.sort === 'unread') {\n      this.sortUnread();\n      return;\n    }\n\n    const normalItems: listElement[] = [];\n    let preItems: listElement[] = [];\n    let watchedItems: listElement[] = [];\n    this.templist.forEach(item => {\n      const prediction = item.fn.progress;\n      if (this.listType === 'anime') {\n        if (prediction && prediction.isAiring() && prediction.getPredictionTimestamp()) {\n          if (item.watchedEp < prediction.getCurrentEpisode()) {\n            preItems.push(item);\n          } else {\n            watchedItems.push(item);\n          }\n        } else {\n          normalItems.push(item);\n        }\n      } else if (\n        // Manga only if less than 5 chapters to read\n        prediction &&\n        prediction.isAiring() &&\n        prediction.getCurrentEpisode() &&\n        item.watchedEp &&\n        item.watchedEp < prediction.getCurrentEpisode() &&\n        item.watchedEp + 6 > prediction.getCurrentEpisode()\n      ) {\n        preItems.push(item);\n      } else {\n        normalItems.push(item);\n      }\n    });\n\n    preItems = preItems.sort(sortItems).reverse();\n    watchedItems = watchedItems.sort(sortItems);\n\n    this.templist = preItems.concat(watchedItems, normalItems);\n\n    function sortItems(a, b) {\n      let valA = a.fn.progress.getPredictionTimestamp();\n      let valB = b.fn.progress.getPredictionTimestamp();\n\n      if (!valA) valA = 999999999999;\n      if (!valB) valB = valA;\n\n      return valA - valB;\n    }\n  }\n\n  sortUnread() {\n    this.templist = this.templist.sort(function (a, b) {\n      let valA = 10000;\n      let valB = 10000;\n\n      if (a.fn.progress && a.fn.progress.getCurrentEpisode()) {\n        const tempA = a.fn.progress.getCurrentEpisode() - a.watchedEp;\n        if (tempA > 0) valA = tempA;\n      }\n      if (b.fn.progress && b.fn.progress.getCurrentEpisode()) {\n        const tempB = b.fn.progress.getCurrentEpisode() - b.watchedEp;\n        if (tempB > 0) valB = tempB;\n      }\n\n      return valA - valB;\n    });\n  }\n\n  cacheObj: any = undefined;\n\n  getCache() {\n    if (this.cacheObj) return this.cacheObj;\n    this.cacheObj = new Cache(\n      `list/${this.name}/${this.listType}/${this.status}/${this.sort}`,\n      48 * 60 * 60 * 1000,\n    );\n    return this.cacheObj;\n  }\n}\n","import { NotAutenticatedError } from '../Errors';\nimport { ListAbstract, listElement } from '../listAbstract';\nimport * as helper from './helper';\n\nexport class UserList extends ListAbstract {\n  name = 'Kitsu';\n\n  authenticationUrl = 'https://kitsu.app/404?mal-sync=authentication';\n\n  async getUserObject() {\n    const user = await this.userRequest();\n\n    const opt = api.settings.get('kitsuOptions');\n    opt.titleLanguagePreference = user.attributes.titleLanguagePreference;\n    opt.sfwFilter = user.attributes.sfwFilter;\n    opt.ratingSystem = user.attributes.ratingSystem;\n    api.settings.set('kitsuOptions', opt);\n\n    return {\n      username: user.attributes.name,\n      picture: user.attributes.avatar?.large || '',\n      href: `https://kitsu.app/users/${user.attributes.slug || user.id}`,\n    };\n  }\n\n  async getUserId() {\n    const userId = await api.storage.get('kitsuUserId');\n    if (typeof userId !== 'undefined' && userId) {\n      return userId;\n    }\n    const user = await this.userRequest();\n    api.storage.set('kitsuUserId', user.id);\n    return user.id;\n  }\n\n  private userRequest() {\n    return helper.apiCall('GET', 'https://kitsu.app/api/edge/users?filter[self]=true').then(res => {\n      con.log(res);\n      if (typeof res.data[0] === 'undefined') {\n        throw new NotAutenticatedError('Not Authenticated');\n      }\n      return res.data[0];\n    });\n  }\n\n  deauth() {\n    return api.settings.set('kitsuToken', '').then(() => api.storage.set('kitsuUserId', ''));\n  }\n\n  accessToken() {\n    return api.settings.get('kitsuToken');\n  }\n\n  _getSortingOptions() {\n    return [\n      {\n        icon: 'sort_by_alpha',\n        title: api.storage.lang('list_sorting_alpha'),\n        value: 'alpha',\n        asc: true,\n      },\n      {\n        icon: 'history',\n        title: api.storage.lang('list_sorting_history'),\n        value: 'updated',\n        asc: true,\n      },\n      {\n        icon: 'score',\n        title: api.storage.lang('list_sorting_score'),\n        value: 'score',\n        asc: true,\n      },\n    ];\n  }\n\n  getOrder(sort) {\n    let pre = '';\n\n    if (!sort.endsWith('_asc')) pre = '-';\n\n    const sortString = sort.replace('_asc', '');\n    switch (sortString) {\n      case 'alpha':\n        pre = pre ? '' : '-';\n        return `${pre}${this.listType}.titles.en`;\n      case 'updated':\n        return `${pre}progressed_at`;\n      case 'score':\n        return `${pre}rating`;\n      default:\n        if (this.status === 1) return this.getOrder('updated');\n        if (this.status === 6) return this.getOrder('updated');\n        return this.getOrder('alpha');\n    }\n  }\n\n  async getPart() {\n    const userid = await this.getUserId();\n\n    let statusPart = '';\n    let sorting = '';\n\n    const order = this.getOrder(this.sort);\n    if (order) {\n      sorting = `&sort=${order}`;\n    }\n\n    if (this.status !== 7) {\n      const statusTemp = helper.translateList(this.status, this.status);\n      statusPart = `&filter[status]=${statusTemp}`;\n    }\n\n    con.log(\n      '[UserList][Kitsu]',\n      `user: ${userid}`,\n      `status: ${this.status}`,\n      `offset: ${this.offset}`,\n    );\n\n    return helper\n      .apiCall(\n        'GET',\n        `https://kitsu.app/api/edge/library-entries?filter[user_id]=${userid}${statusPart}&filter[kind]=${\n          this.listType\n        }&page[offset]=${this.offset}&page[limit]=50${sorting}&include=${this.listType},${\n          this.listType\n        }.mappings,${this.listType}.mappings.item&fields[${\n          this.listType\n        }]=slug,titles,canonicalTitle,averageRating,posterImage,coverImage,${\n          this.listType === 'anime' ? 'episodeCount' : 'chapterCount,volumeCount'\n        }`,\n      )\n      .then(res => {\n        con.log(res);\n\n        this.offset += 50;\n\n        if (!(res.meta.count > this.offset)) {\n          this.done = true;\n        }\n\n        return this.prepareData(res, this.listType);\n      });\n  }\n\n  private async prepareData(data, listType): Promise<listElement[]> {\n    const newData = [] as listElement[];\n    for (let i = 0; i < data.data.length; i++) {\n      const list = data.data[i];\n      const el = data.included[i];\n\n      const name = helper.getTitle(el.attributes.titles, el.attributes.canonicalTitle);\n\n      let malId = NaN;\n      for (let k = 0; k < data.included.length; k++) {\n        const mapping = data.included[k];\n        if (mapping.type === 'mappings') {\n          if (mapping.attributes.externalSite === `myanimelist/${listType}`) {\n            if (mapping.relationships.item.data.id === el.id) {\n              malId = Number(mapping.attributes.externalId);\n              data.included.splice(k, 1);\n              break;\n            }\n          }\n        }\n      }\n      let tempData;\n      if (listType === 'anime') {\n        tempData = await this.fn({\n          malId,\n          apiCacheKey: malId,\n          uid: Number(el.id),\n          cacheKey: helper.getCacheKey(malId, el.id),\n          kitsuSlug: el.attributes.slug,\n          type: listType,\n          title: name,\n          url: `https://kitsu.app/${listType}/${el.attributes.slug}`,\n          watchedEp: list.attributes.progress,\n          totalEp: el.attributes.episodeCount,\n          status: helper.translateList(list.attributes.status),\n          score: Math.round(list.attributes.ratingTwenty / 2),\n          image:\n            el.attributes.posterImage && el.attributes.posterImage.small\n              ? el.attributes.posterImage.small\n              : '',\n          imageLarge:\n            el.attributes.posterImage && el.attributes.posterImage.original\n              ? el.attributes.posterImage.original\n              : '',\n          imageBanner:\n            el.attributes.coverImage && el.attributes.coverImage.large\n              ? el.attributes.coverImage.large\n              : '',\n          tags: list.attributes.notes,\n          airingState: el.anime_airing_status,\n        });\n      } else {\n        tempData = await this.fn({\n          malId,\n          apiCacheKey: malId,\n          uid: Number(el.id),\n          cacheKey: helper.getCacheKey(malId, el.id),\n          kitsuSlug: el.attributes.slug,\n          type: listType,\n          title: name,\n          url: `https://kitsu.app/${listType}/${el.attributes.slug}`,\n          watchedEp: list.attributes.progress,\n          totalEp: el.attributes.chapterCount,\n          status: helper.translateList(list.attributes.status),\n          score: Math.round(list.attributes.ratingTwenty / 2),\n          image:\n            el.attributes.posterImage && el.attributes.posterImage.small\n              ? el.attributes.posterImage.small\n              : '',\n          imageLarge:\n            el.attributes.posterImage && el.attributes.posterImage.original\n              ? el.attributes.posterImage.original\n              : '',\n          imageBanner:\n            el.attributes.coverImage && el.attributes.coverImage.large\n              ? el.attributes.coverImage.large\n              : '',\n          tags: list.attributes.notes,\n          airingState: el.anime_airing_status,\n        });\n      }\n\n      if (tempData.totalEp === null) {\n        tempData.totalEp = 0;\n      }\n\n      newData.push(tempData);\n    }\n    return newData;\n  }\n}\n","// eslint-disable-next-line import/no-unresolved\nexport const quicklinks = require('./quicklinks.json');\n\ntype QuicklinkGroup = 'home' | 'search' | 'link';\n\ninterface Links {\n  name: string;\n  url: string;\n  fn?: (searchTerm: string) => string;\n}\n\nexport interface Quicklink {\n  name: string;\n  domain: string;\n  group: QuicklinkGroup;\n  links: Links[];\n}\n\n/*\n  {searchterm} => 'no%20game%20no%20life'\n  {searchtermPlus} => 'no+game+no+life'\n  {searchtermMinus} => 'no-game-no-life'\n  {searchtermUnderscore} => 'no_game_no_life'\n  {searchtermRaw} => 'no game no life'\n  {cacheId} => '143'\n*/\n\nexport function titleSearch(url, title, id) {\n  return searchSyntax(\n    url\n      .replace('{searchtermPlus}', '{searchterm(+)}')\n      .replace('{searchtermMinus}', '{searchterm(-)}')\n      .replace('{searchtermUnderscore}', '{searchterm(_)}')\n      .replace('{searchtermRaw}', '{searchterm[noEncode,noLowercase]}')\n      .replace('{cacheId}', id),\n    title,\n  );\n}\n\n/*\n  {searchterm(<whitespaceReplacement>)[<options>]}\n  Options:\n    noEncode -> Dont encode characters\n    noSpecial -> Remove special characters\n    specialReplace -> Replace special characters with a <whitespaceReplacement>\n    noLowercase -> Dont lowercase everything\n*/\n\ntype option = 'noEncode' | 'noSpecial' | 'noLowercase' | 'specialReplace';\n\nexport function searchSyntax(url, title) {\n  let resTitle = title.replace(/^\\[l\\]/i, '').trim();\n  let options: option[] = [];\n\n  const found = url.match(/{searchterm(\\(.\\))?(\\[[^[\\]]*\\])?}/);\n\n  if (!found) return url;\n\n  const [res, space, tempOptions] = found;\n\n  if (tempOptions) {\n    options = tempOptions.substring(1, tempOptions.length - 1).split(',');\n  }\n\n  if (!options.includes('noLowercase')) {\n    resTitle = resTitle.toLowerCase();\n  }\n\n  if (options.includes('noSpecial')) {\n    resTitle = resTitle\n      .replace(/[^a-zA-Z\\d ]/g, '')\n      .replace(/ +/g, ' ')\n      .trim();\n  } else if (options.includes('specialReplace')) {\n    resTitle = resTitle\n      .replace(/[^a-zA-Z\\d ]/g, ' ')\n      .replace(/ +/g, ' ')\n      .trim();\n  }\n\n  if (!options.includes('noEncode')) {\n    resTitle = encodeURIComponent(resTitle);\n  } else {\n    resTitle = resTitle.replace(/\\//g, ' ');\n  }\n\n  if (space) {\n    resTitle = resTitle.replace(/(%20| )/g, space[1]);\n  }\n\n  return url.replace(res, resTitle);\n}\n\nasync function fillFromApi(combined, type, id) {\n  const mal = await getMalToKissApi(type, id);\n\n  return combined.map(el => {\n    if (el.database && mal[el.database]) {\n      el.databaseLinks = mal[el.database];\n    }\n    return el;\n  });\n}\n\nfunction simplifyObject(combined, type, title, id): Quicklink[] {\n  return combined\n    .filter(el => el.search && el.search[type])\n    .map(el => {\n      const links: Links[] = [];\n      let quickGroup: QuicklinkGroup;\n\n      if (el.databaseLinks) {\n        quickGroup = 'link';\n        Object.values(el.databaseLinks).forEach((db: any) => {\n          links.push({\n            name: db.title,\n            url: db.url,\n          });\n        });\n      } else if (el.search[type] === 'home') {\n        quickGroup = 'home';\n        links.push({\n          name: 'Homepage',\n          url: el.domain,\n        });\n      } else {\n        quickGroup = 'search';\n        links.push({\n          name: 'Quicksearch',\n          url: titleSearch(el.search[type], title, id),\n          fn: searchTerm => titleSearch(el.search[type], searchTerm, id),\n        });\n      }\n\n      return {\n        name: el.name,\n        domain: el.domain,\n        group: quickGroup,\n        links,\n      };\n    });\n}\n\nexport async function getMalToKissApi(type, id) {\n  const url = `https://api.malsync.moe/mal/${type}/${id}`;\n  return api.request.xhr('GET', url).then(async response => {\n    con.log('malSync response', response);\n    if (response.status === 400) {\n      return {};\n    }\n    if (response.status === 200) {\n      const data = JSON.parse(response.responseText);\n      if (data && data.Sites) return data.Sites;\n      return {};\n    }\n    throw new Error('malsync offline');\n  });\n}\n\nexport function combinedLinks() {\n  const links = api.settings.get('quicklinks');\n  const comb = links.map(el => optionToCombined(el)).filter(el => el);\n  return JSON.parse(JSON.stringify(comb));\n}\n\nexport function optionToCombined(link) {\n  if (!link) return null;\n  if (link.custom) return link;\n  return quicklinks.find(el => el.name === link);\n}\n\nexport async function activeLinks(\n  type: 'anime' | 'manga',\n  id: any,\n  searchterm: string,\n): Promise<Quicklink[]> {\n  let combined = combinedLinks();\n\n  if (id) {\n    try {\n      combined = await fillFromApi(combined, type, id);\n    } catch (e) {\n      con.m('API Problem').error(e);\n    }\n  }\n\n  return simplifyObject(combined, type, searchterm, id);\n}\n\nexport function removeOptionKey(options, key) {\n  if (!key) return options;\n  return options.filter(el => {\n    if (!el || el === key || (typeof el === 'object' && el.name === key)) return false;\n    return true;\n  });\n}\n\nexport function removeFromOptions(key) {\n  const options = api.settings.get('quicklinks');\n  api.settings.set('quicklinks', removeOptionKey(options, key));\n}\n\nexport function getPages() {\n  return quicklinks;\n}\n","import { Single as KitsuSingle } from '../_provider/Kitsu/single';\nimport { UserList } from '../_provider/Kitsu/list';\nimport { activeLinks, removeFromOptions } from '../utils/quicklinksBuilder';\nimport { waitForPageToBeVisible } from '../utils/general';\nimport { NotAutenticatedError } from '../_provider/Errors';\n\nexport class KitsuClass {\n  page: any = null;\n\n  same = false;\n\n  protected authError = false;\n\n  constructor(public url: string) {\n    let oldUrl = window.location.href.split('/').slice(0, 5).join('/');\n    utils.changeDetect(\n      () => {\n        this.same = false;\n        if (this.page !== null && this.page.page === 'detail') {\n          const tempUrl = window.location.href.split('/').slice(0, 5).join('/');\n          if (tempUrl === oldUrl) {\n            this.same = true;\n          }\n          oldUrl = tempUrl;\n        }\n\n        this.url = window.location.href;\n        this.init();\n      },\n      () => {\n        if (this.page !== null && this.page.page === 'bookmarks' && $('.library-content').length) {\n          return $('.library-content').first().height();\n        }\n\n        return window.location.href;\n      },\n    );\n\n    $(document).ready(() => {\n      utils.waitUntilTrue(\n        function () {\n          return $('.global-container').length;\n        },\n        () => {\n          this.init();\n        },\n      );\n    });\n\n    api.storage.addStyle(\n      require('!to-string-loader!css-loader!less-loader!./style.less').toString(),\n    );\n  }\n\n  async init() {\n    await waitForPageToBeVisible();\n    if (this.url.indexOf('?mal-sync=authentication') > -1) {\n      this.authentication();\n    }\n\n    const urlpart = utils.urlPart(this.url, 3);\n    if ((urlpart === 'anime' || urlpart === 'manga') && utils.urlPart(this.url, 4)) {\n      if (this.same && typeof this.page !== 'undefined' && this.page.malObj !== 'undefined') {\n        this.streamingUI();\n        this.malToKiss();\n        this.pageRelation();\n        return;\n      }\n      const malObj = new KitsuSingle(this.url);\n      await malObj.update();\n\n      this.page = {\n        page: 'detail',\n        id: malObj.getIds().kitsu.id,\n        malid: malObj.getIds().mal,\n        apiCacheKey: malObj.getApiCacheKey(),\n        type: urlpart,\n        malObj,\n      };\n      con.log('page', this.page);\n      this.streamingUI();\n      this.malToKiss();\n      this.pageRelation();\n    }\n\n    const urlpart4 = utils.urlPart(this.url, 5);\n    if (urlpart4 === 'library') {\n      let type = 'anime';\n      if (utils.urlParam(this.url, 'media') === 'manga') type = 'manga';\n      this.page = {\n        page: 'bookmarks',\n        type,\n      };\n      con.log('page', this.page);\n      this.bookmarks();\n    }\n  }\n\n  authentication() {\n    try {\n      utils.checkDoubleExecution();\n    } catch (e) {\n      con.error(e);\n    }\n    $(document).ready(function () {\n      $('body').after(\n        j.html(\n          `\n        <div id=\"mal-sync-login\" style=\"text-align: center; margin-top: 50px; background-color: white; border: 1px solid lightgrey; padding: 10px; max-width: 600px; margin-left: auto; margin-right: auto;\">\n          <h1>MAL-Sync</h1>\n          <br>\n          <p style=\"text-align: left;\">\n            ${api.storage.lang('kitsuClass_authentication_text')}\n          </p>\n          <div class=\"modal-content\">\n            <input type=\"email\" id=\"email\" placeholder=\"Email\" required>\n            <input type=\"password\" id=\"pass\" name=\"password\" placeholder=\"${api.storage.lang(\n              'kitsuClass_authentication_Password',\n            )}\" required>\n          </div>\n          <div class=\"form-cta\" style=\"margin-top: 30px;\">\n            <button class=\"btn button--primary\" type=\"submit\" id=\"mal-sync-button\">\n              ${api.storage.lang('kitsuClass_authentication_Login')}\n            </button>\n          </div>\n        </div>\n      `,\n        ),\n      );\n      $('#mal-sync-login #mal-sync-button').click(function () {\n        $('#mal-sync-login #mal-sync-button').attr('disabled', 'disabled');\n        $.ajax({\n          type: 'POST',\n          url: 'https://kitsu.app/api/oauth/token',\n          data: `grant_type=password&username=${encodeURIComponent(\n            String($('#mal-sync-login #email').val()),\n          )}&password=${encodeURIComponent(String($('#mal-sync-login #pass').val()))}`,\n          async success(result) {\n            const token = result.access_token;\n\n            if (!token) return;\n\n            con.info('token', token);\n\n            await api.settings.set('kitsuToken', token);\n\n            $('#mal-sync-login').html(\n              j.html(\n                `<h1>MAL-Sync</h1><br>${api.storage.lang('kitsuClass_authentication_Success')}`,\n              ),\n            );\n          },\n          error(result) {\n            try {\n              con.error(result);\n              $('#mal-sync-login #mal-sync-button').prop('disabled', false);\n              if (result.responseJSON.error === 'invalid_grant') {\n                utils.flashm(api.storage.lang('kitsuClass_authentication_Wrong'));\n                return;\n              }\n              utils.flashm(result.responseJSON.error_description);\n            } catch (e) {\n              con.error(e);\n              utils.flashm(result.responseText);\n            }\n          },\n        });\n      });\n\n      utils.waitUntilTrue(\n        function () {\n          return $('body h1').length;\n        },\n        () => {\n          $('body h1').remove();\n        },\n      );\n    });\n  }\n\n  async getMalUrl() {\n    if (this.page !== null && this.page.page === 'detail' && this.page.malid) {\n      return `https://myanimelist.net/${this.page.type}/${this.page.malid}/${utils.urlPart(\n        this.url,\n        5,\n      )}`;\n    }\n    return '';\n  }\n\n  async streamingUI() {\n    con.log('Streaming UI');\n    $('#mal-sync-stream-div').remove();\n    const { malObj } = this.page;\n\n    const streamUrl = malObj.getStreamingUrl();\n    if (streamUrl) {\n      $(document).ready(async function () {\n        $('.media--title h3')\n          .first()\n          .after(\n            j.html(`\n        <div class=\"data title progress\" id=\"mal-sync-stream-div\" style=\"display: inline-block; position: relative; top: -4px; display: inline;\">\n          <a class=\"mal-sync-stream\" title=\"${\n            streamUrl.split('/')[2]\n          }\" target=\"_blank\" style=\"margin: 0 0;\" href=\"${streamUrl}\">\n            <img src=\"${utils.favicon(streamUrl.split('/')[2])}\">\n          </a>\n        </div>`),\n          );\n\n        const resumeUrlObj = malObj.getResumeWatching();\n        const continueUrlObj = malObj.getContinueWatching();\n        con.log('Resume', resumeUrlObj, 'Continue', continueUrlObj);\n        if (continueUrlObj && continueUrlObj.ep === malObj.getEpisode() + 1) {\n          $('#mal-sync-stream-div').append(\n            j.html(\n              `<a class=\"nextStream\" title=\"${api.storage.lang(\n                `overview_Continue_${malObj.getType()}`,\n              )}\" target=\"_blank\" style=\"margin: 0 5px 0 0; color: #BABABA;\" href=\"${\n                continueUrlObj.url\n              }\">\n              <img src=\"${api.storage.assetUrl('double-arrow-16px.png')}\" width=\"16\" height=\"16\">\n            </a>`,\n            ),\n          );\n        } else if (resumeUrlObj && resumeUrlObj.ep === malObj.getEpisode()) {\n          $('#mal-sync-stream-div').append(\n            j.html(\n              `<a class=\"resumeStream\" title=\"${api.storage.lang(\n                `overview_Resume_Episode_${malObj.getType()}`,\n              )}\" target=\"_blank\" style=\"margin: 0 5px 0 0; color: #BABABA;\" href=\"${\n                resumeUrlObj.url\n              }\">\n              <img src=\"${api.storage.assetUrl('arrow-16px.png')}\" width=\"16\" height=\"16\">\n            </a>`,\n            ),\n          );\n        }\n      });\n    }\n  }\n\n  getImage() {\n    return j.$('.media-poster img').attr('src') || '';\n  }\n\n  getTitle() {\n    return $('meta[property=\"og:title\"]').attr('content') || '';\n  }\n\n  malToKiss() {\n    $(document).ready(() => {\n      con.log('malToKiss');\n      $('.mal_links').remove();\n      const title = this.getTitle();\n\n      activeLinks(this.page!.type, this.page!.apiCacheKey, title).then(links => {\n        let html = '';\n        links.forEach(page => {\n          let tempHtml = '';\n          page.links.forEach(stream => {\n            tempHtml += `\n              <div class=\"mal_links\" style=\"margin-top: 5px;\">\n                <a target=\"_blank\" href=\"${stream.url}\">\n                  ${stream.name}\n                </a>\n              </div>`;\n          });\n          html += `\n            <div id=\"${page.name}Links\" class=\"mal_links library-state with-header\" style=\"\n              background: white;\n              margin-bottom: 15px;\n              border-radius: 3px;\n              display: block;\n              padding: 8px 12px;\n              width: 100%;\n              font-size: 12px;\n              word-break: break-all;\n            \">\n              <img src=\"${utils.favicon(page.domain)}\">\n              <span style=\"font-weight: 500; line-height: 16px; vertical-align: middle;\">${\n                page.name\n              }</span>\n              <span title=\"${\n                page.name\n              }\" class=\"remove-mal-sync\" style=\"float: right; cursor: pointer;\">x</span>\n              ${tempHtml}\n            </div>`;\n        });\n\n        if ($('#mal-sync-search-links').length) {\n          $('#mal-sync-search-links').first().after(j.html(html));\n        } else {\n          $('.media-summary').first().after(j.html(html));\n        }\n\n        $('.remove-mal-sync').click(function () {\n          const key = $(this).attr('title');\n          removeFromOptions(String(key));\n          window.location.reload();\n        });\n      });\n    });\n  }\n\n  async pageRelation() {\n    $('.malsync-rel-link').remove();\n    await this.page.malObj.fillRelations();\n    $('.media-summary h5')\n      .first()\n      .append(\n        j.html(\n          `<div class=\"malsync-rel-link\" style=\"display: inline-block; margin: 0 5px; vertical-align: bottom;\"></div>`,\n        ),\n      );\n\n    this.page.malObj.getPageRelations().forEach(page => {\n      $('.malsync-rel-link').append(\n        j.html(`\n          <a href=\"${page.link}\" target=\"_blank\" title=\"${page.name}\" class=\"link\">\n            <img src=\"${page.icon}\" width=\"16\" height=\"16\">\n          </a>\n\n        `),\n      );\n    });\n  }\n\n  private tempAnimelist: any = null;\n\n  private tempMangalist: any = null;\n\n  bookmarks() {\n    if (this.authError) return;\n    const This = this;\n    $(document).ready(() => {\n      if (this.page!.type === 'anime') {\n        if (this.tempAnimelist !== null) {\n          fullListCallback(this.tempAnimelist);\n          return;\n        }\n      } else if (this.tempMangalist !== null) {\n        fullListCallback(this.tempMangalist);\n        return;\n      }\n\n      const listProvider: UserList = new UserList(1, this.page.type);\n\n      listProvider\n        .getCompleteList()\n        .then(list => {\n          if (this.page!.type === 'anime') {\n            this.tempAnimelist = list;\n          } else {\n            this.tempMangalist = list;\n          }\n          fullListCallback(list);\n        })\n        .catch(e => {\n          if (e instanceof NotAutenticatedError) this.authError = true;\n          con.error(e);\n          listProvider.flashmError(e);\n        });\n\n      function fullListCallback(list) {\n        let cover = true;\n        if ($('.library-list tbody tr').length) cover = false;\n        con.log(list);\n        $.each(list, async (index, en) => {\n          con.log('en', en);\n          if (typeof en.malId !== 'undefined' && en.malId !== null && en.malId) {\n            const element = $(\n              `.library-grid-popover:not(.malSyncDone2) a[href^=\"/${This.page!.type}/${\n                en.kitsuSlug\n              }\"], .library-list tbody tr:not(.malSyncDone2) a[href^=\"/${This.page!.type}/${\n                en.kitsuSlug\n              }\"]`,\n            )\n              .first()\n              .parent()\n              .parent()\n              .parent();\n            con.log(element);\n            element.addClass('malSyncDone2');\n\n            if (en.options && en.options.u) {\n              con.log(en.options.u);\n\n              if (cover) {\n                element.prepend(\n                  j.html(`\n                  <a class=\"mal-sync-stream mal-rem\" title=\"${\n                    en.options.u.split('/')[2]\n                  }\" target=\"_blank\" style=\"margin: 0 0; z-index: 22; position:absolute; left: 0px; top: 0px; background-color: #ffffff5c; padding: 0 5px 3px 5px;\" href=\"${\n                    en.options.u\n                  }\">\n                    <img src=\"${utils.favicon(en.options.u.split('/')[2])}\">\n                  </a>`),\n                );\n              } else {\n                element.find('.title-wrapper').append(\n                  j.html(`\n                  <a class=\"mal-sync-stream mal-rem\" title=\"${\n                    en.options.u.split('/')[2]\n                  }\" target=\"_blank\" style=\"padding: 0 5px;\" href=\"${en.options.u}\">\n                    <img src=\"${utils.favicon(en.options.u.split('/')[2])}\">\n                  </a>`),\n                );\n              }\n            }\n\n            const resumeUrlObj = en.options.r;\n            const continueUrlObj = en.options.c;\n\n            const curEp = en.watchedEp;\n\n            con.log('Resume', resumeUrlObj, 'Continue', continueUrlObj);\n            if (continueUrlObj && continueUrlObj.ep === curEp + 1) {\n              if (cover) {\n                element.prepend(\n                  j.html(\n                    `<a class=\"nextStream mal-rem\" title=\"Continue watching\" target=\"_blank\" style=\"color: #BABABA; z-index: 22; position:absolute; top: 0px; left: 26px; background-color: #ffffff5c; padding: 0 5px 3px 5px;\" href=\"${\n                      continueUrlObj.url\n                    }\">\n                    <img src=\"${api.storage.assetUrl(\n                      'double-arrow-16px.png',\n                    )}\" width=\"16\" height=\"16\">\n                  </a>`,\n                  ),\n                );\n              } else {\n                element.find('.title-wrapper').append(\n                  j.html(\n                    `<a class=\"nextStream mal-rem\" title=\"Continue watching\" target=\"_blank\" style=\"padding: 0;\" href=\"${\n                      continueUrlObj.url\n                    }\">\n                    <img src=\"${api.storage.assetUrl(\n                      'double-arrow-16px.png',\n                    )}\" width=\"16\" height=\"16\">\n                  </a>`,\n                  ),\n                );\n              }\n            } else if (resumeUrlObj && resumeUrlObj.ep === curEp) {\n              if (cover) {\n                element.prepend(\n                  j.html(\n                    `<a class=\"resumeStream mal-rem\" title=\"Resume watching\" target=\"_blank\" style=\"color: #BABABA; z-index: 22; position:absolute; top: 0px; left: 26px; background-color: #ffffff5c; padding: 0 5px 3px 5px;\" href=\"${\n                      resumeUrlObj.url\n                    }\">\n                    <img src=\"${api.storage.assetUrl('arrow-16px.png')}\" width=\"16\" height=\"16\">\n                  </a>`,\n                  ),\n                );\n              } else {\n                element.find('.title-wrapper').append(\n                  j.html(\n                    `<a class=\"resumeStream mal-rem\" title=\"Resume watching\" target=\"_blank\" style=\"padding: 0;\" href=\"${\n                      resumeUrlObj.url\n                    }\">\n                    <img src=\"${api.storage.assetUrl('arrow-16px.png')}\" width=\"16\" height=\"16\">\n                  </a>`,\n                  ),\n                );\n              }\n            }\n\n            await en.fn.initProgress();\n            if (en.fn.progress && en.fn.progress.isAiring() && en.fn.progress.getCurrentEpisode()) {\n              element\n                .parent()\n                .find('.entry-unit, .progress-cell > span:last-of-type')\n                .first()\n                .append(\n                  j.html(\n                    ` <span class=\"mal-sync-ep-pre\" title=\"${en.fn.progress.getAutoText()}\">[<span style=\"border-bottom: 1px dotted ${en.fn.progress.getColor()};\">${en.fn.progress.getCurrentEpisode()}</span>]</span>`,\n                  ),\n                );\n            }\n          }\n        });\n      }\n    });\n  }\n}\n","export async function firebaseNotification() {\n  const schedule = await api.storage.get('timestampUpdate/firebaseNotification');\n  if (typeof schedule === 'undefined' || j.$.now() - schedule > 10 * 60 * 1000) {\n    await checkNotifications();\n    api.storage.set('timestampUpdate/firebaseNotification', j.$.now());\n  }\n}\n\nasync function checkNotifications() {\n  con.log('checkNotifications');\n  const url = 'https://kissanimelist.firebaseio.com/Data2/Notification/Current.json';\n  const response = await api.request.xhr('GET', url);\n  const current = parseInt(JSON.parse(response.responseText));\n  if (Number.isNaN(current)) con.error('Could not read current Notification number');\n\n  con.log('Current Notification', current);\n  const last = parseInt(await api.storage.get('firebaseNotification'));\n  const next = last + 1;\n\n  if (typeof last === 'undefined' || Number.isNaN(last)) {\n    api.storage.set('firebaseNotification', current);\n    return;\n  }\n\n  if (current < next) {\n    con.log('No new notifications');\n\n    return;\n  }\n\n  const notificationUrl = `https://kissanimelist.firebaseio.com/Data2/Notification/list/N${next}.json`;\n  const resNotification = await api.request.xhr('GET', notificationUrl);\n\n  if (!resNotification) return;\n\n  const message = JSON.parse(resNotification.responseText);\n  if (!message) {\n    con.info('Notification empty', resNotification.responseText);\n    api.storage.set('firebaseNotification', next).then(function () {\n      checkNotifications();\n    });\n\n    return;\n  }\n\n  j.$(document).ready(function () {\n    const flashm = utils.flashm(\n      `<div style=\"text-align: left;\">${message}</div><button class=\"okChangelog\" style=\"background-color: transparent; border: none; color: rgb(255,64,129);margin-top: 10px;cursor: pointer;\">Close</button>`,\n      { permanent: true, position: 'top' },\n    );\n    flashm.find('.okChangelog').click(function () {\n      flashm.remove();\n      api.storage.set('firebaseNotification', next).then(function () {\n        checkNotifications();\n      });\n    });\n  });\n}\n","import { KitsuClass } from '../kitsu/kitsuClass';\nimport { firebaseNotification } from '../utils/firebaseNotification';\n\nlet lastFocus;\n\nfunction main() {\n  if (api.settings.get('userscriptModeButton')) throw 'Userscript mode';\n  const kitsu = new KitsuClass(window.location.href);\n  messageKitsuListener(kitsu);\n  firebaseNotification();\n\n  $(window).blur(function () {\n    lastFocus = Date.now();\n  });\n}\n\nconst css =\n  'font-size: 40px; padding-bottom: 3px; color: white; text-shadow: -1px -1px #2e51a2, 1px -1px #2e51a2, -1px 1px #2e51a2, 1px 1px #2e51a2, 2px 2px #2e51a2, 3px 3px #2e51a2;';\nconsole.log('%cMAL-Sync', css, `Version: ${api.storage.version()}`);\n\napi.settings.init().then(() => {\n  main();\n});\n\nfunction messageKitsuListener(kitsu: KitsuClass) {\n  // @ts-ignore\n  chrome.runtime.onMessage.addListener(function (msg, sender, sendResponse) {\n    if (msg.action === 'TabMalUrl') {\n      if (Date.now() - lastFocus < 3 * 1000) {\n        con.info('miniMAL');\n        kitsu.getMalUrl().then(malUrl => {\n          const res = {\n            url: malUrl,\n            image: kitsu.getImage(),\n            title: kitsu.getTitle(),\n          };\n          if (!malUrl && api.settings.get('syncMode') === 'KITSU') {\n            res.url = kitsu.url;\n          }\n          sendResponse(res);\n        });\n        return true;\n      }\n    }\n    return false;\n  });\n}\n"],"names":["activeEffect","ReactiveEffect","constructor","fn","trigger","scheduler","scope","this","active","deps","_dirtyLevel","_trackId","_runnings","_shouldSchedule","_depsLength","effect","effects","push","recordEffectScope","dirty","pauseTracking","i","dep","computed","resetTracking","value","v","run","lastShouldTrack","shouldTrack","lastEffect","preCleanupEffect","postCleanupEffect","stop","onStop","effect2","length","cleanupDepEffect","trackId","get","delete","size","cleanup","pauseScheduleStack","trackStack","last","pop","pauseScheduling","resetScheduling","queueEffectSchedulers","shift","trackEffect","debuggerEventExtraInfo","set","oldDep","triggerEffects","dirtyLevel","keys","tracking","allowRecurse","createDep","Map","targetMap","WeakMap","ITERATE_KEY","Symbol","MAP_KEY_ITERATE_KEY","track","target","type","key","depsMap","newValue","oldValue","oldTarget","values","newLength","Number","forEach","key2","isNonTrackableKeys","builtInSymbols","Set","Object","getOwnPropertyNames","filter","map","arrayInstrumentations","createArrayInstrumentations","instrumentations","args","arr","toRaw","l","res","apply","hasOwnProperty","String","obj","BaseReactiveHandler","_isReadonly","_isShallow","receiver","isReadonly2","isShallow2","shallowReadonlyMap","readonlyMap","shallowReactiveMap","reactiveMap","getPrototypeOf","targetIsArray","Reflect","has","isRef","readonly","reactive","MutableReactiveHandler","super","isOldValueReadonly","isReadonly","isShallow","hadKey","result","deleteProperty","ownKeys","ReadonlyReactiveHandler","mutableHandlers","readonlyHandlers","toShallow","getProto","rawTarget","rawKey","has2","wrap","toReadonly","toReactive","call","add","get2","deleteEntry","clear","hadItems","createForEach","callback","thisArg","observed","createIterableMethod","method","targetIsMap","isPair","iterator","isKeyOnly","innerIterator","next","done","createReadonlyMethod","createInstrumentations","mutableInstrumentations2","shallowInstrumentations2","readonlyInstrumentations2","shallowReadonlyInstrumentations2","mutableInstrumentations","readonlyInstrumentations","shallowInstrumentations","shallowReadonlyInstrumentations","createInstrumentationGetter","shallow","mutableCollectionHandlers","readonlyCollectionHandlers","createReactiveObject","baseHandlers","collectionHandlers","proxyMap","existingProxy","targetType","isExtensible","rawType","targetTypeMap","getTargetType","proxy","Proxy","raw","ComputedRefImpl","getter","_setter","isSSR","__v_isRef","_value","triggerRefValue","_cacheable","self","lastDirtyLevel","trackRefValue","_dirty","ref2","_a","newVal","oldVal","r","ref","rawValue","RefImpl","__v_isShallow","_rawValue","useDirectValue","makeMap","str","expectsLowerCase","split","val","toLowerCase","assign","prototype","hasOwn","isArray","Array","isMap","toTypeString","isSymbol","isObject","objectToString","toString","toRawType","slice","isIntegerKey","parseInt","cacheStringFunction","cache","create","camelizeRE","hyphenateRE","replace","_","c","toUpperCase","capitalize","charAt","hasChanged","is","___CSS_LOADER_EXPORT___","module","id","exports","cssWithMappingToString","list","item","content","needLayer","concat","join","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","entries","setPrototypeOf","isFrozen","getOwnPropertyDescriptor","freeze","seal","construct","x","fun","thisValue","Func","arrayForEach","unapply","arrayPop","arrayPush","stringToLowerCase","stringToString","stringMatch","match","stringReplace","stringIndexOf","indexOf","stringTrim","trim","objectHasOwnProperty","regExpTest","RegExp","test","typeErrorCreate","func","TypeError","_len2","arguments","_key2","_len","_key","addToSet","array","transformCaseFunc","element","lcElement","cleanArray","index","clone","object","newObject","property","lookupGetter","prop","desc","html$1","svg$1","svgFilters","svgDisallowed","mathMl$1","mathMlDisallowed","text","html","svg","mathMl","xml","MUSTACHE_EXPR","ERB_EXPR","TMPLIT_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","DOCTYPE_NAME","CUSTOM_ELEMENT","EXPRESSIONS","__proto__","NODE_TYPE","getGlobal","window","createDOMPurify","DOMPurify","root","version","removed","document","nodeType","isSupported","originalDocument","currentScript","DocumentFragment","HTMLTemplateElement","Node","Element","NodeFilter","NamedNodeMap","MozNamedAttrMap","HTMLFormElement","DOMParser","trustedTypes","ElementPrototype","cloneNode","remove","getNextSibling","getChildNodes","getParentNode","template","createElement","ownerDocument","trustedTypesPolicy","emptyHTML","implementation","createNodeIterator","createDocumentFragment","getElementsByTagName","importNode","hooks","createHTMLDocument","IS_ALLOWED_URI$1","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","CUSTOM_ELEMENT_HANDLING","tagNameCheck","writable","configurable","enumerable","attributeNameCheck","allowCustomizedBuiltInElements","FORBID_TAGS","FORBID_ATTR","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","ALLOW_SELF_CLOSE_IN_ATTR","SAFE_FOR_TEMPLATES","SAFE_FOR_XML","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","SANITIZE_NAMED_PROPS","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DEFAULT_FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","MATHML_NAMESPACE","SVG_NAMESPACE","HTML_NAMESPACE","NAMESPACE","IS_EMPTY_INPUT","ALLOWED_NAMESPACES","DEFAULT_ALLOWED_NAMESPACES","PARSER_MEDIA_TYPE","SUPPORTED_PARSER_MEDIA_TYPES","CONFIG","formElement","isRegexOrFunction","testValue","Function","_parseConfig","cfg","ADD_URI_SAFE_ATTR","ADD_DATA_URI_TAGS","ALLOWED_URI_REGEXP","ADD_TAGS","ADD_ATTR","table","tbody","TRUSTED_TYPES_POLICY","createHTML","createScriptURL","purifyHostElement","createPolicy","suffix","ATTR_NAME","hasAttribute","getAttribute","policyName","scriptUrl","console","warn","_createTrustedTypesPolicy","MATHML_TEXT_INTEGRATION_POINTS","HTML_INTEGRATION_POINTS","COMMON_SVG_AND_HTML_ELEMENTS","ALL_SVG_TAGS","ALL_MATHML_TAGS","_forceRemove","node","removeChild","_removeAttribute","name","attribute","getAttributeNode","from","removeAttribute","setAttribute","_initDocument","doc","leadingWhitespace","matches","dirtyPayload","parseFromString","documentElement","createDocument","innerHTML","body","insertBefore","createTextNode","childNodes","_createNodeIterator","SHOW_ELEMENT","SHOW_COMMENT","SHOW_TEXT","SHOW_PROCESSING_INSTRUCTION","SHOW_CDATA_SECTION","_isClobbered","elm","nodeName","textContent","attributes","namespaceURI","hasChildNodes","_isNode","_executeHook","entryPoint","currentNode","hook","_sanitizeElements","tagName","allowedTags","firstElementChild","_isBasicCustomElement","parentNode","childClone","__removalCount","parent","parentTagName","Boolean","_checkValidNamespace","expr","_isValidAttribute","lcTag","lcName","_sanitizeAttributes","hookEvent","attrName","attrValue","keepAttr","allowedAttributes","attr","forceKeepAttr","getAttributeType","setAttributeNS","_sanitizeShadowDOM","fragment","shadowNode","shadowIterator","nextNode","sanitize","importedNode","returnNode","appendChild","firstChild","nodeIterator","shadowroot","shadowrootmode","serializedHTML","outerHTML","doctype","setConfig","clearConfig","isValidAttribute","tag","addHook","hookFunction","removeHook","removeHooks","removeAllHooks","factory","nextTickSupported","process","nextTick","symbolsSupported","reflectSupported","_setImmediate","setImmediate","setTimeout","getOwnPropertySymbols","init","_events","_conf","configure","conf","delimiter","maxListeners","_maxListeners","wildcard","newListener","_newListener","removeListener","_removeListener","verboseMemoryLeak","ignoreErrors","listenerTree","logPossibleMemoryLeak","count","eventName","errorMsg","emitWarning","e","Error","emitter","error","trace","toArray","a","b","n","toObject","len","valuesCount","TargetObserver","options","on","off","_emitter","_target","_listeners","_listenersCount","addEventListener","removeEventListener","addListener","_on","_off","_observers","resolveOptions","schema","reducers","allowUnknown","computedOptions","option","reducer","reject","reason","constructorReducer","makeTypeReducer","types","message","firstType","secondType","kind","subscribe","event","localEvent","observer","listeners","handler","eventObj","original","emit","_onNewListener","_event","_onRemoveListener","hasListeners","unsubscribe","events","clearRefs","findTargetIndex","splice","functionReducer","objectFunctionReducer","makeCancelablePromise","Promise","executor","isCancelable","callbacks","subscriptionClosed","timer","promise","resolve","onCancel","clearTimeout","timeout","overload","isFinite","cancel","_resolve","_reject","err","cb","code","observers","searchListenerTree","handlers","tree","typeLength","ns","j","dl","branch","xTree","xxTree","isolatedBranch","endReached","branches","currentType","nextType","growListenerTree","listener","prepend","unshift","warned","collectTreeEvents","asArray","branchName","path","isArrayPath","recursivelyGarbageCollect","flag","Listener","setupListener","promisify","async","objectify","_listener","_origin","context","then","_async","EventEmitter","EventEmitter2","listenTo","listen","isSingleReducer","stopListeningTo","matched","setMaxListeners","getMaxListeners","once","_once","prependOnceListener","_many","many","ttl","prependMany","_all","containsSymbol","al","emitAsync","promises","all","prependListener","onAny","_onAny","prependAny","temp","returnValue","leafs","iLeaf","leaf","position","offAny","fns","removeAllListeners","allListeners","eventNames","nsAsArray","listenerCount","listenersAny","waitFor","handleError","defineProperties","defaultMaxListeners","isNaN","errorListener","eventListener","__esModule","default","webextension","getStorage","chrome","runtime","lastError","results","storage","local","sync","addStyle","css","style","head","log","getManifest","lang","selector","api","settings","i18n","argIndex","getMessage","langDirection","getUILanguage","con","assetUrl","filename","getURL","injectCssResource","alert","injectjsResource","s","src","onload","addProxyScriptToTag","updateDom","storageOnChanged","onChanged","utils","syncRegex","requestApi","xhr","url","sendMessage","status","responseText","response","notification","database","param","settingsObj","autoTrackingModeanime","readerTracking","askBefore","autoTrackingModemanga","enablePages","forceEn","rpc","presenceLargeImage","presenceShowButtons","presenceShowMalsync","userscriptModeButton","syncMode","syncModeSimkl","localSync","delay","videoDuration","malTags","malContinue","malResume","usedPage","epPredictions","theme","themeSidebars","themeColor","themeOpacity","themeImage","minimalWindow","posLeft","miniMALonMal","floatButtonStealth","minimizeBigPopup","floatButtonCorrection","floatButtonHide","autoCloseMinimal","outWay","miniMalWidth","miniMalHeight","malThumbnail","friendScore","loadPTWForProgress","quicklinks","quicklinksPosition","autofull","autoresume","autoNextEp","highlightAllEp","checkForFiller","crashReport","introSkip","introSkipFwd","introSkipBwd","nextEpShort","correctionShort","syncShort","progressInterval","progressIntervalDefaultAnime","progressIntervalDefaultManga","progressNotificationsAnime","progressNotificationsManga","notificationsSticky","bookMarksList","customDomains","anilistUpdateUi","anilistToken","anilistOptions","displayAdultContent","scoreFormat","kitsuToken","kitsuOptions","titleLanguagePreference","sfwFilter","ratingSystem","simklToken","malToken","malRefresh","shikiToken","shikiOptions","locale","debounceArray","isInit","tempSettings","store","rateDebounce","changes","namespace","storageChange","info","rateLimit","$","flashm","permanent","setDebounce","getAsync","request","bind","debug","m","color","blocks","fontColor","hash","charCodeAt","colour","substr","stringToColour","name2","color2","moduleText","reduce","sum","el","moduleStyle","urlPart","part","urlParts","urlStrip","urlParam","exec","decodeURI","getBaseText","children","each","favicon","domain","watching","planTo","episode","rateLimitExclude","getselect","absoluteLink","startsWith","parseHtml","urlChangeDetect","currentPage","location","href","setInterval","fullUrlChangeDetect","strip","intervalId","changeDetect","immediate","waitUntilTrue","condition","interval","clearInterval","getAsyncWaitUntilTrue","rejectThis","reset","asyncWaitUntilTrue","doubleId","Math","random","checkDoubleExecution","after","getUrlFromTags","tags","atobURL","encoded","atob","setUrlInTags","addition","setResumeWaching","ep","getResumeWaching","setContinueWaching","getContinueWaching","setEntrySettings","tempOptions","find","getEntrySettings","u","p","tagString","parse","continueUrlObj","resumeUrlObj","handleMalImages","getTooltip","direction","rNumber","floor","timeDiffToText","delta","diffYears","diffDays","diffHours","diffMinutes","canHideTabs","browser","tabs","hide","statusTag","anime","class","title","manga","tempInfo","getStatusText","state","notifications","iconUrl","messageObj","history","timestamp","Date","now","timeCache","dataFunction","getTime","extraClass","initflashm","colorF","flashdiv","messClass","tempClass","removeClass","fadeOut","duration","queue","complete","flashmEl","mess","hoverInfo","addClass","appendTo","minimized","slideDown","slideUp","flashConfirm","yesCall","cancelCall","yesNo","yesText","noText","flasmessage","click","evt","parentsUntil","lazyloaded","lazyimages","lazyload","scrollElement","loadImage","hasClass","img","Image","replaceChild","query","processScroll","elementInViewport","scroll","horizontalOffset","rect","getBoundingClientRect","top","left","innerHeight","clientHeight","wait","ms","pageUrl","page","returnYYYYMMDD","numFromToday","d","setDate","getDate","month","getMonth","day","getFullYear","htmlDecode","isFirefox","waitForPageToBeVisible","visibilityState","awaitUi","clearCache","cacheArray","deleted","sortAlphabetically","isDomainMatching","urlObj","URL","host","endsWith","upperCaseFirstLetter","string","jQuery","htmlContent","SAFE_FOR_JQUERY","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","o","defineProperty","g","globalThis","toStringTag","score","localStorage","getItem","checkLocalStorageIsAvailable","setItem","removeItem","localStore","refetchTtl","containsValue","valueValid","ttlValid","refetchTtlValid","hasValue","hasValueAndIsNotEmpty","fullState","isValid","refetch","getValue","setValue","save","clearValue","predictionXhrGET","apiCacheKey","timestampToShortTime","tm","ago","curTime","diff","future","short","output","y","h","timeToString","milliseconds","hour","minute","seconds","year","msToTime","Progress","cacheKey","releaseItem","logger","initReleaseProgress","liveData","mode","uid","force","finished","progressValue","config","mainId","fallback","fallbackPrediction","mainTemp","predicition","lastEp","predTemp","predTime","total","abs","probability","predSoon","getProgress","cProgress","nProgress","watchedEp","noti","single","sticky","image","getImage","getStreamingUrl","getUrl","notificationCheck","progressMode","progressIsOld","getProgressCurrentEpisode","re","isProgressFinished","getProgressPrediction","getProgressLastTimestamp","live","getCurrentEpisode","isFinished","isAiring","getPredictionTimestamp","NaN","getPrediction","getPredictionText","pre","getLastTimestamp","getLast","getLastText","getAuto","preT","getAutoText","getColor","getBars","curEp","totalEp","predEp","totalWidth","epWidth","predWidth","ceil","scriptId","globalEmit","params","onMessage","sender","sendResponse","SafeError","NotAutenticatedError","UrlNotSupportedError","ServerOfflineError","NotFoundError","UnexpectedResponseError","errorMessage","authenticationUrl","point10","ui","getOptions","label","valueToOptionValue","round","optionValueToValue","optionValue","SingleAbstract","askCompleted","rewatchingSupport","ids","mal","ani","kitsu","slug","simkl","progress","updateProgress","_onList","_authenticated","handleUrl","getType","supportsRewatching","getApiCacheKey","getKey","getRulesCacheKey","setStatus","_setStatus","getStatus","isOnList","_getStatus","NoState","getScoreMode","setScore","_setScore","getScore","_getScore","setAbsoluteScore","_setAbsoluteScore","getAbsoluteScore","_getAbsoluteScore","setEpisode","getTotalEpisodes","_setEpisode","getEpisode","_getEpisode","setVolume","volume","_setVolume","getVolume","_getVolume","setStreamingUrl","streamingUrl","cleanTags","initProgress","getCacheKey","getTitle","getProgressMode","progressXhr","getProgressFormated","op","languageNames","Intl","DisplayNames","of","dropped","prediction","getProgressOptions","getProgressCompleted","setProgressMode","_getTags","getProgressKey","getPageRelations","shortName","icon","link","fillRelations","update","_update","catch","persistanceState","getStateEl","registerEvent","emitUpdate","_setTags","_sync","undoState","action","getPageId","meta","malId","getMalId","_delete","globalUpdateEvent","updateEvent","isDirty","setStateEl","undo","onList","_getTitle","eps","_getTotalEpisodes","getTotalVolumes","_getTotalVolumes","isAuthenticated","getDisplayUrl","_getDisplayUrl","getMalUrl","getIds","_getImage","getRating","_getRating","rating","setResumeWatching","getResumeWatching","setContinueWatching","getContinueWatching","increaseRewatchCount","absoluteScore","getStateDiff","persistance","lifeCycleHook","Rewatching","finishRewatchingMessage","finishWatchingMessage","checkSync","curEpisode","curStatus","curVolume","Completed","startRewatchingMessage","Watching","startWatchingMessage","currentScore","getScoreCheckboxValue","checkHtml","getScoreCheckbox","handleScoreCheckbox","getDisplayScoreCheckbox","curScore","labelEl","getStatusCheckbox","statusEs","handleStatusCheckbox","getStatusCheckboxValue","allowed","forceMal","includes","getLastError","getLastErrorMessage","flashmError","translateList","aniStatus","malStatus","current","planned","completed","on_hold","titles","canonicalTitle","en","en_jp","ja_jp","kitsuId","apiCall","variables","authentication","headers","Accept","Authorization","json","parseJson","errors","detail","point20decimal","resArr","toFixed","smiley4","point10decimal","Single","listI","animeInfo","animeI","included","reconsuming","ratingHundred","_getTwentyScore","volumesOwned","notes","episodeCount","chapterCount","volumeCount","posterImage","large","averageRating","kitsuSlugRes","kitsuSlugtoKitsu","kitsuRes","malToKitsu","relation","relationships","userId","tempAnimeInfo","reconsumeCount","ratingTwenty","tType","updateUrl","post","user","kitsuSlug","mapping","externalSite","externalId","malid","ListAbstract","listType","sort","loading","firstLoaded","seperateRewatching","modes","frontend","sortAiring","cached","username","offset","templist","cacheObj","setTemplist","getTemplist","setSort","isDone","isLoading","isFirstLoaded","getCompleteList","getNext","sortAiringList","getCache","getNextPage","retList","getPart","getCached","cachelist","initFrontendMode","updateListener","destroy","getUsername","getUserObject","getSortingOptions","simple","_getSortingOptions","asc","streamurl","continueUrlTemp","continueUrl","listP","sortUnread","normalItems","preItems","watchedItems","sortItems","valA","valB","reverse","tempA","tempB","UserList","userRequest","opt","picture","avatar","getUserId","deauth","accessToken","getOrder","userid","statusPart","sorting","order","prepareData","newData","tempData","small","imageLarge","imageBanner","coverImage","airingState","anime_airing_status","titleSearch","resTitle","found","space","substring","searchSyntax","activeLinks","searchterm","combined","comb","optionToCombined","custom","combinedLinks","Sites","getMalToKissApi","databaseLinks","fillFromApi","search","links","quickGroup","db","searchTerm","group","simplifyObject","KitsuClass","same","authError","tempAnimelist","tempMangalist","oldUrl","tempUrl","first","height","ready","urlpart","malObj","streamingUI","malToKiss","pageRelation","bookmarks","ajax","success","token","access_token","responseJSON","error_description","streamUrl","append","tempHtml","stream","removeOptionKey","removeFromOptions","reload","This","fullListCallback","listProvider","cover","firebaseNotification","schedule","checkNotifications","notificationUrl","resNotification","lastFocus","msg","malUrl","blur","main"],"sourceRoot":""}