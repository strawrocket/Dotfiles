import{r as ae,j as ne,R as w}from"./constants-e5712b98.js";import{c as ue}from"./button-e2ac6183.js";const Cr=ae.forwardRef(({className:e,...t},r)=>ne.jsx("div",{ref:r,className:ue("bg-card text-card-foreground rounded-xl border shadow",e),...t}));Cr.displayName="Card";const pr=ae.forwardRef(({className:e,...t},r)=>ne.jsx("div",{ref:r,className:ue("flex flex-col space-y-1.5 p-6",e),...t}));pr.displayName="CardHeader";const Rr=ae.forwardRef(({className:e,...t},r)=>ne.jsx("h3",{ref:r,className:ue("font-semibold leading-none tracking-tight",e),...t}));Rr.displayName="CardTitle";const Tr=ae.forwardRef(({className:e,...t},r)=>ne.jsx("p",{ref:r,className:ue("text-muted-foreground text-sm",e),...t}));Tr.displayName="CardDescription";const Nr=ae.forwardRef(({className:e,...t},r)=>ne.jsx("div",{ref:r,className:ue("p-6 pt-0",e),...t}));Nr.displayName="CardContent";const Or=ae.forwardRef(({className:e,...t},r)=>ne.jsx("div",{ref:r,className:ue("flex items-center p-6 pt-0",e),...t}));Or.displayName="CardFooter";var ge=e=>e.type==="checkbox",ie=e=>e instanceof Date,U=e=>e==null;const ar=e=>typeof e=="object";var S=e=>!U(e)&&!Array.isArray(e)&&ar(e)&&!ie(e),nr=e=>S(e)&&e.target?ge(e.target)?e.target.checked:e.target.value:e,Ur=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,ur=(e,t)=>e.has(Ur(t)),Lr=e=>{const t=e.constructor&&e.constructor.prototype;return S(t)&&t.hasOwnProperty("isPrototypeOf")},Ne=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function L(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(Ne&&(e instanceof Blob||e instanceof FileList))&&(r||S(e)))if(t=r?[]:{},!r&&!Lr(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=L(e[i]));else return e;return t}var we=e=>Array.isArray(e)?e.filter(Boolean):[],E=e=>e===void 0,f=(e,t,r)=>{if(!t||!S(e))return r;const i=we(t.split(/[,[\].]+?/)).reduce((u,n)=>U(u)?u:u[n],e);return E(i)||i===e?E(e[t])?r:e[t]:i},j=e=>typeof e=="boolean",Oe=e=>/^\w*$/.test(e),lr=e=>we(e.replace(/["|']|\]/g,"").split(/\.|\[/)),A=(e,t,r)=>{let i=-1;const u=Oe(t)?[t]:lr(t),n=u.length,c=n-1;for(;++i<n;){const g=u[i];let V=r;if(i!==c){const D=e[g];V=S(D)||Array.isArray(D)?D:isNaN(+u[i+1])?{}:[]}if(g==="__proto__")return;e[g]=V,e=e[g]}return e};const Ve={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},q={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},z={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},or=w.createContext(null),Ue=()=>w.useContext(or),at=e=>{const{children:t,...r}=e;return w.createElement(or.Provider,{value:r},t)};var fr=(e,t,r,i=!0)=>{const u={defaultValues:t._defaultValues};for(const n in e)Object.defineProperty(u,n,{get:()=>{const c=n;return t._proxyFormState[c]!==q.all&&(t._proxyFormState[c]=!i||q.all),r&&(r[c]=!0),e[c]}});return u},P=e=>S(e)&&!Object.keys(e).length,cr=(e,t,r,i)=>{r(e);const{name:u,...n}=e;return P(n)||Object.keys(n).length>=Object.keys(t).length||Object.keys(n).find(c=>t[c]===(!i||q.all))},de=e=>Array.isArray(e)?e:[e],dr=(e,t,r)=>!e||!t||e===t||de(e).some(i=>i&&(r?i===t:i.startsWith(t)||t.startsWith(i)));function Le(e){const t=w.useRef(e);t.current=e,w.useEffect(()=>{const r=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}function Pr(e){const t=Ue(),{control:r=t.control,disabled:i,name:u,exact:n}=e||{},[c,g]=w.useState(r._formState),V=w.useRef(!0),D=w.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),_=w.useRef(u);return _.current=u,Le({disabled:i,next:h=>V.current&&dr(_.current,h.name,n)&&cr(h,D.current,r._updateFormState)&&g({...r._formState,...h}),subject:r._subjects.state}),w.useEffect(()=>(V.current=!0,D.current.isValid&&r._updateValid(!0),()=>{V.current=!1}),[r]),fr(c,r,D.current,!1)}var K=e=>typeof e=="string",yr=(e,t,r,i,u)=>K(e)?(i&&t.watch.add(e),f(r,e,u)):Array.isArray(e)?e.map(n=>(i&&t.watch.add(n),f(r,n))):(i&&(t.watchAll=!0),r);function Mr(e){const t=Ue(),{control:r=t.control,name:i,defaultValue:u,disabled:n,exact:c}=e||{},g=w.useRef(i);g.current=i,Le({disabled:n,subject:r._subjects.values,next:_=>{dr(g.current,_.name,c)&&D(L(yr(g.current,r._names,_.values||r._formValues,!1,u)))}});const[V,D]=w.useState(r._getWatch(i,u));return w.useEffect(()=>r._removeUnmounted()),V}function Br(e){const t=Ue(),{name:r,disabled:i,control:u=t.control,shouldUnregister:n}=e,c=ur(u._names.array,r),g=Mr({control:u,name:r,defaultValue:f(u._formValues,r,f(u._defaultValues,r,e.defaultValue)),exact:!0}),V=Pr({control:u,name:r,exact:!0}),D=w.useRef(u.register(r,{...e.rules,value:g,...j(e.disabled)?{disabled:e.disabled}:{}}));return w.useEffect(()=>{const _=u._options.shouldUnregister||n,h=(I,H)=>{const N=f(u._fields,I);N&&N._f&&(N._f.mount=H)};if(h(r,!0),_){const I=L(f(u._options.defaultValues,r));A(u._defaultValues,r,I),E(f(u._formValues,r))&&A(u._formValues,r,I)}return()=>{(c?_&&!u._state.action:_)?u.unregister(r):h(r,!1)}},[r,u,c,n]),w.useEffect(()=>{f(u._fields,r)&&u._updateDisabledField({disabled:i,fields:u._fields,name:r,value:f(u._fields,r)._f.value})},[i,r,u]),{field:{name:r,value:g,...j(i)||V.disabled?{disabled:V.disabled||i}:{},onChange:w.useCallback(_=>D.current.onChange({target:{value:nr(_),name:r},type:Ve.CHANGE}),[r]),onBlur:w.useCallback(()=>D.current.onBlur({target:{value:f(u._formValues,r),name:r},type:Ve.BLUR}),[r,u]),ref:w.useCallback(_=>{const h=f(u._fields,r);h&&_&&(h._f.ref={focus:()=>_.focus(),select:()=>_.select(),setCustomValidity:I=>_.setCustomValidity(I),reportValidity:()=>_.reportValidity()})},[u._fields,r])},formState:V,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!f(V.errors,r)},isDirty:{enumerable:!0,get:()=>!!f(V.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!f(V.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!f(V.validatingFields,r)},error:{enumerable:!0,get:()=>f(V.errors,r)}})}}const nt=e=>e.render(Br(e));var gr=(e,t,r,i,u)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[i]:u||!0}}:{},ze=e=>({isOnSubmit:!e||e===q.onSubmit,isOnBlur:e===q.onBlur,isOnChange:e===q.onChange,isOnAll:e===q.all,isOnTouch:e===q.onTouched}),Je=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const ye=(e,t,r,i)=>{for(const u of r||Object.keys(e)){const n=f(e,u);if(n){const{_f:c,...g}=n;if(c){if(c.refs&&c.refs[0]&&t(c.refs[0],u)&&!i)return!0;if(c.ref&&t(c.ref,c.name)&&!i)return!0;if(ye(g,t))break}else if(S(g)&&ye(g,t))break}}};var jr=(e,t,r)=>{const i=de(f(e,r));return A(i,"root",t[r]),A(e,r,i),e},Pe=e=>e.type==="file",J=e=>typeof e=="function",me=e=>{if(!Ne)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},be=e=>K(e),Me=e=>e.type==="radio",Fe=e=>e instanceof RegExp;const Qe={value:!1,isValid:!1},Xe={value:!0,isValid:!0};var vr=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!E(e[0].attributes.value)?E(e[0].value)||e[0].value===""?Xe:{value:e[0].value,isValid:!0}:Xe:Qe}return Qe};const Ze={isValid:!1,value:null};var hr=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Ze):Ze;function er(e,t,r="validate"){if(be(e)||Array.isArray(e)&&e.every(be)||j(e)&&!e)return{type:r,message:be(e)?e:"",ref:t}}var se=e=>S(e)&&!Fe(e)?e:{value:e,message:""},rr=async(e,t,r,i,u)=>{const{ref:n,refs:c,required:g,maxLength:V,minLength:D,min:_,max:h,pattern:I,validate:H,name:N,valueAsNumber:De,mount:$,disabled:Q}=e._f,m=f(t,N);if(!$||Q)return{};const G=c?c[0]:n,Y=b=>{i&&G.reportValidity&&(G.setCustomValidity(j(b)?"":b||""),G.reportValidity())},k={},re=Me(n),ve=ge(n),Z=re||ve,te=(De||Pe(n))&&E(n.value)&&E(m)||me(n)&&n.value===""||m===""||Array.isArray(m)&&!m.length,M=gr.bind(null,N,r,k),he=(b,F,C,O=z.maxLength,W=z.minLength)=>{const B=b?F:C;k[N]={type:b?O:W,message:B,ref:n,...M(b?O:W,B)}};if(u?!Array.isArray(m)||!m.length:g&&(!Z&&(te||U(m))||j(m)&&!m||ve&&!vr(c).isValid||re&&!hr(c).isValid)){const{value:b,message:F}=be(g)?{value:!!g,message:g}:se(g);if(b&&(k[N]={type:z.required,message:F,ref:G,...M(z.required,F)},!r))return Y(F),k}if(!te&&(!U(_)||!U(h))){let b,F;const C=se(h),O=se(_);if(!U(m)&&!isNaN(m)){const W=n.valueAsNumber||m&&+m;U(C.value)||(b=W>C.value),U(O.value)||(F=W<O.value)}else{const W=n.valueAsDate||new Date(m),B=fe=>new Date(new Date().toDateString()+" "+fe),le=n.type=="time",oe=n.type=="week";K(C.value)&&m&&(b=le?B(m)>B(C.value):oe?m>C.value:W>new Date(C.value)),K(O.value)&&m&&(F=le?B(m)<B(O.value):oe?m<O.value:W<new Date(O.value))}if((b||F)&&(he(!!b,C.message,O.message,z.max,z.min),!r))return Y(k[N].message),k}if((V||D)&&!te&&(K(m)||u&&Array.isArray(m))){const b=se(V),F=se(D),C=!U(b.value)&&m.length>+b.value,O=!U(F.value)&&m.length<+F.value;if((C||O)&&(he(C,b.message,F.message),!r))return Y(k[N].message),k}if(I&&!te&&K(m)){const{value:b,message:F}=se(I);if(Fe(b)&&!m.match(b)&&(k[N]={type:z.pattern,message:F,ref:n,...M(z.pattern,F)},!r))return Y(F),k}if(H){if(J(H)){const b=await H(m,t),F=er(b,G);if(F&&(k[N]={...F,...M(z.validate,F.message)},!r))return Y(F.message),k}else if(S(H)){let b={};for(const F in H){if(!P(b)&&!r)break;const C=er(await H[F](m,t),G,F);C&&(b={...C,...M(F,C.message)},Y(C.message),r&&(k[N]=b))}if(!P(b)&&(k[N]={ref:G,...b},!r))return k}}return Y(!0),k};function Ir(e,t){const r=t.slice(0,-1).length;let i=0;for(;i<r;)e=E(e)?i++:e[t[i++]];return e}function Wr(e){for(const t in e)if(e.hasOwnProperty(t)&&!E(e[t]))return!1;return!0}function p(e,t){const r=Array.isArray(t)?t:Oe(t)?[t]:lr(t),i=r.length===1?e:Ir(e,r),u=r.length-1,n=r[u];return i&&delete i[n],u!==0&&(S(i)&&P(i)||Array.isArray(i)&&Wr(i))&&p(e,r.slice(0,-1)),e}var pe=()=>{let e=[];return{get observers(){return e},next:u=>{for(const n of e)n.next&&n.next(u)},subscribe:u=>(e.push(u),{unsubscribe:()=>{e=e.filter(n=>n!==u)}}),unsubscribe:()=>{e=[]}}},xe=e=>U(e)||!ar(e);function X(e,t){if(xe(e)||xe(t))return e===t;if(ie(e)&&ie(t))return e.getTime()===t.getTime();const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(const u of r){const n=e[u];if(!i.includes(u))return!1;if(u!=="ref"){const c=t[u];if(ie(n)&&ie(c)||S(n)&&S(c)||Array.isArray(n)&&Array.isArray(c)?!X(n,c):n!==c)return!1}}return!0}var _r=e=>e.type==="select-multiple",qr=e=>Me(e)||ge(e),Re=e=>me(e)&&e.isConnected,br=e=>{for(const t in e)if(J(e[t]))return!0;return!1};function Ae(e,t={}){const r=Array.isArray(e);if(S(e)||r)for(const i in e)Array.isArray(e[i])||S(e[i])&&!br(e[i])?(t[i]=Array.isArray(e[i])?[]:{},Ae(e[i],t[i])):U(e[i])||(t[i]=!0);return t}function Vr(e,t,r){const i=Array.isArray(e);if(S(e)||i)for(const u in e)Array.isArray(e[u])||S(e[u])&&!br(e[u])?E(t)||xe(r[u])?r[u]=Array.isArray(e[u])?Ae(e[u],[]):{...Ae(e[u])}:Vr(e[u],U(t)?{}:t[u],r[u]):r[u]=!X(e[u],t[u]);return r}var _e=(e,t)=>Vr(e,t,Ae(t)),mr=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:i})=>E(e)?e:t?e===""?NaN:e&&+e:r&&K(e)?new Date(e):i?i(e):e;function Te(e){const t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return Pe(t)?t.files:Me(t)?hr(e.refs).value:_r(t)?[...t.selectedOptions].map(({value:r})=>r):ge(t)?vr(e.refs).value:mr(E(t.value)?e.ref.value:t.value,e)}var Hr=(e,t,r,i)=>{const u={};for(const n of e){const c=f(t,n);c&&A(u,n,c._f)}return{criteriaMode:r,names:[...e],fields:u,shouldUseNativeValidation:i}},ce=e=>E(e)?e:Fe(e)?e.source:S(e)?Fe(e.value)?e.value.source:e.value:e;const tr="AsyncFunction";var Kr=e=>(!e||!e.validate)&&!!(J(e.validate)&&e.validate.constructor.name===tr||S(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===tr)),$r=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function sr(e,t,r){const i=f(e,r);if(i||Oe(r))return{error:i,name:r};const u=r.split(".");for(;u.length;){const n=u.join("."),c=f(t,n),g=f(e,n);if(c&&!Array.isArray(c)&&r!==n)return{name:r};if(g&&g.type)return{name:n,error:g};u.pop()}return{name:r}}var Gr=(e,t,r,i,u)=>u.isOnAll?!1:!r&&u.isOnTouch?!(t||e):(r?i.isOnBlur:u.isOnBlur)?!e:(r?i.isOnChange:u.isOnChange)?e:!0,Yr=(e,t)=>!we(f(e,t)).length&&p(e,t);const zr={mode:q.onSubmit,reValidateMode:q.onChange,shouldFocusError:!0};function Jr(e={}){let t={...zr,...e},r={submitCount:0,isDirty:!1,isLoading:J(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},i={},u=S(t.defaultValues)||S(t.values)?L(t.defaultValues||t.values)||{}:{},n=t.shouldUnregister?{}:L(u),c={action:!1,mount:!1,watch:!1},g={mount:new Set,unMount:new Set,array:new Set,watch:new Set},V,D=0;const _={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:pe(),array:pe(),state:pe()},I=ze(t.mode),H=ze(t.reValidateMode),N=t.criteriaMode===q.all,De=s=>a=>{clearTimeout(D),D=setTimeout(s,a)},$=async s=>{if(_.isValid||s){const a=t.resolver?P((await Z()).errors):await M(i,!0);a!==r.isValid&&h.state.next({isValid:a})}},Q=(s,a)=>{(_.isValidating||_.validatingFields)&&((s||Array.from(g.mount)).forEach(l=>{l&&(a?A(r.validatingFields,l,a):p(r.validatingFields,l))}),h.state.next({validatingFields:r.validatingFields,isValidating:!P(r.validatingFields)}))},m=(s,a=[],l,y,d=!0,o=!0)=>{if(y&&l){if(c.action=!0,o&&Array.isArray(f(i,s))){const v=l(f(i,s),y.argA,y.argB);d&&A(i,s,v)}if(o&&Array.isArray(f(r.errors,s))){const v=l(f(r.errors,s),y.argA,y.argB);d&&A(r.errors,s,v),Yr(r.errors,s)}if(_.touchedFields&&o&&Array.isArray(f(r.touchedFields,s))){const v=l(f(r.touchedFields,s),y.argA,y.argB);d&&A(r.touchedFields,s,v)}_.dirtyFields&&(r.dirtyFields=_e(u,n)),h.state.next({name:s,isDirty:b(s,a),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else A(n,s,a)},G=(s,a)=>{A(r.errors,s,a),h.state.next({errors:r.errors})},Y=s=>{r.errors=s,h.state.next({errors:r.errors,isValid:!1})},k=(s,a,l,y)=>{const d=f(i,s);if(d){const o=f(n,s,E(l)?f(u,s):l);E(o)||y&&y.defaultChecked||a?A(n,s,a?o:Te(d._f)):O(s,o),c.mount&&$()}},re=(s,a,l,y,d)=>{let o=!1,v=!1;const x={name:s},R=!!(f(i,s)&&f(i,s)._f&&f(i,s)._f.disabled);if(!l||y){_.isDirty&&(v=r.isDirty,r.isDirty=x.isDirty=b(),o=v!==x.isDirty);const T=R||X(f(u,s),a);v=!!(!R&&f(r.dirtyFields,s)),T||R?p(r.dirtyFields,s):A(r.dirtyFields,s,!0),x.dirtyFields=r.dirtyFields,o=o||_.dirtyFields&&v!==!T}if(l){const T=f(r.touchedFields,s);T||(A(r.touchedFields,s,l),x.touchedFields=r.touchedFields,o=o||_.touchedFields&&T!==l)}return o&&d&&h.state.next(x),o?x:{}},ve=(s,a,l,y)=>{const d=f(r.errors,s),o=_.isValid&&j(a)&&r.isValid!==a;if(e.delayError&&l?(V=De(()=>G(s,l)),V(e.delayError)):(clearTimeout(D),V=null,l?A(r.errors,s,l):p(r.errors,s)),(l?!X(d,l):d)||!P(y)||o){const v={...y,...o&&j(a)?{isValid:a}:{},errors:r.errors,name:s};r={...r,...v},h.state.next(v)}},Z=async s=>{Q(s,!0);const a=await t.resolver(n,t.context,Hr(s||g.mount,i,t.criteriaMode,t.shouldUseNativeValidation));return Q(s),a},te=async s=>{const{errors:a}=await Z(s);if(s)for(const l of s){const y=f(a,l);y?A(r.errors,l,y):p(r.errors,l)}else r.errors=a;return a},M=async(s,a,l={valid:!0})=>{for(const y in s){const d=s[y];if(d){const{_f:o,...v}=d;if(o){const x=g.array.has(o.name),R=d._f&&Kr(d._f);R&&_.validatingFields&&Q([y],!0);const T=await rr(d,n,N,t.shouldUseNativeValidation&&!a,x);if(R&&_.validatingFields&&Q([y]),T[o.name]&&(l.valid=!1,a))break;!a&&(f(T,o.name)?x?jr(r.errors,T,o.name):A(r.errors,o.name,T[o.name]):p(r.errors,o.name))}!P(v)&&await M(v,a,l)}}return l.valid},he=()=>{for(const s of g.unMount){const a=f(i,s);a&&(a._f.refs?a._f.refs.every(l=>!Re(l)):!Re(a._f.ref))&&Ee(s)}g.unMount=new Set},b=(s,a)=>(s&&a&&A(n,s,a),!X(Be(),u)),F=(s,a,l)=>yr(s,g,{...c.mount?n:E(a)?u:K(s)?{[s]:a}:a},l,a),C=s=>we(f(c.mount?n:u,s,e.shouldUnregister?f(u,s,[]):[])),O=(s,a,l={})=>{const y=f(i,s);let d=a;if(y){const o=y._f;o&&(!o.disabled&&A(n,s,mr(a,o)),d=me(o.ref)&&U(a)?"":a,_r(o.ref)?[...o.ref.options].forEach(v=>v.selected=d.includes(v.value)):o.refs?ge(o.ref)?o.refs.length>1?o.refs.forEach(v=>(!v.defaultChecked||!v.disabled)&&(v.checked=Array.isArray(d)?!!d.find(x=>x===v.value):d===v.value)):o.refs[0]&&(o.refs[0].checked=!!d):o.refs.forEach(v=>v.checked=v.value===d):Pe(o.ref)?o.ref.value="":(o.ref.value=d,o.ref.type||h.values.next({name:s,values:{...n}})))}(l.shouldDirty||l.shouldTouch)&&re(s,d,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&fe(s)},W=(s,a,l)=>{for(const y in a){const d=a[y],o=`${s}.${y}`,v=f(i,o);(g.array.has(s)||!xe(d)||v&&!v._f)&&!ie(d)?W(o,d,l):O(o,d,l)}},B=(s,a,l={})=>{const y=f(i,s),d=g.array.has(s),o=L(a);A(n,s,o),d?(h.array.next({name:s,values:{...n}}),(_.isDirty||_.dirtyFields)&&l.shouldDirty&&h.state.next({name:s,dirtyFields:_e(u,n),isDirty:b(s,o)})):y&&!y._f&&!U(o)?W(s,o,l):O(s,o,l),Je(s,g)&&h.state.next({...r}),h.values.next({name:c.mount?s:void 0,values:{...n}})},le=async s=>{c.mount=!0;const a=s.target;let l=a.name,y=!0;const d=f(i,l),o=()=>a.type?Te(d._f):nr(s),v=x=>{y=Number.isNaN(x)||X(x,f(n,l,x))};if(d){let x,R;const T=o(),ee=s.type===Ve.BLUR||s.type===Ve.FOCUS_OUT,Er=!$r(d._f)&&!t.resolver&&!f(r.errors,l)&&!d._f.deps||Gr(ee,f(r.touchedFields,l),r.isSubmitted,H,I),ke=Je(l,g,ee);A(n,l,T),ee?(d._f.onBlur&&d._f.onBlur(s),V&&V(0)):d._f.onChange&&d._f.onChange(s);const Ce=re(l,T,ee,!1),Sr=!P(Ce)||ke;if(!ee&&h.values.next({name:l,type:s.type,values:{...n}}),Er)return _.isValid&&(e.mode==="onBlur"?ee&&$():$()),Sr&&h.state.next({name:l,...ke?{}:Ce});if(!ee&&ke&&h.state.next({...r}),t.resolver){const{errors:Ge}=await Z([l]);if(v(T),y){const kr=sr(r.errors,i,l),Ye=sr(Ge,i,kr.name||l);x=Ye.error,l=Ye.name,R=P(Ge)}}else Q([l],!0),x=(await rr(d,n,N,t.shouldUseNativeValidation))[l],Q([l]),v(T),y&&(x?R=!1:_.isValid&&(R=await M(i,!0)));y&&(d._f.deps&&fe(d._f.deps),ve(l,R,x,Ce))}},oe=(s,a)=>{if(f(r.errors,a)&&s.focus)return s.focus(),1},fe=async(s,a={})=>{let l,y;const d=de(s);if(t.resolver){const o=await te(E(s)?s:d);l=P(o),y=s?!d.some(v=>f(o,v)):l}else s?(y=(await Promise.all(d.map(async o=>{const v=f(i,o);return await M(v&&v._f?{[o]:v}:v)}))).every(Boolean),!(!y&&!r.isValid)&&$()):y=l=await M(i);return h.state.next({...!K(s)||_.isValid&&l!==r.isValid?{}:{name:s},...t.resolver||!s?{isValid:l}:{},errors:r.errors}),a.shouldFocus&&!y&&ye(i,oe,s?d:g.mount),y},Be=s=>{const a={...c.mount?n:u};return E(s)?a:K(s)?f(a,s):s.map(l=>f(a,l))},je=(s,a)=>({invalid:!!f((a||r).errors,s),isDirty:!!f((a||r).dirtyFields,s),error:f((a||r).errors,s),isValidating:!!f(r.validatingFields,s),isTouched:!!f((a||r).touchedFields,s)}),xr=s=>{s&&de(s).forEach(a=>p(r.errors,a)),h.state.next({errors:s?r.errors:{}})},Ie=(s,a,l)=>{const y=(f(i,s,{_f:{}})._f||{}).ref,d=f(r.errors,s)||{},{ref:o,message:v,type:x,...R}=d;A(r.errors,s,{...R,...a,ref:y}),h.state.next({name:s,errors:r.errors,isValid:!1}),l&&l.shouldFocus&&y&&y.focus&&y.focus()},Ar=(s,a)=>J(s)?h.values.subscribe({next:l=>s(F(void 0,a),l)}):F(s,a,!0),Ee=(s,a={})=>{for(const l of s?de(s):g.mount)g.mount.delete(l),g.array.delete(l),a.keepValue||(p(i,l),p(n,l)),!a.keepError&&p(r.errors,l),!a.keepDirty&&p(r.dirtyFields,l),!a.keepTouched&&p(r.touchedFields,l),!a.keepIsValidating&&p(r.validatingFields,l),!t.shouldUnregister&&!a.keepDefaultValue&&p(u,l);h.values.next({values:{...n}}),h.state.next({...r,...a.keepDirty?{isDirty:b()}:{}}),!a.keepIsValid&&$()},We=({disabled:s,name:a,field:l,fields:y,value:d})=>{if(j(s)&&c.mount||s){const o=s?void 0:E(d)?Te(l?l._f:f(y,a)._f):d;A(n,a,o),re(a,o,!1,!1,!0)}},Se=(s,a={})=>{let l=f(i,s);const y=j(a.disabled)||j(e.disabled);return A(i,s,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:s}},name:s,mount:!0,...a}}),g.mount.add(s),l?We({field:l,disabled:j(a.disabled)?a.disabled:e.disabled,name:s,value:a.value}):k(s,!0,a.value),{...y?{disabled:a.disabled||e.disabled}:{},...t.progressive?{required:!!a.required,min:ce(a.min),max:ce(a.max),minLength:ce(a.minLength),maxLength:ce(a.maxLength),pattern:ce(a.pattern)}:{},name:s,onChange:le,onBlur:le,ref:d=>{if(d){Se(s,a),l=f(i,s);const o=E(d.value)&&d.querySelectorAll&&d.querySelectorAll("input,select,textarea")[0]||d,v=qr(o),x=l._f.refs||[];if(v?x.find(R=>R===o):o===l._f.ref)return;A(i,s,{_f:{...l._f,...v?{refs:[...x.filter(Re),o,...Array.isArray(f(u,s))?[{}]:[]],ref:{type:o.type,name:s}}:{ref:o}}}),k(s,!1,void 0,o)}else l=f(i,s,{}),l._f&&(l._f.mount=!1),(t.shouldUnregister||a.shouldUnregister)&&!(ur(g.array,s)&&c.action)&&g.unMount.add(s)}}},qe=()=>t.shouldFocusError&&ye(i,oe,g.mount),wr=s=>{j(s)&&(h.state.next({disabled:s}),ye(i,(a,l)=>{const y=f(i,l);y&&(a.disabled=y._f.disabled||s,Array.isArray(y._f.refs)&&y._f.refs.forEach(d=>{d.disabled=y._f.disabled||s}))},0,!1))},He=(s,a)=>async l=>{let y;l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let d=L(n);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:o,values:v}=await Z();r.errors=o,d=v}else await M(i);if(p(r.errors,"root"),P(r.errors)){h.state.next({errors:{}});try{await s(d,l)}catch(o){y=o}}else a&&await a({...r.errors},l),qe(),setTimeout(qe);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:P(r.errors)&&!y,submitCount:r.submitCount+1,errors:r.errors}),y)throw y},Dr=(s,a={})=>{f(i,s)&&(E(a.defaultValue)?B(s,L(f(u,s))):(B(s,a.defaultValue),A(u,s,L(a.defaultValue))),a.keepTouched||p(r.touchedFields,s),a.keepDirty||(p(r.dirtyFields,s),r.isDirty=a.defaultValue?b(s,L(f(u,s))):b()),a.keepError||(p(r.errors,s),_.isValid&&$()),h.state.next({...r}))},Ke=(s,a={})=>{const l=s?L(s):u,y=L(l),d=P(s),o=d?u:y;if(a.keepDefaultValues||(u=l),!a.keepValues){if(a.keepDirtyValues)for(const v of g.mount)f(r.dirtyFields,v)?A(o,v,f(n,v)):B(v,f(o,v));else{if(Ne&&E(s))for(const v of g.mount){const x=f(i,v);if(x&&x._f){const R=Array.isArray(x._f.refs)?x._f.refs[0]:x._f.ref;if(me(R)){const T=R.closest("form");if(T){T.reset();break}}}}i={}}n=e.shouldUnregister?a.keepDefaultValues?L(u):{}:L(o),h.array.next({values:{...o}}),h.values.next({values:{...o}})}g={mount:a.keepDirtyValues?g.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},c.mount=!_.isValid||!!a.keepIsValid||!!a.keepDirtyValues,c.watch=!!e.shouldUnregister,h.state.next({submitCount:a.keepSubmitCount?r.submitCount:0,isDirty:d?!1:a.keepDirty?r.isDirty:!!(a.keepDefaultValues&&!X(s,u)),isSubmitted:a.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:d?{}:a.keepDirtyValues?a.keepDefaultValues&&n?_e(u,n):r.dirtyFields:a.keepDefaultValues&&s?_e(u,s):a.keepDirty?r.dirtyFields:{},touchedFields:a.keepTouched?r.touchedFields:{},errors:a.keepErrors?r.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},$e=(s,a)=>Ke(J(s)?s(n):s,a);return{control:{register:Se,unregister:Ee,getFieldState:je,handleSubmit:He,setError:Ie,_executeSchema:Z,_getWatch:F,_getDirty:b,_updateValid:$,_removeUnmounted:he,_updateFieldArray:m,_updateDisabledField:We,_getFieldArray:C,_reset:Ke,_resetDefaultValues:()=>J(t.defaultValues)&&t.defaultValues().then(s=>{$e(s,t.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:s=>{r={...r,...s}},_disableForm:wr,_subjects:h,_proxyFormState:_,_setErrors:Y,get _fields(){return i},get _formValues(){return n},get _state(){return c},set _state(s){c=s},get _defaultValues(){return u},get _names(){return g},set _names(s){g=s},get _formState(){return r},set _formState(s){r=s},get _options(){return t},set _options(s){t={...t,...s}}},trigger:fe,register:Se,handleSubmit:He,watch:Ar,setValue:B,getValues:Be,reset:$e,resetField:Dr,clearErrors:xr,unregister:Ee,setError:Ie,setFocus:(s,a={})=>{const l=f(i,s),y=l&&l._f;if(y){const d=y.refs?y.refs[0]:y.ref;d.focus&&(d.focus(),a.shouldSelect&&d.select())}},getFieldState:je}}function ut(e={}){const t=w.useRef(),r=w.useRef(),[i,u]=w.useState({isDirty:!1,isValidating:!1,isLoading:J(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:J(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...Jr(e),formState:i});const n=t.current.control;return n._options=e,Le({subject:n._subjects.state,next:c=>{cr(c,n._proxyFormState,n._updateFormState,!0)&&u({...n._formState})}}),w.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),w.useEffect(()=>{if(n._proxyFormState.isDirty){const c=n._getDirty();c!==i.isDirty&&n._subjects.state.next({isDirty:c})}},[n,i.isDirty]),w.useEffect(()=>{e.values&&!X(e.values,r.current)?(n._reset(e.values,n._options.resetOptions),r.current=e.values,u(c=>({...c}))):n._resetDefaultValues()},[e.values,n]),w.useEffect(()=>{e.errors&&n._setErrors(e.errors)},[e.errors,n]),w.useEffect(()=>{n._state.mount||(n._updateValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),w.useEffect(()=>{e.shouldUnregister&&n._subjects.values.next({values:n._getWatch()})},[e.shouldUnregister,n]),t.current.formState=fr(i,n),t.current}const ir=(e,t,r)=>{if(e&&"reportValidity"in e){const i=f(r,t);e.setCustomValidity(i&&i.message||""),e.reportValidity()}},Fr=(e,t)=>{for(const r in t.fields){const i=t.fields[r];i&&i.ref&&"reportValidity"in i.ref?ir(i.ref,r,e):i.refs&&i.refs.forEach(u=>ir(u,r,e))}},Qr=(e,t)=>{t.shouldUseNativeValidation&&Fr(e,t);const r={};for(const i in e){const u=f(t.fields,i),n=Object.assign(e[i]||{},{ref:u&&u.ref});if(Xr(t.names||Object.keys(e),i)){const c=Object.assign({},f(r,i));A(c,"root",n),A(r,i,c)}else A(r,i,n)}return r},Xr=(e,t)=>e.some(r=>r.startsWith(t+"."));var Zr=function(e,t){for(var r={};e.length;){var i=e[0],u=i.code,n=i.message,c=i.path.join(".");if(!r[c])if("unionErrors"in i){var g=i.unionErrors[0].errors[0];r[c]={message:g.message,type:g.code}}else r[c]={message:n,type:u};if("unionErrors"in i&&i.unionErrors.forEach(function(_){return _.errors.forEach(function(h){return e.push(h)})}),t){var V=r[c].types,D=V&&V[i.code];r[c]=gr(c,t,r,u,D?[].concat(D,i.message):i.message)}e.shift()}return r},lt=function(e,t,r){return r===void 0&&(r={}),function(i,u,n){try{return Promise.resolve(function(c,g){try{var V=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](i,t)).then(function(D){return n.shouldUseNativeValidation&&Fr({},n),{errors:{},values:r.raw?i:D}})}catch(D){return g(D)}return V&&V.then?V.then(void 0,g):V}(0,function(c){if(function(g){return Array.isArray(g==null?void 0:g.errors)}(c))return{values:{},errors:Qr(Zr(c.errors,!n.shouldUseNativeValidation&&n.criteriaMode==="all"),n)};throw c}))}catch(c){return Promise.reject(c)}}};export{Cr as C,at as F,Nr as a,pr as b,Rr as c,Or as d,Tr as e,Ue as f,nt as g,lt as t,ut as u};
