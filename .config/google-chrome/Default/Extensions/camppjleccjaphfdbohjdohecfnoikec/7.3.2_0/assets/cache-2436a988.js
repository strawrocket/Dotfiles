import{L as n}from"./index-5ad58ea9.js";const s=60*1e3,i=t=>{try{if(t==null)return{isValid:!1};if(Number.isNaN(t.lastUpdatedAt))return{isValid:!1};const e=new Date(t.lastUpdatedAt);if(e.toString()==="Invalid Date")return{isValid:!1};const a=t!=null&&t.staleIn?t==null?void 0:t.staleIn:s;return Date.now()-e.getTime()<a?{data:t,isValid:!0}:{isValid:!1}}catch{return{isValid:!1}}},o=async(t,e,a=1)=>{try{const r=await n.get("cacheStorage");return r?await n.set("cacheStorage",{...r,[t]:{data:e,lastUpdatedAt:Date.now(),staleIn:s*a}}):await n.set("cacheStorage",{[t]:{data:e,lastUpdatedAt:Date.now(),staleIn:s*a}}),null}catch(r){return console.error("Critical error in caching, fix asap",r),null}},d=async t=>{try{const e=await n.get("cacheStorage");if(e&&e[t]){const a=e[t],r=i(a);return r.isValid?r==null?void 0:r.data:(await n.remove(t),null)}return null}catch(e){return console.error("Critical error in caching, fix asap",e),null}};export{d as g,o as s};
