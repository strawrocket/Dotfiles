import{r as m,i as Ze,b as De,g as et,A as Me,j as l,k as Fe,l as oe,L as _e}from"./constants-e5712b98.js";import{c as tt}from"./font-e4ec73e1.js";import{c as ae,B as Y,u as nt}from"./button-e2ac6183.js";import{L as le,Q as Le,c as rt,s as Ne,e as ot,f as st,q as it,h as at,m as lt}from"./index-5ad58ea9.js";import{e as ct,u as ut,C as dt,R as ft,a as pt}from"./index-f00bab01.js";import{T as ht,a as gt,b as mt,c as vt}from"./tooltip-8f9bc4e6.js";import{a as yt,M as bt}from"./messageContext-f7b272bf.js";import{T as St}from"./themeContext-b5ecfc73.js";import{c as de,p as je}from"./createReactComponent-85aa5d18.js";import{R as xt,u as ze,S as wt}from"./streakManagerStore-851ac022.js";import{S as Dt}from"./merlin-logo-d3b9496d.js";import{f as te}from"./analytics-e24f0cc0.js";import{u as Ct}from"./i18n-6c9556b7.js";import{A as Pt}from"./index-c40a070c.js";import{m as Et}from"./motion-ec7ce7e0.js";import{I as Tt}from"./IconLanguage-a0ed4545.js";import{I as Mt}from"./IconX-5b78e9ec.js";import{I as _t}from"./IconSettings-58104ccf.js";import{c as Nt}from"./index-0c67d257.js";import"./index-fe9d96fe.js";import"./index-3da7154a.js";import"./v4-4a60fe23.js";import"./useMedia-c48a250e.js";var zt=de("blockquote","IconBlockquote",[["path",{d:"M6 15h15",key:"svg-0"}],["path",{d:"M21 19h-15",key:"svg-1"}],["path",{d:"M15 11h6",key:"svg-2"}],["path",{d:"M21 7h-6",key:"svg-3"}],["path",{d:"M9 9h1a1 1 0 1 1 -1 1v-2.5a2 2 0 0 1 2 -2",key:"svg-4"}],["path",{d:"M3 9h1a1 1 0 1 1 -1 1v-2.5a2 2 0 0 1 2 -2",key:"svg-5"}]]),Rt=de("bulb","IconBulb",[["path",{d:"M3 12h1m8 -9v1m8 8h1m-15.4 -6.4l.7 .7m12.1 -.7l-.7 .7",key:"svg-0"}],["path",{d:"M9 16a5 5 0 1 1 6 0a3.5 3.5 0 0 0 -1 3a2 2 0 0 1 -4 0a3.5 3.5 0 0 0 -1 -3",key:"svg-1"}],["path",{d:"M9.7 17l4.6 0",key:"svg-2"}]]),At=de("rocket","IconRocket",[["path",{d:"M4 13a8 8 0 0 1 7 7a6 6 0 0 0 3 -5a9 9 0 0 0 6 -8a3 3 0 0 0 -3 -3a9 9 0 0 0 -8 6a6 6 0 0 0 -5 3",key:"svg-0"}],["path",{d:"M7 14a6 6 0 0 0 -3 6a6 6 0 0 0 6 -3",key:"svg-1"}],["path",{d:"M15 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]),Ot=de("world-www","IconWorldWww",[["path",{d:"M19.5 7a9 9 0 0 0 -7.5 -4a8.991 8.991 0 0 0 -7.484 4",key:"svg-0"}],["path",{d:"M11.5 3a16.989 16.989 0 0 0 -1.826 4",key:"svg-1"}],["path",{d:"M12.5 3a16.989 16.989 0 0 1 1.828 4",key:"svg-2"}],["path",{d:"M19.5 17a9 9 0 0 1 -7.5 4a8.991 8.991 0 0 1 -7.484 -4",key:"svg-3"}],["path",{d:"M11.5 21a16.989 16.989 0 0 1 -1.826 -4",key:"svg-4"}],["path",{d:"M12.5 21a16.989 16.989 0 0 0 1.828 -4",key:"svg-5"}],["path",{d:"M2 10l1 4l1.5 -4l1.5 4l1 -4",key:"svg-6"}],["path",{d:"M17 10l1 4l1.5 -4l1.5 4l1 -4",key:"svg-7"}],["path",{d:"M9.5 10l1 4l1.5 -4l1.5 4l1 -4",key:"svg-8"}]]);let ue=!1,ve=0;function xe(){ue=!0,setTimeout(()=>{ue=!1},50)}function Re(e){e.pointerType==="touch"&&xe()}function Ht(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",Re):document.addEventListener("touchend",xe),ve++,()=>{ve--,!(ve>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",Re):document.removeEventListener("touchend",xe))}}function kt(e){let{onHoverStart:t,onHoverChange:r,onHoverEnd:n,isDisabled:o}=e,[s,i]=m.useState(!1),a=m.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;m.useEffect(Ht,[]);let{hoverProps:u,triggerHoverEnd:g}=m.useMemo(()=>{let w=(f,S)=>{if(a.pointerType=S,o||S==="touch"||a.isHovered||!f.currentTarget.contains(f.target))return;a.isHovered=!0;let _=f.currentTarget;a.target=_,t&&t({type:"hoverstart",target:_,pointerType:S}),r&&r(!0),i(!0)},D=(f,S)=>{if(a.pointerType="",a.target=null,S==="touch"||!a.isHovered)return;a.isHovered=!1;let _=f.currentTarget;n&&n({type:"hoverend",target:_,pointerType:S}),r&&r(!1),i(!1)},b={};return typeof PointerEvent<"u"?(b.onPointerEnter=f=>{ue&&f.pointerType==="mouse"||w(f,f.pointerType)},b.onPointerLeave=f=>{!o&&f.currentTarget.contains(f.target)&&D(f,f.pointerType)}):(b.onTouchStart=()=>{a.ignoreEmulatedMouseEvents=!0},b.onMouseEnter=f=>{!a.ignoreEmulatedMouseEvents&&!ue&&w(f,"mouse"),a.ignoreEmulatedMouseEvents=!1},b.onMouseLeave=f=>{!o&&f.currentTarget.contains(f.target)&&D(f,"mouse")}),{hoverProps:b,triggerHoverEnd:D}},[t,r,n,o,a]);return m.useEffect(()=>{o&&g({currentTarget:a.target},a.pointerType)},[o]),{hoverProps:u,isHovered:s}}var ie={exports:{}},Be={};function Ue(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=Ue(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function Ae(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=Ue(e))&&(n&&(n+=" "),n+=t);return n}const Wt=Object.freeze(Object.defineProperty({__proto__:null,clsx:Ae,default:Ae},Symbol.toStringTag,{value:"Module"})),It=Ze(Wt);var P={},X={};Object.defineProperty(X,"__esModule",{value:!0});X.dontSetMe=Ut;X.findInArray=Ft;X.int=Bt;X.isFunction=Lt;X.isNum=jt;function Ft(e,t){for(let r=0,n=e.length;r<n;r++)if(t.apply(t,[e[r],r,e]))return e[r]}function Lt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function jt(e){return typeof e=="number"&&!isNaN(e)}function Bt(e){return parseInt(e,10)}function Ut(e,t,r){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(r," - do not set this, set it on the child."))}var K={};Object.defineProperty(K,"__esModule",{value:!0});K.browserPrefixToKey=$e;K.browserPrefixToStyle=Xt;K.default=void 0;K.getPrefix=Xe;const ye=["Moz","Webkit","O","ms"];function Xe(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const r=(e=window.document)===null||e===void 0||(e=e.documentElement)===null||e===void 0?void 0:e.style;if(!r||t in r)return"";for(let n=0;n<ye.length;n++)if($e(t,ye[n])in r)return ye[n];return""}function $e(e,t){return t?"".concat(t).concat($t(e)):e}function Xt(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e}function $t(e){let t="",r=!0;for(let n=0;n<e.length;n++)r?(t+=e[n].toUpperCase(),r=!1):e[n]==="-"?r=!0:t+=e[n];return t}K.default=Xe();Object.defineProperty(P,"__esModule",{value:!0});P.addClassName=qe;P.addEvent=qt;P.addUserSelectStyles=sn;P.createCSSTransform=tn;P.createSVGTransform=nn;P.getTouch=rn;P.getTouchIdentifier=on;P.getTranslation=Ce;P.innerHeight=Jt;P.innerWidth=Zt;P.matchesSelector=Ge;P.matchesSelectorAndParentsTo=Gt;P.offsetXYFromParent=en;P.outerHeight=Qt;P.outerWidth=Kt;P.removeClassName=Ve;P.removeEvent=Vt;P.removeUserSelectStyles=an;var F=X,Oe=Yt(K);function Ye(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(Ye=function(n){return n?r:t})(e)}function Yt(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=Ye(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}let ce="";function Ge(e,t){return ce||(ce=(0,F.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(r){return(0,F.isFunction)(e[r])})),(0,F.isFunction)(e[ce])?e[ce](t):!1}function Gt(e,t,r){let n=e;do{if(Ge(n,t))return!0;if(n===r)return!1;n=n.parentNode}while(n);return!1}function qt(e,t,r,n){if(!e)return;const o={capture:!0,...n};e.addEventListener?e.addEventListener(t,r,o):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r}function Vt(e,t,r,n){if(!e)return;const o={capture:!0,...n};e.removeEventListener?e.removeEventListener(t,r,o):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null}function Qt(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,F.int)(r.borderTopWidth),t+=(0,F.int)(r.borderBottomWidth),t}function Kt(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,F.int)(r.borderLeftWidth),t+=(0,F.int)(r.borderRightWidth),t}function Jt(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,F.int)(r.paddingTop),t-=(0,F.int)(r.paddingBottom),t}function Zt(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,F.int)(r.paddingLeft),t-=(0,F.int)(r.paddingRight),t}function en(e,t,r){const o=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),s=(e.clientX+t.scrollLeft-o.left)/r,i=(e.clientY+t.scrollTop-o.top)/r;return{x:s,y:i}}function tn(e,t){const r=Ce(e,t,"px");return{[(0,Oe.browserPrefixToKey)("transform",Oe.default)]:r}}function nn(e,t){return Ce(e,t,"")}function Ce(e,t,r){let{x:n,y:o}=e,s="translate(".concat(n).concat(r,",").concat(o).concat(r,")");if(t){const i="".concat(typeof t.x=="string"?t.x:t.x+r),a="".concat(typeof t.y=="string"?t.y:t.y+r);s="translate(".concat(i,", ").concat(a,")")+s}return s}function rn(e,t){return e.targetTouches&&(0,F.findInArray)(e.targetTouches,r=>t===r.identifier)||e.changedTouches&&(0,F.findInArray)(e.changedTouches,r=>t===r.identifier)}function on(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function sn(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,e.getElementsByTagName("head")[0].appendChild(t)),e.body&&qe(e.body,"react-draggable-transparent-selection")}function an(e){if(e)try{if(e.body&&Ve(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function qe(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function Ve(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var $={};Object.defineProperty($,"__esModule",{value:!0});$.canDragX=un;$.canDragY=dn;$.createCoreData=pn;$.createDraggableData=hn;$.getBoundPosition=ln;$.getControlPosition=fn;$.snapToGrid=cn;var I=X,ne=P;function ln(e,t,r){if(!e.props.bounds)return[t,r];let{bounds:n}=e.props;n=typeof n=="string"?n:gn(n);const o=Pe(e);if(typeof n=="string"){const{ownerDocument:s}=o,i=s.defaultView;let a;if(n==="parent"?a=o.parentNode:a=s.querySelector(n),!(a instanceof i.HTMLElement))throw new Error('Bounds selector "'+n+'" could not find an element.');const u=a,g=i.getComputedStyle(o),w=i.getComputedStyle(u);n={left:-o.offsetLeft+(0,I.int)(w.paddingLeft)+(0,I.int)(g.marginLeft),top:-o.offsetTop+(0,I.int)(w.paddingTop)+(0,I.int)(g.marginTop),right:(0,ne.innerWidth)(u)-(0,ne.outerWidth)(o)-o.offsetLeft+(0,I.int)(w.paddingRight)-(0,I.int)(g.marginRight),bottom:(0,ne.innerHeight)(u)-(0,ne.outerHeight)(o)-o.offsetTop+(0,I.int)(w.paddingBottom)-(0,I.int)(g.marginBottom)}}return(0,I.isNum)(n.right)&&(t=Math.min(t,n.right)),(0,I.isNum)(n.bottom)&&(r=Math.min(r,n.bottom)),(0,I.isNum)(n.left)&&(t=Math.max(t,n.left)),(0,I.isNum)(n.top)&&(r=Math.max(r,n.top)),[t,r]}function cn(e,t,r){const n=Math.round(t/e[0])*e[0],o=Math.round(r/e[1])*e[1];return[n,o]}function un(e){return e.props.axis==="both"||e.props.axis==="x"}function dn(e){return e.props.axis==="both"||e.props.axis==="y"}function fn(e,t,r){const n=typeof t=="number"?(0,ne.getTouch)(e,t):null;if(typeof t=="number"&&!n)return null;const o=Pe(r),s=r.props.offsetParent||o.offsetParent||o.ownerDocument.body;return(0,ne.offsetXYFromParent)(n||e,s,r.props.scale)}function pn(e,t,r){const n=!(0,I.isNum)(e.lastX),o=Pe(e);return n?{node:o,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:o,deltaX:t-e.lastX,deltaY:r-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:r}}function hn(e,t){const r=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/r,y:e.state.y+t.deltaY/r,deltaX:t.deltaX/r,deltaY:t.deltaY/r,lastX:e.state.x,lastY:e.state.y}}function gn(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function Pe(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var fe={},pe={};Object.defineProperty(pe,"__esModule",{value:!0});pe.default=mn;function mn(){}Object.defineProperty(fe,"__esModule",{value:!0});fe.default=void 0;var be=yn(m),H=Ee(je),vn=Ee(De),A=P,G=$,Se=X,se=Ee(pe);function Ee(e){return e&&e.__esModule?e:{default:e}}function Qe(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(Qe=function(n){return n?r:t})(e)}function yn(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=Qe(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function O(e,t,r){return t=bn(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bn(e){var t=Sn(e,"string");return typeof t=="symbol"?t:String(t)}function Sn(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const U={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let q=U.mouse,he=class extends be.Component{constructor(){super(...arguments),O(this,"dragging",!1),O(this,"lastX",NaN),O(this,"lastY",NaN),O(this,"touchIdentifier",null),O(this,"mounted",!1),O(this,"handleDragStart",t=>{if(this.props.onMouseDown(t),!this.props.allowAnyClick&&typeof t.button=="number"&&t.button!==0)return!1;const r=this.findDOMNode();if(!r||!r.ownerDocument||!r.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:n}=r;if(this.props.disabled||!(t.target instanceof n.defaultView.Node)||this.props.handle&&!(0,A.matchesSelectorAndParentsTo)(t.target,this.props.handle,r)||this.props.cancel&&(0,A.matchesSelectorAndParentsTo)(t.target,this.props.cancel,r))return;t.type==="touchstart"&&t.preventDefault();const o=(0,A.getTouchIdentifier)(t);this.touchIdentifier=o;const s=(0,G.getControlPosition)(t,o,this);if(s==null)return;const{x:i,y:a}=s,u=(0,G.createCoreData)(this,i,a);(0,se.default)("DraggableCore: handleDragStart: %j",u),(0,se.default)("calling",this.props.onStart),!(this.props.onStart(t,u)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,A.addUserSelectStyles)(n),this.dragging=!0,this.lastX=i,this.lastY=a,(0,A.addEvent)(n,q.move,this.handleDrag),(0,A.addEvent)(n,q.stop,this.handleDragStop))}),O(this,"handleDrag",t=>{const r=(0,G.getControlPosition)(t,this.touchIdentifier,this);if(r==null)return;let{x:n,y:o}=r;if(Array.isArray(this.props.grid)){let a=n-this.lastX,u=o-this.lastY;if([a,u]=(0,G.snapToGrid)(this.props.grid,a,u),!a&&!u)return;n=this.lastX+a,o=this.lastY+u}const s=(0,G.createCoreData)(this,n,o);if((0,se.default)("DraggableCore: handleDrag: %j",s),this.props.onDrag(t,s)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const u=document.createEvent("MouseEvents");u.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(u)}return}this.lastX=n,this.lastY=o}),O(this,"handleDragStop",t=>{if(!this.dragging)return;const r=(0,G.getControlPosition)(t,this.touchIdentifier,this);if(r==null)return;let{x:n,y:o}=r;if(Array.isArray(this.props.grid)){let u=n-this.lastX||0,g=o-this.lastY||0;[u,g]=(0,G.snapToGrid)(this.props.grid,u,g),n=this.lastX+u,o=this.lastY+g}const s=(0,G.createCoreData)(this,n,o);if(this.props.onStop(t,s)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,A.removeUserSelectStyles)(a.ownerDocument),(0,se.default)("DraggableCore: handleDragStop: %j",s),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,se.default)("DraggableCore: Removing handlers"),(0,A.removeEvent)(a.ownerDocument,q.move,this.handleDrag),(0,A.removeEvent)(a.ownerDocument,q.stop,this.handleDragStop))}),O(this,"onMouseDown",t=>(q=U.mouse,this.handleDragStart(t))),O(this,"onMouseUp",t=>(q=U.mouse,this.handleDragStop(t))),O(this,"onTouchStart",t=>(q=U.touch,this.handleDragStart(t))),O(this,"onTouchEnd",t=>(q=U.touch,this.handleDragStop(t)))}componentDidMount(){this.mounted=!0;const t=this.findDOMNode();t&&(0,A.addEvent)(t,U.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const t=this.findDOMNode();if(t){const{ownerDocument:r}=t;(0,A.removeEvent)(r,U.mouse.move,this.handleDrag),(0,A.removeEvent)(r,U.touch.move,this.handleDrag),(0,A.removeEvent)(r,U.mouse.stop,this.handleDragStop),(0,A.removeEvent)(r,U.touch.stop,this.handleDragStop),(0,A.removeEvent)(t,U.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,A.removeUserSelectStyles)(r)}}findDOMNode(){var t,r;return(t=this.props)!==null&&t!==void 0&&t.nodeRef?(r=this.props)===null||r===void 0||(r=r.nodeRef)===null||r===void 0?void 0:r.current:vn.default.findDOMNode(this)}render(){return be.cloneElement(be.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};fe.default=he;O(he,"displayName","DraggableCore");O(he,"propTypes",{allowAnyClick:H.default.bool,children:H.default.node.isRequired,disabled:H.default.bool,enableUserSelectHack:H.default.bool,offsetParent:function(e,t){if(e[t]&&e[t].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:H.default.arrayOf(H.default.number),handle:H.default.string,cancel:H.default.string,nodeRef:H.default.object,onStart:H.default.func,onDrag:H.default.func,onStop:H.default.func,onMouseDown:H.default.func,scale:H.default.number,className:Se.dontSetMe,style:Se.dontSetMe,transform:Se.dontSetMe});O(he,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return u.default}}),e.default=void 0;var t=b(m),r=w(je),n=w(De),o=w(It),s=P,i=$,a=X,u=w(fe),g=w(pe);function w(d){return d&&d.__esModule?d:{default:d}}function D(d){if(typeof WeakMap!="function")return null;var c=new WeakMap,h=new WeakMap;return(D=function(p){return p?h:c})(d)}function b(d,c){if(!c&&d&&d.__esModule)return d;if(d===null||typeof d!="object"&&typeof d!="function")return{default:d};var h=D(c);if(h&&h.has(d))return h.get(d);var p={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in d)if(v!=="default"&&Object.prototype.hasOwnProperty.call(d,v)){var M=x?Object.getOwnPropertyDescriptor(d,v):null;M&&(M.get||M.set)?Object.defineProperty(p,v,M):p[v]=d[v]}return p.default=d,h&&h.set(d,p),p}function f(){return f=Object.assign?Object.assign.bind():function(d){for(var c=1;c<arguments.length;c++){var h=arguments[c];for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&(d[p]=h[p])}return d},f.apply(this,arguments)}function S(d,c,h){return c=_(c),c in d?Object.defineProperty(d,c,{value:h,enumerable:!0,configurable:!0,writable:!0}):d[c]=h,d}function _(d){var c=L(d,"string");return typeof c=="symbol"?c:String(c)}function L(d,c){if(typeof d!="object"||d===null)return d;var h=d[Symbol.toPrimitive];if(h!==void 0){var p=h.call(d,c||"default");if(typeof p!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(d)}class R extends t.Component{static getDerivedStateFromProps(c,h){let{position:p}=c,{prevPropsPosition:x}=h;return p&&(!x||p.x!==x.x||p.y!==x.y)?((0,g.default)("Draggable: getDerivedStateFromProps %j",{position:p,prevPropsPosition:x}),{x:p.x,y:p.y,prevPropsPosition:{...p}}):null}constructor(c){super(c),S(this,"onDragStart",(h,p)=>{if((0,g.default)("Draggable: onDragStart: %j",p),this.props.onStart(h,(0,i.createDraggableData)(this,p))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),S(this,"onDrag",(h,p)=>{if(!this.state.dragging)return!1;(0,g.default)("Draggable: onDrag: %j",p);const x=(0,i.createDraggableData)(this,p),v={x:x.x,y:x.y,slackX:0,slackY:0};if(this.props.bounds){const{x:z,y:C}=v;v.x+=this.state.slackX,v.y+=this.state.slackY;const[k,E]=(0,i.getBoundPosition)(this,v.x,v.y);v.x=k,v.y=E,v.slackX=this.state.slackX+(z-v.x),v.slackY=this.state.slackY+(C-v.y),x.x=v.x,x.y=v.y,x.deltaX=v.x-this.state.x,x.deltaY=v.y-this.state.y}if(this.props.onDrag(h,x)===!1)return!1;this.setState(v)}),S(this,"onDragStop",(h,p)=>{if(!this.state.dragging||this.props.onStop(h,(0,i.createDraggableData)(this,p))===!1)return!1;(0,g.default)("Draggable: onDragStop: %j",p);const v={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:z,y:C}=this.props.position;v.x=z,v.y=C}this.setState(v)}),this.state={dragging:!1,dragged:!1,x:c.position?c.position.x:c.defaultPosition.x,y:c.position?c.position.y:c.defaultPosition.y,prevPropsPosition:{...c.position},slackX:0,slackY:0,isElementSVG:!1},c.position&&!(c.onDrag||c.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var c,h;return(c=(h=this.props)===null||h===void 0||(h=h.nodeRef)===null||h===void 0?void 0:h.current)!==null&&c!==void 0?c:n.default.findDOMNode(this)}render(){const{axis:c,bounds:h,children:p,defaultPosition:x,defaultClassName:v,defaultClassNameDragging:M,defaultClassNameDragged:z,position:C,positionOffset:k,scale:E,...j}=this.props;let J={},Z=null;const ee=!!!C||this.state.dragging,Q=C||x,B={x:(0,i.canDragX)(this)&&ee?this.state.x:Q.x,y:(0,i.canDragY)(this)&&ee?this.state.y:Q.y};this.state.isElementSVG?Z=(0,s.createSVGTransform)(B,k):J=(0,s.createCSSTransform)(B,k);const ge=(0,o.default)(p.props.className||"",v,{[M]:this.state.dragging,[z]:this.state.dragged});return t.createElement(u.default,f({},j,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(p),{className:ge,style:{...p.props.style,...J},transform:Z}))}}e.default=R,S(R,"displayName","Draggable"),S(R,"propTypes",{...u.default.propTypes,axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),S(R,"defaultProps",{...u.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(Be);ie.exports;const{default:Ke,DraggableCore:xn}=Be;ie.exports=Ke;ie.exports.default=Ke;ie.exports.DraggableCore=xn;var wn=ie.exports;const Dn=et(wn);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var we=function(e,t){return we=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},we(e,t)};function Cn(e,t){we(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var N=function(){return N=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},N.apply(this,arguments)};function Pn(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}var En={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},Tn=function(e){return{bottom:e,bottomLeft:e,bottomRight:e,left:e,right:e,top:e,topLeft:e,topRight:e}},Mn=function(e){Cn(t,e);function t(r){var n=e.call(this,r)||this;return n.resizingPosition={x:0,y:0},n.offsetFromParent={left:0,top:0},n.resizableElement={current:null},n.originalPosition={x:0,y:0},n.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:r.maxWidth,maxHeight:r.maxHeight},n.onResizeStart=n.onResizeStart.bind(n),n.onResize=n.onResize.bind(n),n.onResizeStop=n.onResizeStop.bind(n),n.onDragStart=n.onDragStart.bind(n),n.onDrag=n.onDrag.bind(n),n.onDragStop=n.onDragStop.bind(n),n.getMaxSizesFromProps=n.getMaxSizesFromProps.bind(n),n}return t.prototype.componentDidMount=function(){this.updateOffsetFromParent();var r=this.offsetFromParent,n=r.left,o=r.top,s=this.getDraggablePosition(),i=s.x,a=s.y;this.draggable.setState({x:i-n,y:a-o}),this.forceUpdate()},t.prototype.getDraggablePosition=function(){var r=this.draggable.state,n=r.x,o=r.y;return{x:n,y:o}},t.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},t.prototype.getParentSize=function(){return this.resizable.getParentSize()},t.prototype.getMaxSizesFromProps=function(){var r=typeof this.props.maxWidth>"u"?Number.MAX_SAFE_INTEGER:this.props.maxWidth,n=typeof this.props.maxHeight>"u"?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:r,maxHeight:n}},t.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},t.prototype.getOffsetHeight=function(r){var n=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/n;case"body":return document.body.offsetHeight/n;default:return r.offsetHeight}},t.prototype.getOffsetWidth=function(r){var n=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/n;case"body":return document.body.offsetWidth/n;default:return r.offsetWidth}},t.prototype.onDragStart=function(r,n){this.props.onDragStart&&this.props.onDragStart(r,n);var o=this.getDraggablePosition();if(this.originalPosition=o,!!this.props.bounds){var s=this.getParent(),i=this.props.scale,a;if(this.props.bounds==="parent")a=s;else if(this.props.bounds==="body"){var u=s.getBoundingClientRect(),g=u.left,w=u.top,D=document.body.getBoundingClientRect(),b=-(g-s.offsetLeft*i-D.left)/i,f=-(w-s.offsetTop*i-D.top)/i,S=(document.body.offsetWidth-this.resizable.size.width*i)/i+b,_=(document.body.offsetHeight-this.resizable.size.height*i)/i+f;return this.setState({bounds:{top:f,right:S,bottom:_,left:b}})}else if(this.props.bounds==="window"){if(!this.resizable)return;var L=s.getBoundingClientRect(),R=L.left,d=L.top,c=-(R-s.offsetLeft*i)/i,h=-(d-s.offsetTop*i)/i,S=(window.innerWidth-this.resizable.size.width*i)/i+c,_=(window.innerHeight-this.resizable.size.height*i)/i+h;return this.setState({bounds:{top:h,right:S,bottom:_,left:c}})}else typeof this.props.bounds=="string"?a=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(a=this.props.bounds);if(!(!(a instanceof HTMLElement)||!(s instanceof HTMLElement))){var p=a.getBoundingClientRect(),x=p.left,v=p.top,M=s.getBoundingClientRect(),z=M.left,C=M.top,k=(x-z)/i,E=v-C;if(this.resizable){this.updateOffsetFromParent();var j=this.offsetFromParent;this.setState({bounds:{top:E-j.top,right:k+(a.offsetWidth-this.resizable.size.width)-j.left/i,bottom:E+(a.offsetHeight-this.resizable.size.height)-j.top,left:k-j.left/i}})}}}},t.prototype.onDrag=function(r,n){if(this.props.onDrag){var o=this.offsetFromParent,s=o.left,i=o.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDrag(r,N(N({},n),{x:n.x+s,y:n.y+i}));if(this.props.dragAxis==="x")return this.props.onDrag(r,N(N({},n),{x:n.x+s,y:this.originalPosition.y+i,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDrag(r,N(N({},n),{x:this.originalPosition.x+s,y:n.y+i,deltaX:0}))}},t.prototype.onDragStop=function(r,n){if(this.props.onDragStop){var o=this.offsetFromParent,s=o.left,i=o.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDragStop(r,N(N({},n),{x:n.x+s,y:n.y+i}));if(this.props.dragAxis==="x")return this.props.onDragStop(r,N(N({},n),{x:n.x+s,y:this.originalPosition.y+i,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDragStop(r,N(N({},n),{x:this.originalPosition.x+s,y:n.y+i,deltaX:0}))}},t.prototype.onResizeStart=function(r,n,o){r.stopPropagation(),this.setState({resizing:!0});var s=this.props.scale,i=this.offsetFromParent,a=this.getDraggablePosition();if(this.resizingPosition={x:a.x+i.left,y:a.y+i.top},this.originalPosition=a,this.props.bounds){var u=this.getParent(),g=void 0;this.props.bounds==="parent"?g=u:this.props.bounds==="body"?g=document.body:this.props.bounds==="window"?g=window:typeof this.props.bounds=="string"?g=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(g=this.props.bounds);var w=this.getSelfElement();if(w instanceof Element&&(g instanceof HTMLElement||g===window)&&u instanceof HTMLElement){var D=this.getMaxSizesFromProps(),b=D.maxWidth,f=D.maxHeight,S=this.getParentSize();if(b&&typeof b=="string")if(b.endsWith("%")){var _=Number(b.replace("%",""))/100;b=S.width*_}else b.endsWith("px")&&(b=Number(b.replace("px","")));if(f&&typeof f=="string")if(f.endsWith("%")){var _=Number(f.replace("%",""))/100;f=S.height*_}else f.endsWith("px")&&(f=Number(f.replace("px","")));var L=w.getBoundingClientRect(),R=L.left,d=L.top,c=this.props.bounds==="window"?{left:0,top:0}:g.getBoundingClientRect(),h=c.left,p=c.top,x=this.getOffsetWidth(g),v=this.getOffsetHeight(g),M=n.toLowerCase().endsWith("left"),z=n.toLowerCase().endsWith("right"),C=n.startsWith("top"),k=n.startsWith("bottom");if((M||C)&&this.resizable){var E=(R-h)/s+this.resizable.size.width;this.setState({maxWidth:E>Number(b)?b:E})}if(z||this.props.lockAspectRatio&&!M&&!C){var E=x+(h-R)/s;this.setState({maxWidth:E>Number(b)?b:E})}if((C||M)&&this.resizable){var E=(d-p)/s+this.resizable.size.height;this.setState({maxHeight:E>Number(f)?f:E})}if(k||this.props.lockAspectRatio&&!C&&!M){var E=v+(p-d)/s;this.setState({maxHeight:E>Number(f)?f:E})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(r,n,o)},t.prototype.onResize=function(r,n,o,s){var i=this,a={x:this.originalPosition.x,y:this.originalPosition.y},u=-s.width,g=-s.height,w=["top","left","topLeft","bottomLeft","topRight"];w.includes(n)&&(n==="bottomLeft"?a.x+=u:(n==="topRight"||(a.x+=u),a.y+=g));var D=this.draggable.state;(a.x!==D.x||a.y!==D.y)&&De.flushSync(function(){i.draggable.setState(a)}),this.updateOffsetFromParent();var b=this.offsetFromParent,f=this.getDraggablePosition().x+b.left,S=this.getDraggablePosition().y+b.top;this.resizingPosition={x:f,y:S},this.props.onResize&&this.props.onResize(r,n,o,s,{x:f,y:S})},t.prototype.onResizeStop=function(r,n,o,s){this.setState({resizing:!1});var i=this.getMaxSizesFromProps(),a=i.maxWidth,u=i.maxHeight;this.setState({maxWidth:a,maxHeight:u}),this.props.onResizeStop&&this.props.onResizeStop(r,n,o,s,this.resizingPosition)},t.prototype.updateSize=function(r){this.resizable&&this.resizable.updateSize({width:r.width,height:r.height})},t.prototype.updatePosition=function(r){this.draggable.setState(r)},t.prototype.updateOffsetFromParent=function(){var r=this.props.scale,n=this.getParent(),o=this.getSelfElement();if(!n||o===null)return{top:0,left:0};var s=n.getBoundingClientRect(),i=s.left,a=s.top,u=o.getBoundingClientRect(),g=this.getDraggablePosition(),w=n.scrollLeft,D=n.scrollTop;this.offsetFromParent={left:u.left-i+w-g.x*r,top:u.top-a+D-g.y*r}},t.prototype.render=function(){var r=this,n=this.props,o=n.disableDragging,s=n.style,i=n.dragHandleClassName,a=n.position,u=n.onMouseDown,g=n.onMouseUp,w=n.dragAxis,D=n.dragGrid,b=n.bounds,f=n.enableUserSelectHack,S=n.cancel,_=n.children;n.onResizeStart,n.onResize,n.onResizeStop,n.onDragStart,n.onDrag,n.onDragStop;var L=n.resizeHandleStyles,R=n.resizeHandleClasses,d=n.resizeHandleComponent,c=n.enableResizing,h=n.resizeGrid,p=n.resizeHandleWrapperClass,x=n.resizeHandleWrapperStyle,v=n.scale,M=n.allowAnyClick,z=Pn(n,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick"]),C=this.props.default?N({},this.props.default):void 0;delete z.default;var k=o||i?{cursor:"auto"}:{cursor:"move"},E=N(N(N({},En),k),s),j=this.offsetFromParent,J=j.left,Z=j.top,re;a&&(re={x:a.x-J,y:a.y-Z});var ee=this.state.resizing?void 0:re,Q=this.state.resizing?"both":w;return m.createElement(Dn,{ref:function(B){B&&(r.draggable=B)},handle:i?".".concat(i):void 0,defaultPosition:C,onMouseDown:u,onMouseUp:g,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:Q,disabled:o,grid:D,bounds:b?this.state.bounds:void 0,position:ee,enableUserSelectHack:f,cancel:S,scale:v,allowAnyClick:M,nodeRef:this.resizableElement},m.createElement(xt,N({},z,{ref:function(B){B&&(r.resizable=B,r.resizableElement.current=B.resizable)},defaultSize:C,size:this.props.size,enable:typeof c=="boolean"?Tn(c):c,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:E,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:h,handleWrapperClass:p,handleWrapperStyle:x,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:L,handleClasses:R,handleComponent:d,scale:this.props.scale}),_))},t.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},t}(m.PureComponent);const He=["mousemove","mousedown","keypress","DOMMouseScroll","mousewheel","touchmove","MSPointerMove"],ke=["blur","focus"],_n=e=>{const[t,r]=m.useState(!1),n=m.useRef(null),o=m.useCallback(()=>{n.current=window.setTimeout(i,e)},[e]),s=m.useCallback(()=>{n.current&&window.clearTimeout(n.current),a()},[]),i=m.useCallback(()=>{r(!0)},[]),a=m.useCallback(()=>{r(!1),o()},[o]),u=m.useCallback((g,w,D)=>{w.forEach(b=>g[`${D}EventListener`](b,s))},[s]);return m.useEffect(()=>(u(document,He,"add"),u(window,ke,"add"),()=>{u(document,He,"remove"),u(window,ke,"remove"),n.current&&window.clearTimeout(n.current)}),[]),t},We=Math.ceil(window.innerHeight/4)*3;function V({children:e,content:t,...r}){return l.jsxs(ht,{children:[l.jsx(gt,{asChild:!0,children:e}),l.jsx(mt,{side:"left",align:"center",sideOffset:10,...r,className:"text-sm",children:t})]})}function Nn(){var Te;const{t:e}=Ct(),t=m.useRef(null),{count:r}=ze(),{getFromBackground:n}=m.useContext(yt),[o,s]=m.useState(!0),[i,a]=m.useState(!1),[u,g]=m.useState({x:0,y:We}),[w,D]=m.useState(""),[b,f]=m.useState(!1),[S,_]=m.useState(""),[L,R]=m.useState(!1),[d,c]=m.useState(!0),[h,p]=m.useState(0),x=ct(),v=(x==null?void 0:x.isFree)||((Te=x==null?void 0:x.details)==null?void 0:Te.role)==="paid_temp",{hoverProps:M,isHovered:z}=kt({onHoverStart:y=>R(!1)});m.useEffect(()=>{(async()=>{try{const y=parseInt(await le.get("showNewCTAs")||0);p(T=>y+T)}catch{}})()},[]);const C=m.useRef(h);m.useEffect(()=>{C.current=h},[h]),m.useEffect(()=>{let y=null;const T=()=>{y&&clearTimeout(y);const W=window.getSelection();if(W&&W.rangeCount>0){const me=W.toString();_(me),R(!0),y=setTimeout(()=>{R(!1)},5e3)}else _(""),C.current<=2&&le.set("showNewCTAs",C.current+1).then(()=>{p(me=>1+me),C.current=C.current+1}),R(!1)};return document.addEventListener("selectionchange",T),()=>{document.removeEventListener("selectionchange",T),y&&clearTimeout(y)}},[]),m.useEffect(()=>{(async()=>{const y=await n(Me.BROWSER.CHECK_SHORTCUT);D(y)})()},[]);const k=ut();m.useEffect(()=>{(async()=>{const y=await k.fetchQuery(Le);if(y.misc.merlinCTA&&!y.misc.merlinCTA.isVisible){c(!1);return}})()},[]);const E=_n(1e4);m.useEffect(()=>{},[E,i]),m.useEffect(()=>{(async()=>{const y=await le.get("userPrefferedPositionMerlinIconCTA");y&&y.y?g({x:0,y:y.y}):g({x:0,y:We})})()},[]),m.useEffect(()=>{rt(y=>{y.whiteList.filter(T=>T===location).length===0?s(!0):s(!1),y.isRemoved&&s(!1)})},[]),m.useEffect(()=>{const y=()=>{const T=window.fullScreen||window.innerHeight===screen.height;f(T)};return window.addEventListener("resize",y),y(),()=>window.removeEventListener("resize",y)},[]);function j(){Ne({data:{selectionText:ot()},from:"selectContextBtn"})}function J(){te({eventName:"CloseMerlinIconCTA",eventType:"Button",feature:"MerlinIcon",firedFromFile:"src/features/merlinIconCTA"}),a(!0),st(Fe.SELECT_CONTEXT_BTN)}function Z(){te({eventName:"ChatWithWebsiteFromMerlinCTA",eventType:"Button",feature:"WebpageChat",firedFromFile:"components/merlinIconCTA"}),window.parent.postMessage({data:{action:"WEB_CHAT",query:""},type:oe.MERLIN_CTA},"*")}function re(){te({eventName:"SummariseWebsiteFromMerlinCTA",eventType:"Button",feature:"BlogSummarizer",firedFromFile:"components/merlinIconCTA"}),window.parent.postMessage({data:{action:"WEB_CHAT",query:"Summarise & Provide Key Points"},type:oe.MERLIN_CTA},"*")}const ee=()=>{const y=navigator?navigator.language:"en-US";let T=y.split("-")[0];T==="zh"&&(T=y);let W="english";_e[T??"en"]&&(W=_e[T??"en"]),te({eventName:"TranslateSelectedFromMerlinCTA",eventType:"Button",feature:"MerlinChatGUI",firedFromFile:"components/merlinIconCTA"}),window.parent.postMessage({data:{action:"SEND_QUERY",context:S,query:`translate this text to ${W} but make sure it makes sense in ${W} and is grammatically correct.`},type:oe.MERLIN_CTA},"*")},Q=()=>{te({eventName:"ExplainSelectedFromMerlinCTA",eventType:"Button",feature:"MerlinChatGUI",firedFromFile:"components/merlinIconCTA"}),window.parent.postMessage({data:{action:"SEND_QUERY",context:S,query:"Explain this text to me with more context and use simple english"},type:oe.MERLIN_CTA},"*")},B=()=>{te({eventName:"PerformLiveSearchFromMerlinCTA",eventType:"Button",feature:"WebAccess",firedFromFile:"components/merlinIconCTA"}),window.parent.postMessage({data:{action:"WEB_ACCESS",context:S,query:"what's new with this?"},type:oe.MERLIN_CTA},"*")},[ge,Je]=m.useState(78);return m.useLayoutEffect(()=>{var T;const y=(T=t.current)==null?void 0:T.getBoundingClientRect().width;Je(y||40)},[w]),l.jsx(Pt,{children:!i&&o&&!b&&l.jsx(Et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"relative print:hidden",children:l.jsx(Mn,{position:u,dragAxis:"y",dragHandleClassName:"dragHandle",enableResizing:!1,bounds:"window",onDragStart:y=>y.preventDefault(),onDragStop:(y,T)=>{let W=null;T.y>window.innerHeight-40?W={x:0,y:window.innerHeight-40}:T.y<30?W={x:0,y:10}:W={x:0,y:T.y},g(W),u.y===T.y?j():le.set("userPrefferedPositionMerlinIconCTA",W)},className:"group/outerdiv",children:l.jsxs("div",{className:ae("absolute -bottom-20 left-0 flex w-10 flex-col items-end justify-end gap-3",z?"opacity-100 [transition:transform_150ms_100ms_ease-out,opacity_200ms_100ms]":"opacity-40 [transition:transform_350ms_600ms_ease,opacity_200ms_300ms]"),...M,style:{transform:z?"translateX(-40px)":`translateX(${ge-80}px)`},children:[l.jsxs("div",{className:ae("grid rounded-md shadow backdrop-blur",z?"bg-background [transition:background-color_150ms_100ms]":"bg-transparent [transition:background-color_350ms_600ms]"),children:[v&&l.jsx(V,{content:"Winter Quest",children:l.jsxs(Y,{variant:"ghost",size:"icon",onClick:()=>{Q(),ze.setState({isVisible:!0})},className:"flex items-center gap-1",children:[l.jsx(wt,{})," ",r>0?r:""]})}),S?l.jsxs(l.Fragment,{children:[l.jsx(V,{content:e("merlin_cta.live_search"),children:l.jsx(Y,{variant:"ghost",size:"icon",onClick:B,children:l.jsx(At,{className:"text-foreground"})})}),l.jsx(V,{content:e("merlin_cta.translate"),children:l.jsx(Y,{variant:"ghost",size:"icon",onClick:ee,children:l.jsx(Tt,{className:"text-foreground"})})}),l.jsx(V,{content:e("merlin_cta.explain"),children:l.jsx(Y,{variant:"ghost",size:"icon",onClick:Q,children:l.jsx(Rt,{className:"text-foreground"})})})]}):l.jsxs(l.Fragment,{children:[l.jsx(V,{content:e("merlin_cta.summ"),children:l.jsx(Y,{variant:"ghost",size:"icon",onClick:re,children:l.jsx(zt,{className:"text-foreground"})})}),l.jsx(V,{content:e("merlin_cta.ask"),children:l.jsx(Y,{variant:"ghost",size:"icon",onClick:Z,children:l.jsx(Ot,{className:"text-foreground"})})})]})]}),l.jsx(V,{content:"Open Merlin",children:l.jsxs("div",{className:ae("center-with-flex group/primaryCTA dragHandle text-foreground focus-visible:ring-ring relative z-10 cursor-pointer select-none gap-2 whitespace-nowrap rounded-s-md p-2 shadow transition-colors focus-visible:outline-none focus-visible:ring-1",z?"bg-background [transition:background-color_200ms_100ms]":"bg-transparent [transition:background-color_350ms_600ms]"),ref:t,children:[l.jsx(Dt,{className:"h-6 w-6"}),d&&S&&L&&l.jsx("div",{className:"absolute -bottom-1 -left-1 z-10 border-opacity-100 bg-opacity-100 opacity-100 group-hover/outerdiv:opacity-0",children:l.jsxs("span",{className:"relative flex h-2 w-2",children:[l.jsx("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-sky-400 opacity-75"}),l.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-sky-500 bg-opacity-100 opacity-100 transition-none before:opacity-100"})]})}),l.jsx("span",{className:"tracking-wider",children:w||"Shortcut Not Set"}),l.jsx(Y,{onMouseDown:y=>y.stopPropagation(),onMouseUp:y=>{J(),y.stopPropagation()},variant:"outline",size:"icon",className:"absolute -left-4 -top-4 z-20 h-6 w-6 rounded-full p-1 opacity-0 transition-opacity duration-200 group-hover/primaryCTA:opacity-100",children:l.jsx(Mt,{className:"text-foreground"})})]})}),l.jsx("div",{className:ae("grid rounded-md shadow backdrop-blur",z?"bg-background [transition:background-color_150ms_100ms]":"bg-transparent [transition:background-color_350ms_600ms]"),children:l.jsx(V,{content:"Settings",children:l.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>Ne({action:Me.OPEN_OPTIONS_PAGE}),children:l.jsx(_t,{className:"text-foreground"})})})})]})})})})}const zn=async()=>{if(document.getElementById("merlin-context-btn")||document.location.href.includes("docs.google.com/spreadsheets"))return;const e=await it.fetchQuery(Le);if(e&&!e.misc.selectContextBtn.visible||e&&e.misc.selectContextBtn.blackListedDomains.includes(window.location.hostname)||await at(Fe.SELECT_CONTEXT_BTN))return;const r=document.createElement("merlin-component");r.id="merlin-context-btn",r.className="merlin context-btn";const n=r.attachShadow({mode:"open"}),o=document.createElement("style");o.textContent=`${Nt}
    :host(#merlin-context-btn) {
    }
    .reactAppRoot {
      all: initial; /* 1st rule so subsequent properties are reset. */
      position: fixed;
      top: 0;
      right: 0;
      z-index: 2147483600;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    `;const s=document.createElement("div");s.id="reactAppRoot",s.className="reactAppRoot",n.appendChild(o),n.appendChild(s),lt(r);const i=tt(s);i.render(l.jsx(Ie,{})),Rn(()=>{i.render(l.jsx(Ie,{}))})},Rn=e=>{let t="";const r=new MutationObserver(o=>{location.href!==t&&(t=location.href,e())}),n={childList:!0,subtree:!0};r.observe(document.body,n)};function Ie(){var t,r;return(r=(t=nt().details)==null?void 0:t.merlinIconCTA)!=null&&r.isEnabled?l.jsx(dt,{children:l.jsx(ft,{children:l.jsx(bt,{children:l.jsx(pt,{children:l.jsx(St,{children:l.jsx(vt,{delayDuration:100,children:l.jsx(Nn,{})})})})})})}):null}zn();
